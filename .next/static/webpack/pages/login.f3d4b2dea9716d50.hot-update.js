"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/login",{

/***/ "./node_modules/@firebase/auth-compat/dist/index.esm2017.js":
/*!******************************************************************!*\
  !*** ./node_modules/@firebase/auth-compat/dist/index.esm2017.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _firebase_app_compat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/app-compat */ \"./node_modules/@firebase/app-compat/dist/esm/index.esm2017.js\");\n/* harmony import */ var _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @firebase/auth/internal */ \"./node_modules/@firebase/auth/dist/esm2017/internal.js\");\n/* harmony import */ var _firebase_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @firebase/component */ \"./node_modules/@firebase/component/dist/esm/index.esm2017.js\");\n/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @firebase/util */ \"./node_modules/@firebase/util/dist/index.esm2017.js\");\n\n\n\n\n\nvar name = \"@firebase/auth-compat\";\nvar version = \"0.2.18\";\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst CORDOVA_ONDEVICEREADY_TIMEOUT_MS = 1000;\r\nfunction _getCurrentScheme() {\r\n    var _a;\r\n    return ((_a = self === null || self === void 0 ? void 0 : self.location) === null || _a === void 0 ? void 0 : _a.protocol) || null;\r\n}\r\n/**\r\n * @return {boolean} Whether the current environment is http or https.\r\n */\r\nfunction _isHttpOrHttps() {\r\n    return _getCurrentScheme() === 'http:' || _getCurrentScheme() === 'https:';\r\n}\r\n/**\r\n * @param {?string=} ua The user agent.\r\n * @return {boolean} Whether the app is rendered in a mobile iOS or Android\r\n *     Cordova environment.\r\n */\r\nfunction _isAndroidOrIosCordovaScheme(ua = (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.getUA)()) {\r\n    return !!((_getCurrentScheme() === 'file:' ||\r\n        _getCurrentScheme() === 'ionic:' ||\r\n        _getCurrentScheme() === 'capacitor:') &&\r\n        ua.toLowerCase().match(/iphone|ipad|ipod|android/));\r\n}\r\n/**\r\n * @return {boolean} Whether the environment is a native environment, where\r\n *     CORS checks do not apply.\r\n */\r\nfunction _isNativeEnvironment() {\r\n    return (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isReactNative)() || (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isNode)();\r\n}\r\n/**\r\n * Checks whether the user agent is IE11.\r\n * @return {boolean} True if it is IE11.\r\n */\r\nfunction _isIe11() {\r\n    return (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isIE)() && (document === null || document === void 0 ? void 0 : document.documentMode) === 11;\r\n}\r\n/**\r\n * Checks whether the user agent is Edge.\r\n * @param {string} userAgent The browser user agent string.\r\n * @return {boolean} True if it is Edge.\r\n */\r\nfunction _isEdge(ua = (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.getUA)()) {\r\n    return /Edge\\/\\d+/.test(ua);\r\n}\r\n/**\r\n * @param {?string=} opt_userAgent The navigator user agent.\r\n * @return {boolean} Whether local storage is not synchronized between an iframe\r\n *     and a popup of the same domain.\r\n */\r\nfunction _isLocalStorageNotSynchronized(ua = (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.getUA)()) {\r\n    return _isIe11() || _isEdge(ua);\r\n}\r\n/** @return {boolean} Whether web storage is supported. */\r\nfunction _isWebStorageSupported() {\r\n    try {\r\n        const storage = self.localStorage;\r\n        const key = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._generateEventId();\r\n        if (storage) {\r\n            // setItem will throw an exception if we cannot access WebStorage (e.g.,\r\n            // Safari in private mode).\r\n            storage['setItem'](key, '1');\r\n            storage['removeItem'](key);\r\n            // For browsers where iframe web storage does not synchronize with a popup\r\n            // of the same domain, indexedDB is used for persistent storage. These\r\n            // browsers include IE11 and Edge.\r\n            // Make sure it is supported (IE11 and Edge private mode does not support\r\n            // that).\r\n            if (_isLocalStorageNotSynchronized()) {\r\n                // In such browsers, if indexedDB is not supported, an iframe cannot be\r\n                // notified of the popup sign in result.\r\n                return (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isIndexedDBAvailable)();\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n    catch (e) {\r\n        // localStorage is not available from a worker. Test availability of\r\n        // indexedDB.\r\n        return _isWorker() && (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isIndexedDBAvailable)();\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * @param {?Object=} global The optional global scope.\r\n * @return {boolean} Whether current environment is a worker.\r\n */\r\nfunction _isWorker() {\r\n    // WorkerGlobalScope only defined in worker environment.\r\n    return (typeof __webpack_require__.g !== 'undefined' &&\r\n        'WorkerGlobalScope' in __webpack_require__.g &&\r\n        'importScripts' in __webpack_require__.g);\r\n}\r\nfunction _isPopupRedirectSupported() {\r\n    return ((_isHttpOrHttps() ||\r\n        (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isBrowserExtension)() ||\r\n        _isAndroidOrIosCordovaScheme()) &&\r\n        // React Native with remote debugging reports its location.protocol as\r\n        // http.\r\n        !_isNativeEnvironment() &&\r\n        // Local storage has to be supported for browser popup and redirect\r\n        // operations to work.\r\n        _isWebStorageSupported() &&\r\n        // DOM, popups and redirects are not supported within a worker.\r\n        !_isWorker());\r\n}\r\n/** Quick check that indicates the platform *may* be Cordova */\r\nfunction _isLikelyCordova() {\r\n    return _isAndroidOrIosCordovaScheme() && typeof document !== 'undefined';\r\n}\r\nasync function _isCordova() {\r\n    if (!_isLikelyCordova()) {\r\n        return false;\r\n    }\r\n    return new Promise(resolve => {\r\n        const timeoutId = setTimeout(() => {\r\n            // We've waited long enough; the telltale Cordova event didn't happen\r\n            resolve(false);\r\n        }, CORDOVA_ONDEVICEREADY_TIMEOUT_MS);\r\n        document.addEventListener('deviceready', () => {\r\n            clearTimeout(timeoutId);\r\n            resolve(true);\r\n        });\r\n    });\r\n}\r\nfunction _getSelfWindow() {\r\n    return typeof window !== 'undefined' ? window : null;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst Persistence = {\r\n    LOCAL: 'local',\r\n    NONE: 'none',\r\n    SESSION: 'session'\r\n};\r\nconst _assert$3 = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._assert;\r\nconst PERSISTENCE_KEY = 'persistence';\r\n/**\r\n * Validates that an argument is a valid persistence value. If an invalid type\r\n * is specified, an error is thrown synchronously.\r\n */\r\nfunction _validatePersistenceArgument(auth, persistence) {\r\n    _assert$3(Object.values(Persistence).includes(persistence), auth, \"invalid-persistence-type\" /* INVALID_PERSISTENCE */);\r\n    // Validate if the specified type is supported in the current environment.\r\n    if ((0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isReactNative)()) {\r\n        // This is only supported in a browser.\r\n        _assert$3(persistence !== Persistence.SESSION, auth, \"unsupported-persistence-type\" /* UNSUPPORTED_PERSISTENCE */);\r\n        return;\r\n    }\r\n    if ((0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isNode)()) {\r\n        // Only none is supported in Node.js.\r\n        _assert$3(persistence === Persistence.NONE, auth, \"unsupported-persistence-type\" /* UNSUPPORTED_PERSISTENCE */);\r\n        return;\r\n    }\r\n    if (_isWorker()) {\r\n        // In a worker environment, either LOCAL or NONE are supported.\r\n        // If indexedDB not supported and LOCAL provided, throw an error\r\n        _assert$3(persistence === Persistence.NONE ||\r\n            (persistence === Persistence.LOCAL && (0,_firebase_util__WEBPACK_IMPORTED_MODULE_3__.isIndexedDBAvailable)()), auth, \"unsupported-persistence-type\" /* UNSUPPORTED_PERSISTENCE */);\r\n        return;\r\n    }\r\n    // This is restricted by what the browser supports.\r\n    _assert$3(persistence === Persistence.NONE || _isWebStorageSupported(), auth, \"unsupported-persistence-type\" /* UNSUPPORTED_PERSISTENCE */);\r\n}\r\nasync function _savePersistenceForRedirect(auth) {\r\n    await auth._initializationPromise;\r\n    const session = getSessionStorageIfAvailable();\r\n    const key = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._persistenceKeyName(PERSISTENCE_KEY, auth.config.apiKey, auth.name);\r\n    if (session) {\r\n        session.setItem(key, auth._getPersistence());\r\n    }\r\n}\r\nfunction _getPersistencesFromRedirect(apiKey, appName) {\r\n    const session = getSessionStorageIfAvailable();\r\n    if (!session) {\r\n        return [];\r\n    }\r\n    const key = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._persistenceKeyName(PERSISTENCE_KEY, apiKey, appName);\r\n    const persistence = session.getItem(key);\r\n    switch (persistence) {\r\n        case Persistence.NONE:\r\n            return [_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.inMemoryPersistence];\r\n        case Persistence.LOCAL:\r\n            return [_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.indexedDBLocalPersistence, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.browserSessionPersistence];\r\n        case Persistence.SESSION:\r\n            return [_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.browserSessionPersistence];\r\n        default:\r\n            return [];\r\n    }\r\n}\r\n/** Returns session storage, or null if the property access errors */\r\nfunction getSessionStorageIfAvailable() {\r\n    var _a;\r\n    try {\r\n        return ((_a = _getSelfWindow()) === null || _a === void 0 ? void 0 : _a.sessionStorage) || null;\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst _assert$2 = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._assert;\r\n/** Platform-agnostic popup-redirect resolver */\r\nclass CompatPopupRedirectResolver {\r\n    constructor() {\r\n        // Create both resolvers for dynamic resolution later\r\n        this.browserResolver = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._getInstance(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.browserPopupRedirectResolver);\r\n        this.cordovaResolver = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._getInstance(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.cordovaPopupRedirectResolver);\r\n        // The actual resolver in use: either browserResolver or cordovaResolver.\r\n        this.underlyingResolver = null;\r\n        this._redirectPersistence = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.browserSessionPersistence;\r\n        this._completeRedirectFn = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._getRedirectResult;\r\n        this._overrideRedirectResult = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._overrideRedirectResult;\r\n    }\r\n    async _initialize(auth) {\r\n        await this.selectUnderlyingResolver();\r\n        return this.assertedUnderlyingResolver._initialize(auth);\r\n    }\r\n    async _openPopup(auth, provider, authType, eventId) {\r\n        await this.selectUnderlyingResolver();\r\n        return this.assertedUnderlyingResolver._openPopup(auth, provider, authType, eventId);\r\n    }\r\n    async _openRedirect(auth, provider, authType, eventId) {\r\n        await this.selectUnderlyingResolver();\r\n        return this.assertedUnderlyingResolver._openRedirect(auth, provider, authType, eventId);\r\n    }\r\n    _isIframeWebStorageSupported(auth, cb) {\r\n        this.assertedUnderlyingResolver._isIframeWebStorageSupported(auth, cb);\r\n    }\r\n    _originValidation(auth) {\r\n        return this.assertedUnderlyingResolver._originValidation(auth);\r\n    }\r\n    get _shouldInitProactively() {\r\n        return _isLikelyCordova() || this.browserResolver._shouldInitProactively;\r\n    }\r\n    get assertedUnderlyingResolver() {\r\n        _assert$2(this.underlyingResolver, \"internal-error\" /* INTERNAL_ERROR */);\r\n        return this.underlyingResolver;\r\n    }\r\n    async selectUnderlyingResolver() {\r\n        if (this.underlyingResolver) {\r\n            return;\r\n        }\r\n        // We haven't yet determined whether or not we're in Cordova; go ahead\r\n        // and determine that state now.\r\n        const isCordova = await _isCordova();\r\n        this.underlyingResolver = isCordova\r\n            ? this.cordovaResolver\r\n            : this.browserResolver;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction unwrap(object) {\r\n    return object.unwrap();\r\n}\r\nfunction wrapped(object) {\r\n    return object.wrapped();\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction credentialFromResponse(userCredential) {\r\n    return credentialFromObject(userCredential);\r\n}\r\nfunction attachExtraErrorFields(auth, e) {\r\n    var _a, _b;\r\n    // The response contains all fields from the server which may or may not\r\n    // actually match the underlying type\r\n    const response = (_a = e.customData) === null || _a === void 0 ? void 0 : _a._tokenResponse;\r\n    if (((_b = e) === null || _b === void 0 ? void 0 : _b.code) === 'auth/multi-factor-auth-required') {\r\n        const mfaErr = e;\r\n        mfaErr.resolver = new MultiFactorResolver(auth, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.getMultiFactorResolver(auth, e));\r\n    }\r\n    else if (response) {\r\n        const credential = credentialFromObject(e);\r\n        const credErr = e;\r\n        if (credential) {\r\n            credErr.credential = credential;\r\n            credErr.tenantId = response.tenantId || undefined;\r\n            credErr.email = response.email || undefined;\r\n            credErr.phoneNumber = response.phoneNumber || undefined;\r\n        }\r\n    }\r\n}\r\nfunction credentialFromObject(object) {\r\n    const { _tokenResponse } = (object instanceof _firebase_util__WEBPACK_IMPORTED_MODULE_3__.FirebaseError ? object.customData : object);\r\n    if (!_tokenResponse) {\r\n        return null;\r\n    }\r\n    // Handle phone Auth credential responses, as they have a different format\r\n    // from other backend responses (i.e. no providerId). This is also only the\r\n    // case for user credentials (does not work for errors).\r\n    if (!(object instanceof _firebase_util__WEBPACK_IMPORTED_MODULE_3__.FirebaseError)) {\r\n        if ('temporaryProof' in _tokenResponse && 'phoneNumber' in _tokenResponse) {\r\n            return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.PhoneAuthProvider.credentialFromResult(object);\r\n        }\r\n    }\r\n    const providerId = _tokenResponse.providerId;\r\n    // Email and password is not supported as there is no situation where the\r\n    // server would return the password to the client.\r\n    if (!providerId || providerId === _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ProviderId.PASSWORD) {\r\n        return null;\r\n    }\r\n    let provider;\r\n    switch (providerId) {\r\n        case _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ProviderId.GOOGLE:\r\n            provider = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.GoogleAuthProvider;\r\n            break;\r\n        case _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ProviderId.FACEBOOK:\r\n            provider = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.FacebookAuthProvider;\r\n            break;\r\n        case _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ProviderId.GITHUB:\r\n            provider = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.GithubAuthProvider;\r\n            break;\r\n        case _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ProviderId.TWITTER:\r\n            provider = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.TwitterAuthProvider;\r\n            break;\r\n        default:\r\n            const { oauthIdToken, oauthAccessToken, oauthTokenSecret, pendingToken, nonce } = _tokenResponse;\r\n            if (!oauthAccessToken &&\r\n                !oauthTokenSecret &&\r\n                !oauthIdToken &&\r\n                !pendingToken) {\r\n                return null;\r\n            }\r\n            // TODO(avolkovi): uncomment this and get it working with SAML & OIDC\r\n            if (pendingToken) {\r\n                if (providerId.startsWith('saml.')) {\r\n                    return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.SAMLAuthCredential._create(providerId, pendingToken);\r\n                }\r\n                else {\r\n                    // OIDC and non-default providers excluding Twitter.\r\n                    return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.OAuthCredential._fromParams({\r\n                        providerId,\r\n                        signInMethod: providerId,\r\n                        pendingToken,\r\n                        idToken: oauthIdToken,\r\n                        accessToken: oauthAccessToken\r\n                    });\r\n                }\r\n            }\r\n            return new _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.OAuthProvider(providerId).credential({\r\n                idToken: oauthIdToken,\r\n                accessToken: oauthAccessToken,\r\n                rawNonce: nonce\r\n            });\r\n    }\r\n    return object instanceof _firebase_util__WEBPACK_IMPORTED_MODULE_3__.FirebaseError\r\n        ? provider.credentialFromError(object)\r\n        : provider.credentialFromResult(object);\r\n}\r\nfunction convertCredential(auth, credentialPromise) {\r\n    return credentialPromise\r\n        .catch(e => {\r\n        if (e instanceof _firebase_util__WEBPACK_IMPORTED_MODULE_3__.FirebaseError) {\r\n            attachExtraErrorFields(auth, e);\r\n        }\r\n        throw e;\r\n    })\r\n        .then(credential => {\r\n        const operationType = credential.operationType;\r\n        const user = credential.user;\r\n        return {\r\n            operationType,\r\n            credential: credentialFromResponse(credential),\r\n            additionalUserInfo: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.getAdditionalUserInfo(credential),\r\n            user: User.getOrCreate(user)\r\n        };\r\n    });\r\n}\r\nasync function convertConfirmationResult(auth, confirmationResultPromise) {\r\n    const confirmationResultExp = await confirmationResultPromise;\r\n    return {\r\n        verificationId: confirmationResultExp.verificationId,\r\n        confirm: (verificationCode) => convertCredential(auth, confirmationResultExp.confirm(verificationCode))\r\n    };\r\n}\r\nclass MultiFactorResolver {\r\n    constructor(auth, resolver) {\r\n        this.resolver = resolver;\r\n        this.auth = wrapped(auth);\r\n    }\r\n    get session() {\r\n        return this.resolver.session;\r\n    }\r\n    get hints() {\r\n        return this.resolver.hints;\r\n    }\r\n    resolveSignIn(assertion) {\r\n        return convertCredential(unwrap(this.auth), this.resolver.resolveSignIn(assertion));\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass User {\r\n    constructor(_delegate) {\r\n        this._delegate = _delegate;\r\n        this.multiFactor = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.multiFactor(_delegate);\r\n    }\r\n    static getOrCreate(user) {\r\n        if (!User.USER_MAP.has(user)) {\r\n            User.USER_MAP.set(user, new User(user));\r\n        }\r\n        return User.USER_MAP.get(user);\r\n    }\r\n    delete() {\r\n        return this._delegate.delete();\r\n    }\r\n    reload() {\r\n        return this._delegate.reload();\r\n    }\r\n    toJSON() {\r\n        return this._delegate.toJSON();\r\n    }\r\n    getIdTokenResult(forceRefresh) {\r\n        return this._delegate.getIdTokenResult(forceRefresh);\r\n    }\r\n    getIdToken(forceRefresh) {\r\n        return this._delegate.getIdToken(forceRefresh);\r\n    }\r\n    linkAndRetrieveDataWithCredential(credential) {\r\n        return this.linkWithCredential(credential);\r\n    }\r\n    async linkWithCredential(credential) {\r\n        return convertCredential(this.auth, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.linkWithCredential(this._delegate, credential));\r\n    }\r\n    async linkWithPhoneNumber(phoneNumber, applicationVerifier) {\r\n        return convertConfirmationResult(this.auth, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.linkWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\r\n    }\r\n    async linkWithPopup(provider) {\r\n        return convertCredential(this.auth, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.linkWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\r\n    }\r\n    async linkWithRedirect(provider) {\r\n        await _savePersistenceForRedirect(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._castAuth(this.auth));\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.linkWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\r\n    }\r\n    reauthenticateAndRetrieveDataWithCredential(credential) {\r\n        return this.reauthenticateWithCredential(credential);\r\n    }\r\n    async reauthenticateWithCredential(credential) {\r\n        return convertCredential(this.auth, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.reauthenticateWithCredential(this._delegate, credential));\r\n    }\r\n    reauthenticateWithPhoneNumber(phoneNumber, applicationVerifier) {\r\n        return convertConfirmationResult(this.auth, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.reauthenticateWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\r\n    }\r\n    reauthenticateWithPopup(provider) {\r\n        return convertCredential(this.auth, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.reauthenticateWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\r\n    }\r\n    async reauthenticateWithRedirect(provider) {\r\n        await _savePersistenceForRedirect(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._castAuth(this.auth));\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.reauthenticateWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\r\n    }\r\n    sendEmailVerification(actionCodeSettings) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.sendEmailVerification(this._delegate, actionCodeSettings);\r\n    }\r\n    async unlink(providerId) {\r\n        await _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.unlink(this._delegate, providerId);\r\n        return this;\r\n    }\r\n    updateEmail(newEmail) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.updateEmail(this._delegate, newEmail);\r\n    }\r\n    updatePassword(newPassword) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.updatePassword(this._delegate, newPassword);\r\n    }\r\n    updatePhoneNumber(phoneCredential) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.updatePhoneNumber(this._delegate, phoneCredential);\r\n    }\r\n    updateProfile(profile) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.updateProfile(this._delegate, profile);\r\n    }\r\n    verifyBeforeUpdateEmail(newEmail, actionCodeSettings) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.verifyBeforeUpdateEmail(this._delegate, newEmail, actionCodeSettings);\r\n    }\r\n    get emailVerified() {\r\n        return this._delegate.emailVerified;\r\n    }\r\n    get isAnonymous() {\r\n        return this._delegate.isAnonymous;\r\n    }\r\n    get metadata() {\r\n        return this._delegate.metadata;\r\n    }\r\n    get phoneNumber() {\r\n        return this._delegate.phoneNumber;\r\n    }\r\n    get providerData() {\r\n        return this._delegate.providerData;\r\n    }\r\n    get refreshToken() {\r\n        return this._delegate.refreshToken;\r\n    }\r\n    get tenantId() {\r\n        return this._delegate.tenantId;\r\n    }\r\n    get displayName() {\r\n        return this._delegate.displayName;\r\n    }\r\n    get email() {\r\n        return this._delegate.email;\r\n    }\r\n    get photoURL() {\r\n        return this._delegate.photoURL;\r\n    }\r\n    get providerId() {\r\n        return this._delegate.providerId;\r\n    }\r\n    get uid() {\r\n        return this._delegate.uid;\r\n    }\r\n    get auth() {\r\n        return this._delegate.auth;\r\n    }\r\n}\r\n// Maintain a map so that there's always a 1:1 mapping between new User and\r\n// legacy compat users\r\nUser.USER_MAP = new WeakMap();\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst _assert$1 = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._assert;\r\nclass Auth {\r\n    constructor(app, provider) {\r\n        this.app = app;\r\n        if (provider.isInitialized()) {\r\n            this._delegate = provider.getImmediate();\r\n            this.linkUnderlyingAuth();\r\n            return;\r\n        }\r\n        const { apiKey } = app.options;\r\n        // TODO: platform needs to be determined using heuristics\r\n        _assert$1(apiKey, \"invalid-api-key\" /* INVALID_API_KEY */, {\r\n            appName: app.name\r\n        });\r\n        // TODO: platform needs to be determined using heuristics\r\n        _assert$1(apiKey, \"invalid-api-key\" /* INVALID_API_KEY */, {\r\n            appName: app.name\r\n        });\r\n        // Only use a popup/redirect resolver in browser environments\r\n        const resolver = typeof window !== 'undefined' ? CompatPopupRedirectResolver : undefined;\r\n        this._delegate = provider.initialize({\r\n            options: {\r\n                persistence: buildPersistenceHierarchy(apiKey, app.name),\r\n                popupRedirectResolver: resolver\r\n            }\r\n        });\r\n        this._delegate._updateErrorMap(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.debugErrorMap);\r\n        this.linkUnderlyingAuth();\r\n    }\r\n    get emulatorConfig() {\r\n        return this._delegate.emulatorConfig;\r\n    }\r\n    get currentUser() {\r\n        if (!this._delegate.currentUser) {\r\n            return null;\r\n        }\r\n        return User.getOrCreate(this._delegate.currentUser);\r\n    }\r\n    get languageCode() {\r\n        return this._delegate.languageCode;\r\n    }\r\n    set languageCode(languageCode) {\r\n        this._delegate.languageCode = languageCode;\r\n    }\r\n    get settings() {\r\n        return this._delegate.settings;\r\n    }\r\n    get tenantId() {\r\n        return this._delegate.tenantId;\r\n    }\r\n    set tenantId(tid) {\r\n        this._delegate.tenantId = tid;\r\n    }\r\n    useDeviceLanguage() {\r\n        this._delegate.useDeviceLanguage();\r\n    }\r\n    signOut() {\r\n        return this._delegate.signOut();\r\n    }\r\n    useEmulator(url, options) {\r\n        _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.connectAuthEmulator(this._delegate, url, options);\r\n    }\r\n    applyActionCode(code) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.applyActionCode(this._delegate, code);\r\n    }\r\n    checkActionCode(code) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.checkActionCode(this._delegate, code);\r\n    }\r\n    confirmPasswordReset(code, newPassword) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.confirmPasswordReset(this._delegate, code, newPassword);\r\n    }\r\n    async createUserWithEmailAndPassword(email, password) {\r\n        return convertCredential(this._delegate, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.createUserWithEmailAndPassword(this._delegate, email, password));\r\n    }\r\n    fetchProvidersForEmail(email) {\r\n        return this.fetchSignInMethodsForEmail(email);\r\n    }\r\n    fetchSignInMethodsForEmail(email) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.fetchSignInMethodsForEmail(this._delegate, email);\r\n    }\r\n    isSignInWithEmailLink(emailLink) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.isSignInWithEmailLink(this._delegate, emailLink);\r\n    }\r\n    async getRedirectResult() {\r\n        _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\" /* OPERATION_NOT_SUPPORTED */);\r\n        const credential = await _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.getRedirectResult(this._delegate, CompatPopupRedirectResolver);\r\n        if (!credential) {\r\n            return {\r\n                credential: null,\r\n                user: null\r\n            };\r\n        }\r\n        return convertCredential(this._delegate, Promise.resolve(credential));\r\n    }\r\n    // This function should only be called by frameworks (e.g. FirebaseUI-web) to log their usage.\r\n    // It is not intended for direct use by developer apps. NO jsdoc here to intentionally leave it\r\n    // out of autogenerated documentation pages to reduce accidental misuse.\r\n    addFrameworkForLogging(framework) {\r\n        _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.addFrameworkForLogging(this._delegate, framework);\r\n    }\r\n    onAuthStateChanged(nextOrObserver, errorFn, completed) {\r\n        const { next, error, complete } = wrapObservers(nextOrObserver, errorFn, completed);\r\n        return this._delegate.onAuthStateChanged(next, error, complete);\r\n    }\r\n    onIdTokenChanged(nextOrObserver, errorFn, completed) {\r\n        const { next, error, complete } = wrapObservers(nextOrObserver, errorFn, completed);\r\n        return this._delegate.onIdTokenChanged(next, error, complete);\r\n    }\r\n    sendSignInLinkToEmail(email, actionCodeSettings) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.sendSignInLinkToEmail(this._delegate, email, actionCodeSettings);\r\n    }\r\n    sendPasswordResetEmail(email, actionCodeSettings) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.sendPasswordResetEmail(this._delegate, email, actionCodeSettings || undefined);\r\n    }\r\n    async setPersistence(persistence) {\r\n        _validatePersistenceArgument(this._delegate, persistence);\r\n        let converted;\r\n        switch (persistence) {\r\n            case Persistence.SESSION:\r\n                converted = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.browserSessionPersistence;\r\n                break;\r\n            case Persistence.LOCAL:\r\n                // Not using isIndexedDBAvailable() since it only checks if indexedDB is defined.\r\n                const isIndexedDBFullySupported = await _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._getInstance(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.indexedDBLocalPersistence)\r\n                    ._isAvailable();\r\n                converted = isIndexedDBFullySupported\r\n                    ? _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.indexedDBLocalPersistence\r\n                    : _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.browserLocalPersistence;\r\n                break;\r\n            case Persistence.NONE:\r\n                converted = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.inMemoryPersistence;\r\n                break;\r\n            default:\r\n                return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._fail(\"argument-error\" /* ARGUMENT_ERROR */, {\r\n                    appName: this._delegate.name\r\n                });\r\n        }\r\n        return this._delegate.setPersistence(converted);\r\n    }\r\n    signInAndRetrieveDataWithCredential(credential) {\r\n        return this.signInWithCredential(credential);\r\n    }\r\n    signInAnonymously() {\r\n        return convertCredential(this._delegate, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.signInAnonymously(this._delegate));\r\n    }\r\n    signInWithCredential(credential) {\r\n        return convertCredential(this._delegate, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.signInWithCredential(this._delegate, credential));\r\n    }\r\n    signInWithCustomToken(token) {\r\n        return convertCredential(this._delegate, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.signInWithCustomToken(this._delegate, token));\r\n    }\r\n    signInWithEmailAndPassword(email, password) {\r\n        return convertCredential(this._delegate, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.signInWithEmailAndPassword(this._delegate, email, password));\r\n    }\r\n    signInWithEmailLink(email, emailLink) {\r\n        return convertCredential(this._delegate, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.signInWithEmailLink(this._delegate, email, emailLink));\r\n    }\r\n    signInWithPhoneNumber(phoneNumber, applicationVerifier) {\r\n        return convertConfirmationResult(this._delegate, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.signInWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\r\n    }\r\n    async signInWithPopup(provider) {\r\n        _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\" /* OPERATION_NOT_SUPPORTED */);\r\n        return convertCredential(this._delegate, _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.signInWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\r\n    }\r\n    async signInWithRedirect(provider) {\r\n        _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\" /* OPERATION_NOT_SUPPORTED */);\r\n        await _savePersistenceForRedirect(this._delegate);\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.signInWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\r\n    }\r\n    updateCurrentUser(user) {\r\n        // remove ts-ignore once overloads are defined for exp functions to accept compat objects\r\n        // @ts-ignore\r\n        return this._delegate.updateCurrentUser(user);\r\n    }\r\n    verifyPasswordResetCode(code) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.verifyPasswordResetCode(this._delegate, code);\r\n    }\r\n    unwrap() {\r\n        return this._delegate;\r\n    }\r\n    _delete() {\r\n        return this._delegate._delete();\r\n    }\r\n    linkUnderlyingAuth() {\r\n        this._delegate.wrapped = () => this;\r\n    }\r\n}\r\nAuth.Persistence = Persistence;\r\nfunction wrapObservers(nextOrObserver, error, complete) {\r\n    let next = nextOrObserver;\r\n    if (typeof nextOrObserver !== 'function') {\r\n        ({ next, error, complete } = nextOrObserver);\r\n    }\r\n    // We know 'next' is now a function\r\n    const oldNext = next;\r\n    const newNext = (user) => oldNext(user && User.getOrCreate(user));\r\n    return {\r\n        next: newNext,\r\n        error: error,\r\n        complete\r\n    };\r\n}\r\nfunction buildPersistenceHierarchy(apiKey, appName) {\r\n    // Note this is slightly different behavior: in this case, the stored\r\n    // persistence is checked *first* rather than last. This is because we want\r\n    // to prefer stored persistence type in the hierarchy. This is an empty\r\n    // array if window is not available or there is no pending redirect\r\n    const persistences = _getPersistencesFromRedirect(apiKey, appName);\r\n    // If \"self\" is available, add indexedDB\r\n    if (typeof self !== 'undefined' &&\r\n        !persistences.includes(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.indexedDBLocalPersistence)) {\r\n        persistences.push(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.indexedDBLocalPersistence);\r\n    }\r\n    // If \"window\" is available, add HTML Storage persistences\r\n    if (typeof window !== 'undefined') {\r\n        for (const persistence of [\r\n            _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.browserLocalPersistence,\r\n            _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.browserSessionPersistence\r\n        ]) {\r\n            if (!persistences.includes(persistence)) {\r\n                persistences.push(persistence);\r\n            }\r\n        }\r\n    }\r\n    // Add in-memory as a final fallback\r\n    if (!persistences.includes(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.inMemoryPersistence)) {\r\n        persistences.push(_firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.inMemoryPersistence);\r\n    }\r\n    return persistences;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass PhoneAuthProvider {\r\n    constructor() {\r\n        this.providerId = 'phone';\r\n        // TODO: remove ts-ignore when moving types from auth-types to auth-compat\r\n        // @ts-ignore\r\n        this._delegate = new _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.PhoneAuthProvider(unwrap(_firebase_app_compat__WEBPACK_IMPORTED_MODULE_0__[\"default\"].auth()));\r\n    }\r\n    static credential(verificationId, verificationCode) {\r\n        return _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.PhoneAuthProvider.credential(verificationId, verificationCode);\r\n    }\r\n    verifyPhoneNumber(phoneInfoOptions, applicationVerifier) {\r\n        return this._delegate.verifyPhoneNumber(\r\n        // The implementation matches but the types are subtly incompatible\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        phoneInfoOptions, applicationVerifier);\r\n    }\r\n    unwrap() {\r\n        return this._delegate;\r\n    }\r\n}\r\nPhoneAuthProvider.PHONE_SIGN_IN_METHOD = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.PhoneAuthProvider.PHONE_SIGN_IN_METHOD;\r\nPhoneAuthProvider.PROVIDER_ID = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.PhoneAuthProvider.PROVIDER_ID;\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst _assert = _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__._assert;\r\nclass RecaptchaVerifier {\r\n    constructor(container, parameters, app = _firebase_app_compat__WEBPACK_IMPORTED_MODULE_0__[\"default\"].app()) {\r\n        var _a;\r\n        // API key is required for web client RPC calls.\r\n        _assert((_a = app.options) === null || _a === void 0 ? void 0 : _a.apiKey, \"invalid-api-key\" /* INVALID_API_KEY */, {\r\n            appName: app.name\r\n        });\r\n        this._delegate = new _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.RecaptchaVerifier(container, \r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        parameters, \r\n        // TODO: remove ts-ignore when moving types from auth-types to auth-compat\r\n        // @ts-ignore\r\n        app.auth());\r\n        this.type = this._delegate.type;\r\n    }\r\n    clear() {\r\n        this._delegate.clear();\r\n    }\r\n    render() {\r\n        return this._delegate.render();\r\n    }\r\n    verify() {\r\n        return this._delegate.verify();\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst AUTH_TYPE = 'auth-compat';\r\n// Create auth components to register with firebase.\r\n// Provides Auth public APIs.\r\nfunction registerAuthCompat(instance) {\r\n    instance.INTERNAL.registerComponent(new _firebase_component__WEBPACK_IMPORTED_MODULE_2__.Component(AUTH_TYPE, container => {\r\n        // getImmediate for FirebaseApp will always succeed\r\n        const app = container.getProvider('app-compat').getImmediate();\r\n        const authProvider = container.getProvider('auth');\r\n        return new Auth(app, authProvider);\r\n    }, \"PUBLIC\" /* PUBLIC */)\r\n        .setServiceProps({\r\n        ActionCodeInfo: {\r\n            Operation: {\r\n                EMAIL_SIGNIN: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ActionCodeOperation.EMAIL_SIGNIN,\r\n                PASSWORD_RESET: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ActionCodeOperation.PASSWORD_RESET,\r\n                RECOVER_EMAIL: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ActionCodeOperation.RECOVER_EMAIL,\r\n                REVERT_SECOND_FACTOR_ADDITION: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ActionCodeOperation.REVERT_SECOND_FACTOR_ADDITION,\r\n                VERIFY_AND_CHANGE_EMAIL: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ActionCodeOperation.VERIFY_AND_CHANGE_EMAIL,\r\n                VERIFY_EMAIL: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.ActionCodeOperation.VERIFY_EMAIL\r\n            }\r\n        },\r\n        EmailAuthProvider: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.EmailAuthProvider,\r\n        FacebookAuthProvider: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.FacebookAuthProvider,\r\n        GithubAuthProvider: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.GithubAuthProvider,\r\n        GoogleAuthProvider: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.GoogleAuthProvider,\r\n        OAuthProvider: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.OAuthProvider,\r\n        SAMLAuthProvider: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.SAMLAuthProvider,\r\n        PhoneAuthProvider: PhoneAuthProvider,\r\n        PhoneMultiFactorGenerator: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.PhoneMultiFactorGenerator,\r\n        RecaptchaVerifier: RecaptchaVerifier,\r\n        TwitterAuthProvider: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.TwitterAuthProvider,\r\n        Auth,\r\n        AuthCredential: _firebase_auth_internal__WEBPACK_IMPORTED_MODULE_1__.AuthCredential,\r\n        Error: _firebase_util__WEBPACK_IMPORTED_MODULE_3__.FirebaseError\r\n    })\r\n        .setInstantiationMode(\"LAZY\" /* LAZY */)\r\n        .setMultipleInstances(false));\r\n    instance.registerVersion(name, version);\r\n}\r\nregisterAuthCompat(_firebase_app_compat__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n//# sourceMappingURL=index.esm2017.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2F1dGgtY29tcGF0L2Rpc3QvaW5kZXguZXNtMjAxNy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE0QztBQUNHO0FBQ0M7QUFDNkU7O0FBRTdIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsVUFBVTtBQUNyQixZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBLDJDQUEyQyxxREFBSztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0EsV0FBVyw2REFBYSxNQUFNLHNEQUFNO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0EsV0FBVyxvREFBSTtBQUNmO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixZQUFZLFNBQVM7QUFDckI7QUFDQSxzQkFBc0IscURBQUs7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLFlBQVksU0FBUztBQUNyQjtBQUNBO0FBQ0EsNkNBQTZDLHFEQUFLO0FBQ2xEO0FBQ0E7QUFDQSxhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHFFQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixvRUFBb0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsb0VBQW9CO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCLFlBQVksU0FBUztBQUNyQjtB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QUFDM0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hdXRoLWNvbXBhdC9kaXN0L2luZGV4LmVzbTIwMTcuanM/NDFjZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZmlyZWJhc2UgZnJvbSAnQGZpcmViYXNlL2FwcC1jb21wYXQnO1xuaW1wb3J0ICogYXMgZXhwIGZyb20gJ0BmaXJlYmFzZS9hdXRoL2ludGVybmFsJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgaXNCcm93c2VyRXh0ZW5zaW9uLCBpc1JlYWN0TmF0aXZlLCBpc05vZGUsIGdldFVBLCBpc0lFLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxudmFyIG5hbWUgPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xudmFyIHZlcnNpb24gPSBcIjAuMi4xOFwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBDT1JET1ZBX09OREVWSUNFUkVBRFlfVElNRU9VVF9NUyA9IDEwMDA7XHJcbmZ1bmN0aW9uIF9nZXRDdXJyZW50U2NoZW1lKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuICgoX2EgPSBzZWxmID09PSBudWxsIHx8IHNlbGYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlbGYubG9jYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wcm90b2NvbCkgfHwgbnVsbDtcclxufVxyXG4vKipcclxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgY3VycmVudCBlbnZpcm9ubWVudCBpcyBodHRwIG9yIGh0dHBzLlxyXG4gKi9cclxuZnVuY3Rpb24gX2lzSHR0cE9ySHR0cHMoKSB7XHJcbiAgICByZXR1cm4gX2dldEN1cnJlbnRTY2hlbWUoKSA9PT0gJ2h0dHA6JyB8fCBfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnaHR0cHM6JztcclxufVxyXG4vKipcclxuICogQHBhcmFtIHs/c3RyaW5nPX0gdWEgVGhlIHVzZXIgYWdlbnQuXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGFwcCBpcyByZW5kZXJlZCBpbiBhIG1vYmlsZSBpT1Mgb3IgQW5kcm9pZFxyXG4gKiAgICAgQ29yZG92YSBlbnZpcm9ubWVudC5cclxuICovXHJcbmZ1bmN0aW9uIF9pc0FuZHJvaWRPcklvc0NvcmRvdmFTY2hlbWUodWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gISEoKF9nZXRDdXJyZW50U2NoZW1lKCkgPT09ICdmaWxlOicgfHxcclxuICAgICAgICBfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnaW9uaWM6JyB8fFxyXG4gICAgICAgIF9nZXRDdXJyZW50U2NoZW1lKCkgPT09ICdjYXBhY2l0b3I6JykgJiZcclxuICAgICAgICB1YS50b0xvd2VyQ2FzZSgpLm1hdGNoKC9pcGhvbmV8aXBhZHxpcG9kfGFuZHJvaWQvKSk7XHJcbn1cclxuLyoqXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGVudmlyb25tZW50IGlzIGEgbmF0aXZlIGVudmlyb25tZW50LCB3aGVyZVxyXG4gKiAgICAgQ09SUyBjaGVja3MgZG8gbm90IGFwcGx5LlxyXG4gKi9cclxuZnVuY3Rpb24gX2lzTmF0aXZlRW52aXJvbm1lbnQoKSB7XHJcbiAgICByZXR1cm4gaXNSZWFjdE5hdGl2ZSgpIHx8IGlzTm9kZSgpO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgdXNlciBhZ2VudCBpcyBJRTExLlxyXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGl0IGlzIElFMTEuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNJZTExKCkge1xyXG4gICAgcmV0dXJuIGlzSUUoKSAmJiAoZG9jdW1lbnQgPT09IG51bGwgfHwgZG9jdW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRvY3VtZW50LmRvY3VtZW50TW9kZSkgPT09IDExO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgdXNlciBhZ2VudCBpcyBFZGdlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdXNlckFnZW50IFRoZSBicm93c2VyIHVzZXIgYWdlbnQgc3RyaW5nLlxyXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGl0IGlzIEVkZ2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNFZGdlKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9FZGdlXFwvXFxkKy8udGVzdCh1YSk7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSB7P3N0cmluZz19IG9wdF91c2VyQWdlbnQgVGhlIG5hdmlnYXRvciB1c2VyIGFnZW50LlxyXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIGxvY2FsIHN0b3JhZ2UgaXMgbm90IHN5bmNocm9uaXplZCBiZXR3ZWVuIGFuIGlmcmFtZVxyXG4gKiAgICAgYW5kIGEgcG9wdXAgb2YgdGhlIHNhbWUgZG9tYWluLlxyXG4gKi9cclxuZnVuY3Rpb24gX2lzTG9jYWxTdG9yYWdlTm90U3luY2hyb25pemVkKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIF9pc0llMTEoKSB8fCBfaXNFZGdlKHVhKTtcclxufVxyXG4vKiogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB3ZWIgc3RvcmFnZSBpcyBzdXBwb3J0ZWQuICovXHJcbmZ1bmN0aW9uIF9pc1dlYlN0b3JhZ2VTdXBwb3J0ZWQoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHN0b3JhZ2UgPSBzZWxmLmxvY2FsU3RvcmFnZTtcclxuICAgICAgICBjb25zdCBrZXkgPSBleHAuX2dlbmVyYXRlRXZlbnRJZCgpO1xyXG4gICAgICAgIGlmIChzdG9yYWdlKSB7XHJcbiAgICAgICAgICAgIC8vIHNldEl0ZW0gd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgd2UgY2Fubm90IGFjY2VzcyBXZWJTdG9yYWdlIChlLmcuLFxyXG4gICAgICAgICAgICAvLyBTYWZhcmkgaW4gcHJpdmF0ZSBtb2RlKS5cclxuICAgICAgICAgICAgc3RvcmFnZVsnc2V0SXRlbSddKGtleSwgJzEnKTtcclxuICAgICAgICAgICAgc3RvcmFnZVsncmVtb3ZlSXRlbSddKGtleSk7XHJcbiAgICAgICAgICAgIC8vIEZvciBicm93c2VycyB3aGVyZSBpZnJhbWUgd2ViIHN0b3JhZ2UgZG9lcyBub3Qgc3luY2hyb25pemUgd2l0aCBhIHBvcHVwXHJcbiAgICAgICAgICAgIC8vIG9mIHRoZSBzYW1lIGRvbWFpbiwgaW5kZXhlZERCIGlzIHVzZWQgZm9yIHBlcnNpc3RlbnQgc3RvcmFnZS4gVGhlc2VcclxuICAgICAgICAgICAgLy8gYnJvd3NlcnMgaW5jbHVkZSBJRTExIGFuZCBFZGdlLlxyXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgaXQgaXMgc3VwcG9ydGVkIChJRTExIGFuZCBFZGdlIHByaXZhdGUgbW9kZSBkb2VzIG5vdCBzdXBwb3J0XHJcbiAgICAgICAgICAgIC8vIHRoYXQpLlxyXG4gICAgICAgICAgICBpZiAoX2lzTG9jYWxTdG9yYWdlTm90U3luY2hyb25pemVkKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIEluIHN1Y2ggYnJvd3NlcnMsIGlmIGluZGV4ZWREQiBpcyBub3Qgc3VwcG9ydGVkLCBhbiBpZnJhbWUgY2Fubm90IGJlXHJcbiAgICAgICAgICAgICAgICAvLyBub3RpZmllZCBvZiB0aGUgcG9wdXAgc2lnbiBpbiByZXN1bHQuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNJbmRleGVkREJBdmFpbGFibGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIGxvY2FsU3RvcmFnZSBpcyBub3QgYXZhaWxhYmxlIGZyb20gYSB3b3JrZXIuIFRlc3QgYXZhaWxhYmlsaXR5IG9mXHJcbiAgICAgICAgLy8gaW5kZXhlZERCLlxyXG4gICAgICAgIHJldHVybiBfaXNXb3JrZXIoKSAmJiBpc0luZGV4ZWREQkF2YWlsYWJsZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gez9PYmplY3Q9fSBnbG9iYWwgVGhlIG9wdGlvbmFsIGdsb2JhbCBzY29wZS5cclxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciBjdXJyZW50IGVudmlyb25tZW50IGlzIGEgd29ya2VyLlxyXG4gKi9cclxuZnVuY3Rpb24gX2lzV29ya2VyKCkge1xyXG4gICAgLy8gV29ya2VyR2xvYmFsU2NvcGUgb25seSBkZWZpbmVkIGluIHdvcmtlciBlbnZpcm9ubWVudC5cclxuICAgIHJldHVybiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAnV29ya2VyR2xvYmFsU2NvcGUnIGluIGdsb2JhbCAmJlxyXG4gICAgICAgICdpbXBvcnRTY3JpcHRzJyBpbiBnbG9iYWwpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1BvcHVwUmVkaXJlY3RTdXBwb3J0ZWQoKSB7XHJcbiAgICByZXR1cm4gKChfaXNIdHRwT3JIdHRwcygpIHx8XHJcbiAgICAgICAgaXNCcm93c2VyRXh0ZW5zaW9uKCkgfHxcclxuICAgICAgICBfaXNBbmRyb2lkT3JJb3NDb3Jkb3ZhU2NoZW1lKCkpICYmXHJcbiAgICAgICAgLy8gUmVhY3QgTmF0aXZlIHdpdGggcmVtb3RlIGRlYnVnZ2luZyByZXBvcnRzIGl0cyBsb2NhdGlvbi5wcm90b2NvbCBhc1xyXG4gICAgICAgIC8vIGh0dHAuXHJcbiAgICAgICAgIV9pc05hdGl2ZUVudmlyb25tZW50KCkgJiZcclxuICAgICAgICAvLyBMb2NhbCBzdG9yYWdlIGhhcyB0byBiZSBzdXBwb3J0ZWQgZm9yIGJyb3dzZXIgcG9wdXAgYW5kIHJlZGlyZWN0XHJcbiAgICAgICAgLy8gb3BlcmF0aW9ucyB0byB3b3JrLlxyXG4gICAgICAgIF9pc1dlYlN0b3JhZ2VTdXBwb3J0ZWQoKSAmJlxyXG4gICAgICAgIC8vIERPTSwgcG9wdXBzIGFuZCByZWRpcmVjdHMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aGluIGEgd29ya2VyLlxyXG4gICAgICAgICFfaXNXb3JrZXIoKSk7XHJcbn1cclxuLyoqIFF1aWNrIGNoZWNrIHRoYXQgaW5kaWNhdGVzIHRoZSBwbGF0Zm9ybSAqbWF5KiBiZSBDb3Jkb3ZhICovXHJcbmZ1bmN0aW9uIF9pc0xpa2VseUNvcmRvdmEoKSB7XHJcbiAgICByZXR1cm4gX2lzQW5kcm9pZE9ySW9zQ29yZG92YVNjaGVtZSgpICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCc7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2lzQ29yZG92YSgpIHtcclxuICAgIGlmICghX2lzTGlrZWx5Q29yZG92YSgpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBXZSd2ZSB3YWl0ZWQgbG9uZyBlbm91Z2g7IHRoZSB0ZWxsdGFsZSBDb3Jkb3ZhIGV2ZW50IGRpZG4ndCBoYXBwZW5cclxuICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgfSwgQ09SRE9WQV9PTkRFVklDRVJFQURZX1RJTUVPVVRfTVMpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZXJlYWR5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIF9nZXRTZWxmV2luZG93KCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogbnVsbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBQZXJzaXN0ZW5jZSA9IHtcclxuICAgIExPQ0FMOiAnbG9jYWwnLFxyXG4gICAgTk9ORTogJ25vbmUnLFxyXG4gICAgU0VTU0lPTjogJ3Nlc3Npb24nXHJcbn07XHJcbmNvbnN0IF9hc3NlcnQkMyA9IGV4cC5fYXNzZXJ0O1xyXG5jb25zdCBQRVJTSVNURU5DRV9LRVkgPSAncGVyc2lzdGVuY2UnO1xyXG4vKipcclxuICogVmFsaWRhdGVzIHRoYXQgYW4gYXJndW1lbnQgaXMgYSB2YWxpZCBwZXJzaXN0ZW5jZSB2YWx1ZS4gSWYgYW4gaW52YWxpZCB0eXBlXHJcbiAqIGlzIHNwZWNpZmllZCwgYW4gZXJyb3IgaXMgdGhyb3duIHN5bmNocm9ub3VzbHkuXHJcbiAqL1xyXG5mdW5jdGlvbiBfdmFsaWRhdGVQZXJzaXN0ZW5jZUFyZ3VtZW50KGF1dGgsIHBlcnNpc3RlbmNlKSB7XHJcbiAgICBfYXNzZXJ0JDMoT2JqZWN0LnZhbHVlcyhQZXJzaXN0ZW5jZSkuaW5jbHVkZXMocGVyc2lzdGVuY2UpLCBhdXRoLCBcImludmFsaWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIElOVkFMSURfUEVSU0lTVEVOQ0UgKi8pO1xyXG4gICAgLy8gVmFsaWRhdGUgaWYgdGhlIHNwZWNpZmllZCB0eXBlIGlzIHN1cHBvcnRlZCBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC5cclxuICAgIGlmIChpc1JlYWN0TmF0aXZlKCkpIHtcclxuICAgICAgICAvLyBUaGlzIGlzIG9ubHkgc3VwcG9ydGVkIGluIGEgYnJvd3Nlci5cclxuICAgICAgICBfYXNzZXJ0JDMocGVyc2lzdGVuY2UgIT09IFBlcnNpc3RlbmNlLlNFU1NJT04sIGF1dGgsIFwidW5zdXBwb3J0ZWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIFVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFICovKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoaXNOb2RlKCkpIHtcclxuICAgICAgICAvLyBPbmx5IG5vbmUgaXMgc3VwcG9ydGVkIGluIE5vZGUuanMuXHJcbiAgICAgICAgX2Fzc2VydCQzKHBlcnNpc3RlbmNlID09PSBQZXJzaXN0ZW5jZS5OT05FLCBhdXRoLCBcInVuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGVcIiAvKiBVTlNVUFBPUlRFRF9QRVJTSVNURU5DRSAqLyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKF9pc1dvcmtlcigpKSB7XHJcbiAgICAgICAgLy8gSW4gYSB3b3JrZXIgZW52aXJvbm1lbnQsIGVpdGhlciBMT0NBTCBvciBOT05FIGFyZSBzdXBwb3J0ZWQuXHJcbiAgICAgICAgLy8gSWYgaW5kZXhlZERCIG5vdCBzdXBwb3J0ZWQgYW5kIExPQ0FMIHByb3ZpZGVkLCB0aHJvdyBhbiBlcnJvclxyXG4gICAgICAgIF9hc3NlcnQkMyhwZXJzaXN0ZW5jZSA9PT0gUGVyc2lzdGVuY2UuTk9ORSB8fFxyXG4gICAgICAgICAgICAocGVyc2lzdGVuY2UgPT09IFBlcnNpc3RlbmNlLkxPQ0FMICYmIGlzSW5kZXhlZERCQXZhaWxhYmxlKCkpLCBhdXRoLCBcInVuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGVcIiAvKiBVTlNVUFBPUlRFRF9QRVJTSVNURU5DRSAqLyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gVGhpcyBpcyByZXN0cmljdGVkIGJ5IHdoYXQgdGhlIGJyb3dzZXIgc3VwcG9ydHMuXHJcbiAgICBfYXNzZXJ0JDMocGVyc2lzdGVuY2UgPT09IFBlcnNpc3RlbmNlLk5PTkUgfHwgX2lzV2ViU3RvcmFnZVN1cHBvcnRlZCgpLCBhdXRoLCBcInVuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGVcIiAvKiBVTlNVUFBPUlRFRF9QRVJTSVNURU5DRSAqLyk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3NhdmVQZXJzaXN0ZW5jZUZvclJlZGlyZWN0KGF1dGgpIHtcclxuICAgIGF3YWl0IGF1dGguX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIGNvbnN0IHNlc3Npb24gPSBnZXRTZXNzaW9uU3RvcmFnZUlmQXZhaWxhYmxlKCk7XHJcbiAgICBjb25zdCBrZXkgPSBleHAuX3BlcnNpc3RlbmNlS2V5TmFtZShQRVJTSVNURU5DRV9LRVksIGF1dGguY29uZmlnLmFwaUtleSwgYXV0aC5uYW1lKTtcclxuICAgIGlmIChzZXNzaW9uKSB7XHJcbiAgICAgICAgc2Vzc2lvbi5zZXRJdGVtKGtleSwgYXV0aC5fZ2V0UGVyc2lzdGVuY2UoKSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gX2dldFBlcnNpc3RlbmNlc0Zyb21SZWRpcmVjdChhcGlLZXksIGFwcE5hbWUpIHtcclxuICAgIGNvbnN0IHNlc3Npb24gPSBnZXRTZXNzaW9uU3RvcmFnZUlmQXZhaWxhYmxlKCk7XHJcbiAgICBpZiAoIXNlc3Npb24pIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgICBjb25zdCBrZXkgPSBleHAuX3BlcnNpc3RlbmNlS2V5TmFtZShQRVJTSVNURU5DRV9LRVksIGFwaUtleSwgYXBwTmFtZSk7XHJcbiAgICBjb25zdCBwZXJzaXN0ZW5jZSA9IHNlc3Npb24uZ2V0SXRlbShrZXkpO1xyXG4gICAgc3dpdGNoIChwZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgIGNhc2UgUGVyc2lzdGVuY2UuTk9ORTpcclxuICAgICAgICAgICAgcmV0dXJuIFtleHAuaW5NZW1vcnlQZXJzaXN0ZW5jZV07XHJcbiAgICAgICAgY2FzZSBQZXJzaXN0ZW5jZS5MT0NBTDpcclxuICAgICAgICAgICAgcmV0dXJuIFtleHAuaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSwgZXhwLmJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2VdO1xyXG4gICAgICAgIGNhc2UgUGVyc2lzdGVuY2UuU0VTU0lPTjpcclxuICAgICAgICAgICAgcmV0dXJuIFtleHAuYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZV07XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG59XHJcbi8qKiBSZXR1cm5zIHNlc3Npb24gc3RvcmFnZSwgb3IgbnVsbCBpZiB0aGUgcHJvcGVydHkgYWNjZXNzIGVycm9ycyAqL1xyXG5mdW5jdGlvbiBnZXRTZXNzaW9uU3RvcmFnZUlmQXZhaWxhYmxlKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKChfYSA9IF9nZXRTZWxmV2luZG93KCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zZXNzaW9uU3RvcmFnZSkgfHwgbnVsbDtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgX2Fzc2VydCQyID0gZXhwLl9hc3NlcnQ7XHJcbi8qKiBQbGF0Zm9ybS1hZ25vc3RpYyBwb3B1cC1yZWRpcmVjdCByZXNvbHZlciAqL1xyXG5jbGFzcyBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGJvdGggcmVzb2x2ZXJzIGZvciBkeW5hbWljIHJlc29sdXRpb24gbGF0ZXJcclxuICAgICAgICB0aGlzLmJyb3dzZXJSZXNvbHZlciA9IGV4cC5fZ2V0SW5zdGFuY2UoZXhwLmJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgIHRoaXMuY29yZG92YVJlc29sdmVyID0gZXhwLl9nZXRJbnN0YW5jZShleHAuY29yZG92YVBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgLy8gVGhlIGFjdHVhbCByZXNvbHZlciBpbiB1c2U6IGVpdGhlciBicm93c2VyUmVzb2x2ZXIgb3IgY29yZG92YVJlc29sdmVyLlxyXG4gICAgICAgIHRoaXMudW5kZXJseWluZ1Jlc29sdmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9yZWRpcmVjdFBlcnNpc3RlbmNlID0gZXhwLmJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2U7XHJcbiAgICAgICAgdGhpcy5fY29tcGxldGVSZWRpcmVjdEZuID0gZXhwLl9nZXRSZWRpcmVjdFJlc3VsdDtcclxuICAgICAgICB0aGlzLl9vdmVycmlkZVJlZGlyZWN0UmVzdWx0ID0gZXhwLl9vdmVycmlkZVJlZGlyZWN0UmVzdWx0O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2luaXRpYWxpemUoYXV0aCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2VsZWN0VW5kZXJseWluZ1Jlc29sdmVyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0ZWRVbmRlcmx5aW5nUmVzb2x2ZXIuX2luaXRpYWxpemUoYXV0aCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfb3BlblBvcHVwKGF1dGgsIHByb3ZpZGVyLCBhdXRoVHlwZSwgZXZlbnRJZCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2VsZWN0VW5kZXJseWluZ1Jlc29sdmVyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0ZWRVbmRlcmx5aW5nUmVzb2x2ZXIuX29wZW5Qb3B1cChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX29wZW5SZWRpcmVjdChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNlbGVjdFVuZGVybHlpbmdSZXNvbHZlcigpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFzc2VydGVkVW5kZXJseWluZ1Jlc29sdmVyLl9vcGVuUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBldmVudElkKTtcclxuICAgIH1cclxuICAgIF9pc0lmcmFtZVdlYlN0b3JhZ2VTdXBwb3J0ZWQoYXV0aCwgY2IpIHtcclxuICAgICAgICB0aGlzLmFzc2VydGVkVW5kZXJseWluZ1Jlc29sdmVyLl9pc0lmcmFtZVdlYlN0b3JhZ2VTdXBwb3J0ZWQoYXV0aCwgY2IpO1xyXG4gICAgfVxyXG4gICAgX29yaWdpblZhbGlkYXRpb24oYXV0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFzc2VydGVkVW5kZXJseWluZ1Jlc29sdmVyLl9vcmlnaW5WYWxpZGF0aW9uKGF1dGgpO1xyXG4gICAgfVxyXG4gICAgZ2V0IF9zaG91bGRJbml0UHJvYWN0aXZlbHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9pc0xpa2VseUNvcmRvdmEoKSB8fCB0aGlzLmJyb3dzZXJSZXNvbHZlci5fc2hvdWxkSW5pdFByb2FjdGl2ZWx5O1xyXG4gICAgfVxyXG4gICAgZ2V0IGFzc2VydGVkVW5kZXJseWluZ1Jlc29sdmVyKCkge1xyXG4gICAgICAgIF9hc3NlcnQkMih0aGlzLnVuZGVybHlpbmdSZXNvbHZlciwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nUmVzb2x2ZXI7XHJcbiAgICB9XHJcbiAgICBhc3luYyBzZWxlY3RVbmRlcmx5aW5nUmVzb2x2ZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudW5kZXJseWluZ1Jlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gV2UgaGF2ZW4ndCB5ZXQgZGV0ZXJtaW5lZCB3aGV0aGVyIG9yIG5vdCB3ZSdyZSBpbiBDb3Jkb3ZhOyBnbyBhaGVhZFxyXG4gICAgICAgIC8vIGFuZCBkZXRlcm1pbmUgdGhhdCBzdGF0ZSBub3cuXHJcbiAgICAgICAgY29uc3QgaXNDb3Jkb3ZhID0gYXdhaXQgX2lzQ29yZG92YSgpO1xyXG4gICAgICAgIHRoaXMudW5kZXJseWluZ1Jlc29sdmVyID0gaXNDb3Jkb3ZhXHJcbiAgICAgICAgICAgID8gdGhpcy5jb3Jkb3ZhUmVzb2x2ZXJcclxuICAgICAgICAgICAgOiB0aGlzLmJyb3dzZXJSZXNvbHZlcjtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiB1bndyYXAob2JqZWN0KSB7XHJcbiAgICByZXR1cm4gb2JqZWN0LnVud3JhcCgpO1xyXG59XHJcbmZ1bmN0aW9uIHdyYXBwZWQob2JqZWN0KSB7XHJcbiAgICByZXR1cm4gb2JqZWN0LndyYXBwZWQoKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVkZW50aWFsRnJvbVJlc3BvbnNlKHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICByZXR1cm4gY3JlZGVudGlhbEZyb21PYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG59XHJcbmZ1bmN0aW9uIGF0dGFjaEV4dHJhRXJyb3JGaWVsZHMoYXV0aCwgZSkge1xyXG4gICAgdmFyIF9hLCBfYjtcclxuICAgIC8vIFRoZSByZXNwb25zZSBjb250YWlucyBhbGwgZmllbGRzIGZyb20gdGhlIHNlcnZlciB3aGljaCBtYXkgb3IgbWF5IG5vdFxyXG4gICAgLy8gYWN0dWFsbHkgbWF0Y2ggdGhlIHVuZGVybHlpbmcgdHlwZVxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSAoX2EgPSBlLmN1c3RvbURhdGEpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5fdG9rZW5SZXNwb25zZTtcclxuICAgIGlmICgoKF9iID0gZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNvZGUpID09PSAnYXV0aC9tdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZCcpIHtcclxuICAgICAgICBjb25zdCBtZmFFcnIgPSBlO1xyXG4gICAgICAgIG1mYUVyci5yZXNvbHZlciA9IG5ldyBNdWx0aUZhY3RvclJlc29sdmVyKGF1dGgsIGV4cC5nZXRNdWx0aUZhY3RvclJlc29sdmVyKGF1dGgsIGUpKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgY29uc3QgY3JlZGVudGlhbCA9IGNyZWRlbnRpYWxGcm9tT2JqZWN0KGUpO1xyXG4gICAgICAgIGNvbnN0IGNyZWRFcnIgPSBlO1xyXG4gICAgICAgIGlmIChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgICAgIGNyZWRFcnIuY3JlZGVudGlhbCA9IGNyZWRlbnRpYWw7XHJcbiAgICAgICAgICAgIGNyZWRFcnIudGVuYW50SWQgPSByZXNwb25zZS50ZW5hbnRJZCB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGNyZWRFcnIuZW1haWwgPSByZXNwb25zZS5lbWFpbCB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGNyZWRFcnIucGhvbmVOdW1iZXIgPSByZXNwb25zZS5waG9uZU51bWJlciB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNyZWRlbnRpYWxGcm9tT2JqZWN0KG9iamVjdCkge1xyXG4gICAgY29uc3QgeyBfdG9rZW5SZXNwb25zZSB9ID0gKG9iamVjdCBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IgPyBvYmplY3QuY3VzdG9tRGF0YSA6IG9iamVjdCk7XHJcbiAgICBpZiAoIV90b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICAvLyBIYW5kbGUgcGhvbmUgQXV0aCBjcmVkZW50aWFsIHJlc3BvbnNlcywgYXMgdGhleSBoYXZlIGEgZGlmZmVyZW50IGZvcm1hdFxyXG4gICAgLy8gZnJvbSBvdGhlciBiYWNrZW5kIHJlc3BvbnNlcyAoaS5lLiBubyBwcm92aWRlcklkKS4gVGhpcyBpcyBhbHNvIG9ubHkgdGhlXHJcbiAgICAvLyBjYXNlIGZvciB1c2VyIGNyZWRlbnRpYWxzIChkb2VzIG5vdCB3b3JrIGZvciBlcnJvcnMpLlxyXG4gICAgaWYgKCEob2JqZWN0IGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikpIHtcclxuICAgICAgICBpZiAoJ3RlbXBvcmFyeVByb29mJyBpbiBfdG9rZW5SZXNwb25zZSAmJiAncGhvbmVOdW1iZXInIGluIF90b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleHAuUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQob2JqZWN0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBwcm92aWRlcklkID0gX3Rva2VuUmVzcG9uc2UucHJvdmlkZXJJZDtcclxuICAgIC8vIEVtYWlsIGFuZCBwYXNzd29yZCBpcyBub3Qgc3VwcG9ydGVkIGFzIHRoZXJlIGlzIG5vIHNpdHVhdGlvbiB3aGVyZSB0aGVcclxuICAgIC8vIHNlcnZlciB3b3VsZCByZXR1cm4gdGhlIHBhc3N3b3JkIHRvIHRoZSBjbGllbnQuXHJcbiAgICBpZiAoIXByb3ZpZGVySWQgfHwgcHJvdmlkZXJJZCA9PT0gZXhwLlByb3ZpZGVySWQuUEFTU1dPUkQpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGxldCBwcm92aWRlcjtcclxuICAgIHN3aXRjaCAocHJvdmlkZXJJZCkge1xyXG4gICAgICAgIGNhc2UgZXhwLlByb3ZpZGVySWQuR09PR0xFOlxyXG4gICAgICAgICAgICBwcm92aWRlciA9IGV4cC5Hb29nbGVBdXRoUHJvdmlkZXI7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgZXhwLlByb3ZpZGVySWQuRkFDRUJPT0s6XHJcbiAgICAgICAgICAgIHByb3ZpZGVyID0gZXhwLkZhY2Vib29rQXV0aFByb3ZpZGVyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIGV4cC5Qcm92aWRlcklkLkdJVEhVQjpcclxuICAgICAgICAgICAgcHJvdmlkZXIgPSBleHAuR2l0aHViQXV0aFByb3ZpZGVyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIGV4cC5Qcm92aWRlcklkLlRXSVRURVI6XHJcbiAgICAgICAgICAgIHByb3ZpZGVyID0gZXhwLlR3aXR0ZXJBdXRoUHJvdmlkZXI7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGNvbnN0IHsgb2F1dGhJZFRva2VuLCBvYXV0aEFjY2Vzc1Rva2VuLCBvYXV0aFRva2VuU2VjcmV0LCBwZW5kaW5nVG9rZW4sIG5vbmNlIH0gPSBfdG9rZW5SZXNwb25zZTtcclxuICAgICAgICAgICAgaWYgKCFvYXV0aEFjY2Vzc1Rva2VuICYmXHJcbiAgICAgICAgICAgICAgICAhb2F1dGhUb2tlblNlY3JldCAmJlxyXG4gICAgICAgICAgICAgICAgIW9hdXRoSWRUb2tlbiAmJlxyXG4gICAgICAgICAgICAgICAgIXBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVE9ETyhhdm9sa292aSk6IHVuY29tbWVudCB0aGlzIGFuZCBnZXQgaXQgd29ya2luZyB3aXRoIFNBTUwgJiBPSURDXHJcbiAgICAgICAgICAgIGlmIChwZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm92aWRlcklkLnN0YXJ0c1dpdGgoJ3NhbWwuJykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXhwLlNBTUxBdXRoQ3JlZGVudGlhbC5fY3JlYXRlKHByb3ZpZGVySWQsIHBlbmRpbmdUb2tlbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBPSURDIGFuZCBub24tZGVmYXVsdCBwcm92aWRlcnMgZXhjbHVkaW5nIFR3aXR0ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4cC5PQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduSW5NZXRob2Q6IHByb3ZpZGVySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWRUb2tlbjogb2F1dGhJZFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogb2F1dGhBY2Nlc3NUb2tlblxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgZXhwLk9BdXRoUHJvdmlkZXIocHJvdmlkZXJJZCkuY3JlZGVudGlhbCh7XHJcbiAgICAgICAgICAgICAgICBpZFRva2VuOiBvYXV0aElkVG9rZW4sXHJcbiAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogb2F1dGhBY2Nlc3NUb2tlbixcclxuICAgICAgICAgICAgICAgIHJhd05vbmNlOiBub25jZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yXHJcbiAgICAgICAgPyBwcm92aWRlci5jcmVkZW50aWFsRnJvbUVycm9yKG9iamVjdClcclxuICAgICAgICA6IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KG9iamVjdCk7XHJcbn1cclxuZnVuY3Rpb24gY29udmVydENyZWRlbnRpYWwoYXV0aCwgY3JlZGVudGlhbFByb21pc2UpIHtcclxuICAgIHJldHVybiBjcmVkZW50aWFsUHJvbWlzZVxyXG4gICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgYXR0YWNoRXh0cmFFcnJvckZpZWxkcyhhdXRoLCBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH0pXHJcbiAgICAgICAgLnRoZW4oY3JlZGVudGlhbCA9PiB7XHJcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uVHlwZSA9IGNyZWRlbnRpYWwub3BlcmF0aW9uVHlwZTtcclxuICAgICAgICBjb25zdCB1c2VyID0gY3JlZGVudGlhbC51c2VyO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG9wZXJhdGlvblR5cGUsXHJcbiAgICAgICAgICAgIGNyZWRlbnRpYWw6IGNyZWRlbnRpYWxGcm9tUmVzcG9uc2UoY3JlZGVudGlhbCksXHJcbiAgICAgICAgICAgIGFkZGl0aW9uYWxVc2VySW5mbzogZXhwLmdldEFkZGl0aW9uYWxVc2VySW5mbyhjcmVkZW50aWFsKSxcclxuICAgICAgICAgICAgdXNlcjogVXNlci5nZXRPckNyZWF0ZSh1c2VyKVxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBjb252ZXJ0Q29uZmlybWF0aW9uUmVzdWx0KGF1dGgsIGNvbmZpcm1hdGlvblJlc3VsdFByb21pc2UpIHtcclxuICAgIGNvbnN0IGNvbmZpcm1hdGlvblJlc3VsdEV4cCA9IGF3YWl0IGNvbmZpcm1hdGlvblJlc3VsdFByb21pc2U7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHZlcmlmaWNhdGlvbklkOiBjb25maXJtYXRpb25SZXN1bHRFeHAudmVyaWZpY2F0aW9uSWQsXHJcbiAgICAgICAgY29uZmlybTogKHZlcmlmaWNhdGlvbkNvZGUpID0+IGNvbnZlcnRDcmVkZW50aWFsKGF1dGgsIGNvbmZpcm1hdGlvblJlc3VsdEV4cC5jb25maXJtKHZlcmlmaWNhdGlvbkNvZGUpKVxyXG4gICAgfTtcclxufVxyXG5jbGFzcyBNdWx0aUZhY3RvclJlc29sdmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIHJlc29sdmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlciA9IHJlc29sdmVyO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IHdyYXBwZWQoYXV0aCk7XHJcbiAgICB9XHJcbiAgICBnZXQgc2Vzc2lvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlci5zZXNzaW9uO1xyXG4gICAgfVxyXG4gICAgZ2V0IGhpbnRzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVyLmhpbnRzO1xyXG4gICAgfVxyXG4gICAgcmVzb2x2ZVNpZ25Jbihhc3NlcnRpb24pIHtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodW53cmFwKHRoaXMuYXV0aCksIHRoaXMucmVzb2x2ZXIucmVzb2x2ZVNpZ25Jbihhc3NlcnRpb24pKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBVc2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKF9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gX2RlbGVnYXRlO1xyXG4gICAgICAgIHRoaXMubXVsdGlGYWN0b3IgPSBleHAubXVsdGlGYWN0b3IoX2RlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBnZXRPckNyZWF0ZSh1c2VyKSB7XHJcbiAgICAgICAgaWYgKCFVc2VyLlVTRVJfTUFQLmhhcyh1c2VyKSkge1xyXG4gICAgICAgICAgICBVc2VyLlVTRVJfTUFQLnNldCh1c2VyLCBuZXcgVXNlcih1c2VyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBVc2VyLlVTRVJfTUFQLmdldCh1c2VyKTtcclxuICAgIH1cclxuICAgIGRlbGV0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuZGVsZXRlKCk7XHJcbiAgICB9XHJcbiAgICByZWxvYWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnJlbG9hZCgpO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS50b0pTT04oKTtcclxuICAgIH1cclxuICAgIGdldElkVG9rZW5SZXN1bHQoZm9yY2VSZWZyZXNoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmdldElkVG9rZW5SZXN1bHQoZm9yY2VSZWZyZXNoKTtcclxuICAgIH1cclxuICAgIGdldElkVG9rZW4oZm9yY2VSZWZyZXNoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmdldElkVG9rZW4oZm9yY2VSZWZyZXNoKTtcclxuICAgIH1cclxuICAgIGxpbmtBbmRSZXRyaWV2ZURhdGFXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGlua1dpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgbGlua1dpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5hdXRoLCBleHAubGlua1dpdGhDcmVkZW50aWFsKHRoaXMuX2RlbGVnYXRlLCBjcmVkZW50aWFsKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBsaW5rV2l0aFBob25lTnVtYmVyKHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDb25maXJtYXRpb25SZXN1bHQodGhpcy5hdXRoLCBleHAubGlua1dpdGhQaG9uZU51bWJlcih0aGlzLl9kZWxlZ2F0ZSwgcGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGxpbmtXaXRoUG9wdXAocHJvdmlkZXIpIHtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5hdXRoLCBleHAubGlua1dpdGhQb3B1cCh0aGlzLl9kZWxlZ2F0ZSwgcHJvdmlkZXIsIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlcikpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgbGlua1dpdGhSZWRpcmVjdChwcm92aWRlcikge1xyXG4gICAgICAgIGF3YWl0IF9zYXZlUGVyc2lzdGVuY2VGb3JSZWRpcmVjdChleHAuX2Nhc3RBdXRoKHRoaXMuYXV0aCkpO1xyXG4gICAgICAgIHJldHVybiBleHAubGlua1dpdGhSZWRpcmVjdCh0aGlzLl9kZWxlZ2F0ZSwgcHJvdmlkZXIsIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICB9XHJcbiAgICByZWF1dGhlbnRpY2F0ZUFuZFJldHJpZXZlRGF0YVdpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuYXV0aCwgZXhwLnJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwodGhpcy5fZGVsZWdhdGUsIGNyZWRlbnRpYWwpKTtcclxuICAgIH1cclxuICAgIHJlYXV0aGVudGljYXRlV2l0aFBob25lTnVtYmVyKHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDb25maXJtYXRpb25SZXN1bHQodGhpcy5hdXRoLCBleHAucmVhdXRoZW50aWNhdGVXaXRoUGhvbmVOdW1iZXIodGhpcy5fZGVsZWdhdGUsIHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKSk7XHJcbiAgICB9XHJcbiAgICByZWF1dGhlbnRpY2F0ZVdpdGhQb3B1cChwcm92aWRlcikge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLmF1dGgsIGV4cC5yZWF1dGhlbnRpY2F0ZVdpdGhQb3B1cCh0aGlzLl9kZWxlZ2F0ZSwgcHJvdmlkZXIsIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlcikpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QocHJvdmlkZXIpIHtcclxuICAgICAgICBhd2FpdCBfc2F2ZVBlcnNpc3RlbmNlRm9yUmVkaXJlY3QoZXhwLl9jYXN0QXV0aCh0aGlzLmF1dGgpKTtcclxuICAgICAgICByZXR1cm4gZXhwLnJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KHRoaXMuX2RlbGVnYXRlLCBwcm92aWRlciwgQ29tcGF0UG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgIH1cclxuICAgIHNlbmRFbWFpbFZlcmlmaWNhdGlvbihhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICByZXR1cm4gZXhwLnNlbmRFbWFpbFZlcmlmaWNhdGlvbih0aGlzLl9kZWxlZ2F0ZSwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHVubGluayhwcm92aWRlcklkKSB7XHJcbiAgICAgICAgYXdhaXQgZXhwLnVubGluayh0aGlzLl9kZWxlZ2F0ZSwgcHJvdmlkZXJJZCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVFbWFpbChuZXdFbWFpbCkge1xyXG4gICAgICAgIHJldHVybiBleHAudXBkYXRlRW1haWwodGhpcy5fZGVsZWdhdGUsIG5ld0VtYWlsKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVBhc3N3b3JkKG5ld1Bhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC51cGRhdGVQYXNzd29yZCh0aGlzLl9kZWxlZ2F0ZSwgbmV3UGFzc3dvcmQpO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlUGhvbmVOdW1iZXIocGhvbmVDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC51cGRhdGVQaG9uZU51bWJlcih0aGlzLl9kZWxlZ2F0ZSwgcGhvbmVDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVByb2ZpbGUocHJvZmlsZSkge1xyXG4gICAgICAgIHJldHVybiBleHAudXBkYXRlUHJvZmlsZSh0aGlzLl9kZWxlZ2F0ZSwgcHJvZmlsZSk7XHJcbiAgICB9XHJcbiAgICB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbChuZXdFbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC52ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbCh0aGlzLl9kZWxlZ2F0ZSwgbmV3RW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBnZXQgZW1haWxWZXJpZmllZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuZW1haWxWZXJpZmllZDtcclxuICAgIH1cclxuICAgIGdldCBpc0Fub255bW91cygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuaXNBbm9ueW1vdXM7XHJcbiAgICB9XHJcbiAgICBnZXQgbWV0YWRhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLm1ldGFkYXRhO1xyXG4gICAgfVxyXG4gICAgZ2V0IHBob25lTnVtYmVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5waG9uZU51bWJlcjtcclxuICAgIH1cclxuICAgIGdldCBwcm92aWRlckRhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnByb3ZpZGVyRGF0YTtcclxuICAgIH1cclxuICAgIGdldCByZWZyZXNoVG9rZW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnJlZnJlc2hUb2tlbjtcclxuICAgIH1cclxuICAgIGdldCB0ZW5hbnRJZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUudGVuYW50SWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgZGlzcGxheU5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmRpc3BsYXlOYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0IGVtYWlsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5lbWFpbDtcclxuICAgIH1cclxuICAgIGdldCBwaG90b1VSTCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUucGhvdG9VUkw7XHJcbiAgICB9XHJcbiAgICBnZXQgcHJvdmlkZXJJZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUucHJvdmlkZXJJZDtcclxuICAgIH1cclxuICAgIGdldCB1aWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnVpZDtcclxuICAgIH1cclxuICAgIGdldCBhdXRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5hdXRoO1xyXG4gICAgfVxyXG59XHJcbi8vIE1haW50YWluIGEgbWFwIHNvIHRoYXQgdGhlcmUncyBhbHdheXMgYSAxOjEgbWFwcGluZyBiZXR3ZWVuIG5ldyBVc2VyIGFuZFxyXG4vLyBsZWdhY3kgY29tcGF0IHVzZXJzXHJcblVzZXIuVVNFUl9NQVAgPSBuZXcgV2Vha01hcCgpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBfYXNzZXJ0JDEgPSBleHAuX2Fzc2VydDtcclxuY2xhc3MgQXV0aCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHAsIHByb3ZpZGVyKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzSW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmtVbmRlcmx5aW5nQXV0aCgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgYXBpS2V5IH0gPSBhcHAub3B0aW9ucztcclxuICAgICAgICAvLyBUT0RPOiBwbGF0Zm9ybSBuZWVkcyB0byBiZSBkZXRlcm1pbmVkIHVzaW5nIGhldXJpc3RpY3NcclxuICAgICAgICBfYXNzZXJ0JDEoYXBpS2V5LCBcImludmFsaWQtYXBpLWtleVwiIC8qIElOVkFMSURfQVBJX0tFWSAqLywge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBhcHAubmFtZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFRPRE86IHBsYXRmb3JtIG5lZWRzIHRvIGJlIGRldGVybWluZWQgdXNpbmcgaGV1cmlzdGljc1xyXG4gICAgICAgIF9hc3NlcnQkMShhcGlLZXksIFwiaW52YWxpZC1hcGkta2V5XCIgLyogSU5WQUxJRF9BUElfS0VZICovLCB7XHJcbiAgICAgICAgICAgIGFwcE5hbWU6IGFwcC5uYW1lXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gT25seSB1c2UgYSBwb3B1cC9yZWRpcmVjdCByZXNvbHZlciBpbiBicm93c2VyIGVudmlyb25tZW50c1xyXG4gICAgICAgIGNvbnN0IHJlc29sdmVyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBwcm92aWRlci5pbml0aWFsaXplKHtcclxuICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgcGVyc2lzdGVuY2U6IGJ1aWxkUGVyc2lzdGVuY2VIaWVyYXJjaHkoYXBpS2V5LCBhcHAubmFtZSksXHJcbiAgICAgICAgICAgICAgICBwb3B1cFJlZGlyZWN0UmVzb2x2ZXI6IHJlc29sdmVyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5fdXBkYXRlRXJyb3JNYXAoZXhwLmRlYnVnRXJyb3JNYXApO1xyXG4gICAgICAgIHRoaXMubGlua1VuZGVybHlpbmdBdXRoKCk7XHJcbiAgICB9XHJcbiAgICBnZXQgZW11bGF0b3JDb25maWcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmVtdWxhdG9yQ29uZmlnO1xyXG4gICAgfVxyXG4gICAgZ2V0IGN1cnJlbnRVc2VyKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fZGVsZWdhdGUuY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBVc2VyLmdldE9yQ3JlYXRlKHRoaXMuX2RlbGVnYXRlLmN1cnJlbnRVc2VyKTtcclxuICAgIH1cclxuICAgIGdldCBsYW5ndWFnZUNvZGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmxhbmd1YWdlQ29kZTtcclxuICAgIH1cclxuICAgIHNldCBsYW5ndWFnZUNvZGUobGFuZ3VhZ2VDb2RlKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUubGFuZ3VhZ2VDb2RlID0gbGFuZ3VhZ2VDb2RlO1xyXG4gICAgfVxyXG4gICAgZ2V0IHNldHRpbmdzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5zZXR0aW5ncztcclxuICAgIH1cclxuICAgIGdldCB0ZW5hbnRJZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUudGVuYW50SWQ7XHJcbiAgICB9XHJcbiAgICBzZXQgdGVuYW50SWQodGlkKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUudGVuYW50SWQgPSB0aWQ7XHJcbiAgICB9XHJcbiAgICB1c2VEZXZpY2VMYW5ndWFnZSgpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS51c2VEZXZpY2VMYW5ndWFnZSgpO1xyXG4gICAgfVxyXG4gICAgc2lnbk91dCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuc2lnbk91dCgpO1xyXG4gICAgfVxyXG4gICAgdXNlRW11bGF0b3IodXJsLCBvcHRpb25zKSB7XHJcbiAgICAgICAgZXhwLmNvbm5lY3RBdXRoRW11bGF0b3IodGhpcy5fZGVsZWdhdGUsIHVybCwgb3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBhcHBseUFjdGlvbkNvZGUoY29kZSkge1xyXG4gICAgICAgIHJldHVybiBleHAuYXBwbHlBY3Rpb25Db2RlKHRoaXMuX2RlbGVnYXRlLCBjb2RlKTtcclxuICAgIH1cclxuICAgIGNoZWNrQWN0aW9uQ29kZShjb2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5jaGVja0FjdGlvbkNvZGUodGhpcy5fZGVsZWdhdGUsIGNvZGUpO1xyXG4gICAgfVxyXG4gICAgY29uZmlybVBhc3N3b3JkUmVzZXQoY29kZSwgbmV3UGFzc3dvcmQpIHtcclxuICAgICAgICByZXR1cm4gZXhwLmNvbmZpcm1QYXNzd29yZFJlc2V0KHRoaXMuX2RlbGVnYXRlLCBjb2RlLCBuZXdQYXNzd29yZCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuX2RlbGVnYXRlLCBleHAuY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKHRoaXMuX2RlbGVnYXRlLCBlbWFpbCwgcGFzc3dvcmQpKTtcclxuICAgIH1cclxuICAgIGZldGNoUHJvdmlkZXJzRm9yRW1haWwoZW1haWwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaFNpZ25Jbk1ldGhvZHNGb3JFbWFpbChlbWFpbCk7XHJcbiAgICB9XHJcbiAgICBmZXRjaFNpZ25Jbk1ldGhvZHNGb3JFbWFpbChlbWFpbCkge1xyXG4gICAgICAgIHJldHVybiBleHAuZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwodGhpcy5fZGVsZWdhdGUsIGVtYWlsKTtcclxuICAgIH1cclxuICAgIGlzU2lnbkluV2l0aEVtYWlsTGluayhlbWFpbExpbmspIHtcclxuICAgICAgICByZXR1cm4gZXhwLmlzU2lnbkluV2l0aEVtYWlsTGluayh0aGlzLl9kZWxlZ2F0ZSwgZW1haWxMaW5rKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGdldFJlZGlyZWN0UmVzdWx0KCkge1xyXG4gICAgICAgIF9hc3NlcnQkMShfaXNQb3B1cFJlZGlyZWN0U3VwcG9ydGVkKCksIHRoaXMuX2RlbGVnYXRlLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBPUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLyk7XHJcbiAgICAgICAgY29uc3QgY3JlZGVudGlhbCA9IGF3YWl0IGV4cC5nZXRSZWRpcmVjdFJlc3VsdCh0aGlzLl9kZWxlZ2F0ZSwgQ29tcGF0UG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICBpZiAoIWNyZWRlbnRpYWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGNyZWRlbnRpYWw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB1c2VyOiBudWxsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgUHJvbWlzZS5yZXNvbHZlKGNyZWRlbnRpYWwpKTtcclxuICAgIH1cclxuICAgIC8vIFRoaXMgZnVuY3Rpb24gc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGJ5IGZyYW1ld29ya3MgKGUuZy4gRmlyZWJhc2VVSS13ZWIpIHRvIGxvZyB0aGVpciB1c2FnZS5cclxuICAgIC8vIEl0IGlzIG5vdCBpbnRlbmRlZCBmb3IgZGlyZWN0IHVzZSBieSBkZXZlbG9wZXIgYXBwcy4gTk8ganNkb2MgaGVyZSB0byBpbnRlbnRpb25hbGx5IGxlYXZlIGl0XHJcbiAgICAvLyBvdXQgb2YgYXV0b2dlbmVyYXRlZCBkb2N1bWVudGF0aW9uIHBhZ2VzIHRvIHJlZHVjZSBhY2NpZGVudGFsIG1pc3VzZS5cclxuICAgIGFkZEZyYW1ld29ya0ZvckxvZ2dpbmcoZnJhbWV3b3JrKSB7XHJcbiAgICAgICAgZXhwLmFkZEZyYW1ld29ya0ZvckxvZ2dpbmcodGhpcy5fZGVsZWdhdGUsIGZyYW1ld29yayk7XHJcbiAgICB9XHJcbiAgICBvbkF1dGhTdGF0ZUNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yRm4sIGNvbXBsZXRlZCkge1xyXG4gICAgICAgIGNvbnN0IHsgbmV4dCwgZXJyb3IsIGNvbXBsZXRlIH0gPSB3cmFwT2JzZXJ2ZXJzKG5leHRPck9ic2VydmVyLCBlcnJvckZuLCBjb21wbGV0ZWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5vbkF1dGhTdGF0ZUNoYW5nZWQobmV4dCwgZXJyb3IsIGNvbXBsZXRlKTtcclxuICAgIH1cclxuICAgIG9uSWRUb2tlbkNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yRm4sIGNvbXBsZXRlZCkge1xyXG4gICAgICAgIGNvbnN0IHsgbmV4dCwgZXJyb3IsIGNvbXBsZXRlIH0gPSB3cmFwT2JzZXJ2ZXJzKG5leHRPck9ic2VydmVyLCBlcnJvckZuLCBjb21wbGV0ZWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5vbklkVG9rZW5DaGFuZ2VkKG5leHQsIGVycm9yLCBjb21wbGV0ZSk7XHJcbiAgICB9XHJcbiAgICBzZW5kU2lnbkluTGlua1RvRW1haWwoZW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgICAgIHJldHVybiBleHAuc2VuZFNpZ25JbkxpbmtUb0VtYWlsKHRoaXMuX2RlbGVnYXRlLCBlbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIHNlbmRQYXNzd29yZFJlc2V0RW1haWwoZW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgICAgIHJldHVybiBleHAuc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCh0aGlzLl9kZWxlZ2F0ZSwgZW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncyB8fCB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgc2V0UGVyc2lzdGVuY2UocGVyc2lzdGVuY2UpIHtcclxuICAgICAgICBfdmFsaWRhdGVQZXJzaXN0ZW5jZUFyZ3VtZW50KHRoaXMuX2RlbGVnYXRlLCBwZXJzaXN0ZW5jZSk7XHJcbiAgICAgICAgbGV0IGNvbnZlcnRlZDtcclxuICAgICAgICBzd2l0Y2ggKHBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgUGVyc2lzdGVuY2UuU0VTU0lPTjpcclxuICAgICAgICAgICAgICAgIGNvbnZlcnRlZCA9IGV4cC5icm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgUGVyc2lzdGVuY2UuTE9DQUw6XHJcbiAgICAgICAgICAgICAgICAvLyBOb3QgdXNpbmcgaXNJbmRleGVkREJBdmFpbGFibGUoKSBzaW5jZSBpdCBvbmx5IGNoZWNrcyBpZiBpbmRleGVkREIgaXMgZGVmaW5lZC5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzSW5kZXhlZERCRnVsbHlTdXBwb3J0ZWQgPSBhd2FpdCBleHBcclxuICAgICAgICAgICAgICAgICAgICAuX2dldEluc3RhbmNlKGV4cC5pbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5faXNBdmFpbGFibGUoKTtcclxuICAgICAgICAgICAgICAgIGNvbnZlcnRlZCA9IGlzSW5kZXhlZERCRnVsbHlTdXBwb3J0ZWRcclxuICAgICAgICAgICAgICAgICAgICA/IGV4cC5pbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgOiBleHAuYnJvd3NlckxvY2FsUGVyc2lzdGVuY2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBQZXJzaXN0ZW5jZS5OT05FOlxyXG4gICAgICAgICAgICAgICAgY29udmVydGVkID0gZXhwLmluTWVtb3J5UGVyc2lzdGVuY2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBleHAuX2ZhaWwoXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwTmFtZTogdGhpcy5fZGVsZWdhdGUubmFtZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5zZXRQZXJzaXN0ZW5jZShjb252ZXJ0ZWQpO1xyXG4gICAgfVxyXG4gICAgc2lnbkluQW5kUmV0cmlldmVEYXRhV2l0aENyZWRlbnRpYWwoY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNpZ25JbldpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgc2lnbkluQW5vbnltb3VzbHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuX2RlbGVnYXRlLCBleHAuc2lnbkluQW5vbnltb3VzbHkodGhpcy5fZGVsZWdhdGUpKTtcclxuICAgIH1cclxuICAgIHNpZ25JbldpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5fZGVsZWdhdGUsIGV4cC5zaWduSW5XaXRoQ3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgY3JlZGVudGlhbCkpO1xyXG4gICAgfVxyXG4gICAgc2lnbkluV2l0aEN1c3RvbVRva2VuKHRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuX2RlbGVnYXRlLCBleHAuc2lnbkluV2l0aEN1c3RvbVRva2VuKHRoaXMuX2RlbGVnYXRlLCB0b2tlbikpO1xyXG4gICAgfVxyXG4gICAgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuX2RlbGVnYXRlLCBleHAuc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQodGhpcy5fZGVsZWdhdGUsIGVtYWlsLCBwYXNzd29yZCkpO1xyXG4gICAgfVxyXG4gICAgc2lnbkluV2l0aEVtYWlsTGluayhlbWFpbCwgZW1haWxMaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuX2RlbGVnYXRlLCBleHAuc2lnbkluV2l0aEVtYWlsTGluayh0aGlzLl9kZWxlZ2F0ZSwgZW1haWwsIGVtYWlsTGluaykpO1xyXG4gICAgfVxyXG4gICAgc2lnbkluV2l0aFBob25lTnVtYmVyKHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDb25maXJtYXRpb25SZXN1bHQodGhpcy5fZGVsZWdhdGUsIGV4cC5zaWduSW5XaXRoUGhvbmVOdW1iZXIodGhpcy5fZGVsZWdhdGUsIHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBzaWduSW5XaXRoUG9wdXAocHJvdmlkZXIpIHtcclxuICAgICAgICBfYXNzZXJ0JDEoX2lzUG9wdXBSZWRpcmVjdFN1cHBvcnRlZCgpLCB0aGlzLl9kZWxlZ2F0ZSwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLnNpZ25JbldpdGhQb3B1cCh0aGlzLl9kZWxlZ2F0ZSwgcHJvdmlkZXIsIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlcikpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgc2lnbkluV2l0aFJlZGlyZWN0KHByb3ZpZGVyKSB7XHJcbiAgICAgICAgX2Fzc2VydCQxKF9pc1BvcHVwUmVkaXJlY3RTdXBwb3J0ZWQoKSwgdGhpcy5fZGVsZWdhdGUsIFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovKTtcclxuICAgICAgICBhd2FpdCBfc2F2ZVBlcnNpc3RlbmNlRm9yUmVkaXJlY3QodGhpcy5fZGVsZWdhdGUpO1xyXG4gICAgICAgIHJldHVybiBleHAuc2lnbkluV2l0aFJlZGlyZWN0KHRoaXMuX2RlbGVnYXRlLCBwcm92aWRlciwgQ29tcGF0UG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZUN1cnJlbnRVc2VyKHVzZXIpIHtcclxuICAgICAgICAvLyByZW1vdmUgdHMtaWdub3JlIG9uY2Ugb3ZlcmxvYWRzIGFyZSBkZWZpbmVkIGZvciBleHAgZnVuY3Rpb25zIHRvIGFjY2VwdCBjb21wYXQgb2JqZWN0c1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUudXBkYXRlQ3VycmVudFVzZXIodXNlcik7XHJcbiAgICB9XHJcbiAgICB2ZXJpZnlQYXNzd29yZFJlc2V0Q29kZShjb2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC52ZXJpZnlQYXNzd29yZFJlc2V0Q29kZSh0aGlzLl9kZWxlZ2F0ZSwgY29kZSk7XHJcbiAgICB9XHJcbiAgICB1bndyYXAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgX2RlbGV0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuX2RlbGV0ZSgpO1xyXG4gICAgfVxyXG4gICAgbGlua1VuZGVybHlpbmdBdXRoKCkge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlLndyYXBwZWQgPSAoKSA9PiB0aGlzO1xyXG4gICAgfVxyXG59XHJcbkF1dGguUGVyc2lzdGVuY2UgPSBQZXJzaXN0ZW5jZTtcclxuZnVuY3Rpb24gd3JhcE9ic2VydmVycyhuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XHJcbiAgICBsZXQgbmV4dCA9IG5leHRPck9ic2VydmVyO1xyXG4gICAgaWYgKHR5cGVvZiBuZXh0T3JPYnNlcnZlciAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICh7IG5leHQsIGVycm9yLCBjb21wbGV0ZSB9ID0gbmV4dE9yT2JzZXJ2ZXIpO1xyXG4gICAgfVxyXG4gICAgLy8gV2Uga25vdyAnbmV4dCcgaXMgbm93IGEgZnVuY3Rpb25cclxuICAgIGNvbnN0IG9sZE5leHQgPSBuZXh0O1xyXG4gICAgY29uc3QgbmV3TmV4dCA9ICh1c2VyKSA9PiBvbGROZXh0KHVzZXIgJiYgVXNlci5nZXRPckNyZWF0ZSh1c2VyKSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IG5ld05leHQsXHJcbiAgICAgICAgZXJyb3I6IGVycm9yLFxyXG4gICAgICAgIGNvbXBsZXRlXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGJ1aWxkUGVyc2lzdGVuY2VIaWVyYXJjaHkoYXBpS2V5LCBhcHBOYW1lKSB7XHJcbiAgICAvLyBOb3RlIHRoaXMgaXMgc2xpZ2h0bHkgZGlmZmVyZW50IGJlaGF2aW9yOiBpbiB0aGlzIGNhc2UsIHRoZSBzdG9yZWRcclxuICAgIC8vIHBlcnNpc3RlbmNlIGlzIGNoZWNrZWQgKmZpcnN0KiByYXRoZXIgdGhhbiBsYXN0LiBUaGlzIGlzIGJlY2F1c2Ugd2Ugd2FudFxyXG4gICAgLy8gdG8gcHJlZmVyIHN0b3JlZCBwZXJzaXN0ZW5jZSB0eXBlIGluIHRoZSBoaWVyYXJjaHkuIFRoaXMgaXMgYW4gZW1wdHlcclxuICAgIC8vIGFycmF5IGlmIHdpbmRvdyBpcyBub3QgYXZhaWxhYmxlIG9yIHRoZXJlIGlzIG5vIHBlbmRpbmcgcmVkaXJlY3RcclxuICAgIGNvbnN0IHBlcnNpc3RlbmNlcyA9IF9nZXRQZXJzaXN0ZW5jZXNGcm9tUmVkaXJlY3QoYXBpS2V5LCBhcHBOYW1lKTtcclxuICAgIC8vIElmIFwic2VsZlwiIGlzIGF2YWlsYWJsZSwgYWRkIGluZGV4ZWREQlxyXG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICFwZXJzaXN0ZW5jZXMuaW5jbHVkZXMoZXhwLmluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UpKSB7XHJcbiAgICAgICAgcGVyc2lzdGVuY2VzLnB1c2goZXhwLmluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UpO1xyXG4gICAgfVxyXG4gICAgLy8gSWYgXCJ3aW5kb3dcIiBpcyBhdmFpbGFibGUsIGFkZCBIVE1MIFN0b3JhZ2UgcGVyc2lzdGVuY2VzXHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHBlcnNpc3RlbmNlIG9mIFtcclxuICAgICAgICAgICAgZXhwLmJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlLFxyXG4gICAgICAgICAgICBleHAuYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZVxyXG4gICAgICAgIF0pIHtcclxuICAgICAgICAgICAgaWYgKCFwZXJzaXN0ZW5jZXMuaW5jbHVkZXMocGVyc2lzdGVuY2UpKSB7XHJcbiAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZXMucHVzaChwZXJzaXN0ZW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBBZGQgaW4tbWVtb3J5IGFzIGEgZmluYWwgZmFsbGJhY2tcclxuICAgIGlmICghcGVyc2lzdGVuY2VzLmluY2x1ZGVzKGV4cC5pbk1lbW9yeVBlcnNpc3RlbmNlKSkge1xyXG4gICAgICAgIHBlcnNpc3RlbmNlcy5wdXNoKGV4cC5pbk1lbW9yeVBlcnNpc3RlbmNlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwZXJzaXN0ZW5jZXM7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgUGhvbmVBdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gJ3Bob25lJztcclxuICAgICAgICAvLyBUT0RPOiByZW1vdmUgdHMtaWdub3JlIHdoZW4gbW92aW5nIHR5cGVzIGZyb20gYXV0aC10eXBlcyB0byBhdXRoLWNvbXBhdFxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IG5ldyBleHAuUGhvbmVBdXRoUHJvdmlkZXIodW53cmFwKGZpcmViYXNlLmF1dGgoKSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpIHtcclxuICAgICAgICByZXR1cm4gZXhwLlBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgfVxyXG4gICAgdmVyaWZ5UGhvbmVOdW1iZXIocGhvbmVJbmZvT3B0aW9ucywgYXBwbGljYXRpb25WZXJpZmllcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS52ZXJpZnlQaG9uZU51bWJlcihcclxuICAgICAgICAvLyBUaGUgaW1wbGVtZW50YXRpb24gbWF0Y2hlcyBidXQgdGhlIHR5cGVzIGFyZSBzdWJ0bHkgaW5jb21wYXRpYmxlXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICBwaG9uZUluZm9PcHRpb25zLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICAgIH1cclxuICAgIHVud3JhcCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGU7XHJcbiAgICB9XHJcbn1cclxuUGhvbmVBdXRoUHJvdmlkZXIuUEhPTkVfU0lHTl9JTl9NRVRIT0QgPSBleHAuUGhvbmVBdXRoUHJvdmlkZXIuUEhPTkVfU0lHTl9JTl9NRVRIT0Q7XHJcblBob25lQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gZXhwLlBob25lQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBfYXNzZXJ0ID0gZXhwLl9hc3NlcnQ7XHJcbmNsYXNzIFJlY2FwdGNoYVZlcmlmaWVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lciwgcGFyYW1ldGVycywgYXBwID0gZmlyZWJhc2UuYXBwKCkpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gQVBJIGtleSBpcyByZXF1aXJlZCBmb3Igd2ViIGNsaWVudCBSUEMgY2FsbHMuXHJcbiAgICAgICAgX2Fzc2VydCgoX2EgPSBhcHAub3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFwaUtleSwgXCJpbnZhbGlkLWFwaS1rZXlcIiAvKiBJTlZBTElEX0FQSV9LRVkgKi8sIHtcclxuICAgICAgICAgICAgYXBwTmFtZTogYXBwLm5hbWVcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IG5ldyBleHAuUmVjYXB0Y2hhVmVyaWZpZXIoY29udGFpbmVyLCBcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHBhcmFtZXRlcnMsIFxyXG4gICAgICAgIC8vIFRPRE86IHJlbW92ZSB0cy1pZ25vcmUgd2hlbiBtb3ZpbmcgdHlwZXMgZnJvbSBhdXRoLXR5cGVzIHRvIGF1dGgtY29tcGF0XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGFwcC5hdXRoKCkpO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHRoaXMuX2RlbGVnYXRlLnR5cGU7XHJcbiAgICB9XHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5jbGVhcigpO1xyXG4gICAgfVxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5yZW5kZXIoKTtcclxuICAgIH1cclxuICAgIHZlcmlmeSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUudmVyaWZ5KCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgQVVUSF9UWVBFID0gJ2F1dGgtY29tcGF0JztcclxuLy8gQ3JlYXRlIGF1dGggY29tcG9uZW50cyB0byByZWdpc3RlciB3aXRoIGZpcmViYXNlLlxyXG4vLyBQcm92aWRlcyBBdXRoIHB1YmxpYyBBUElzLlxyXG5mdW5jdGlvbiByZWdpc3RlckF1dGhDb21wYXQoaW5zdGFuY2UpIHtcclxuICAgIGluc3RhbmNlLklOVEVSTkFMLnJlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoQVVUSF9UWVBFLCBjb250YWluZXIgPT4ge1xyXG4gICAgICAgIC8vIGdldEltbWVkaWF0ZSBmb3IgRmlyZWJhc2VBcHAgd2lsbCBhbHdheXMgc3VjY2VlZFxyXG4gICAgICAgIGNvbnN0IGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwLWNvbXBhdCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGF1dGhQcm92aWRlciA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXV0aCcpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQXV0aChhcHAsIGF1dGhQcm92aWRlcik7XHJcbiAgICB9LCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLylcclxuICAgICAgICAuc2V0U2VydmljZVByb3BzKHtcclxuICAgICAgICBBY3Rpb25Db2RlSW5mbzoge1xyXG4gICAgICAgICAgICBPcGVyYXRpb246IHtcclxuICAgICAgICAgICAgICAgIEVNQUlMX1NJR05JTjogZXhwLkFjdGlvbkNvZGVPcGVyYXRpb24uRU1BSUxfU0lHTklOLFxyXG4gICAgICAgICAgICAgICAgUEFTU1dPUkRfUkVTRVQ6IGV4cC5BY3Rpb25Db2RlT3BlcmF0aW9uLlBBU1NXT1JEX1JFU0VULFxyXG4gICAgICAgICAgICAgICAgUkVDT1ZFUl9FTUFJTDogZXhwLkFjdGlvbkNvZGVPcGVyYXRpb24uUkVDT1ZFUl9FTUFJTCxcclxuICAgICAgICAgICAgICAgIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OOiBleHAuQWN0aW9uQ29kZU9wZXJhdGlvbi5SRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTixcclxuICAgICAgICAgICAgICAgIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMOiBleHAuQWN0aW9uQ29kZU9wZXJhdGlvbi5WRVJJRllfQU5EX0NIQU5HRV9FTUFJTCxcclxuICAgICAgICAgICAgICAgIFZFUklGWV9FTUFJTDogZXhwLkFjdGlvbkNvZGVPcGVyYXRpb24uVkVSSUZZX0VNQUlMXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIEVtYWlsQXV0aFByb3ZpZGVyOiBleHAuRW1haWxBdXRoUHJvdmlkZXIsXHJcbiAgICAgICAgRmFjZWJvb2tBdXRoUHJvdmlkZXI6IGV4cC5GYWNlYm9va0F1dGhQcm92aWRlcixcclxuICAgICAgICBHaXRodWJBdXRoUHJvdmlkZXI6IGV4cC5HaXRodWJBdXRoUHJvdmlkZXIsXHJcbiAgICAgICAgR29vZ2xlQXV0aFByb3ZpZGVyOiBleHAuR29vZ2xlQXV0aFByb3ZpZGVyLFxyXG4gICAgICAgIE9BdXRoUHJvdmlkZXI6IGV4cC5PQXV0aFByb3ZpZGVyLFxyXG4gICAgICAgIFNBTUxBdXRoUHJvdmlkZXI6IGV4cC5TQU1MQXV0aFByb3ZpZGVyLFxyXG4gICAgICAgIFBob25lQXV0aFByb3ZpZGVyOiBQaG9uZUF1dGhQcm92aWRlcixcclxuICAgICAgICBQaG9uZU11bHRpRmFjdG9yR2VuZXJhdG9yOiBleHAuUGhvbmVNdWx0aUZhY3RvckdlbmVyYXRvcixcclxuICAgICAgICBSZWNhcHRjaGFWZXJpZmllcjogUmVjYXB0Y2hhVmVyaWZpZXIsXHJcbiAgICAgICAgVHdpdHRlckF1dGhQcm92aWRlcjogZXhwLlR3aXR0ZXJBdXRoUHJvdmlkZXIsXHJcbiAgICAgICAgQXV0aCxcclxuICAgICAgICBBdXRoQ3JlZGVudGlhbDogZXhwLkF1dGhDcmVkZW50aWFsLFxyXG4gICAgICAgIEVycm9yOiBGaXJlYmFzZUVycm9yXHJcbiAgICB9KVxyXG4gICAgICAgIC5zZXRJbnN0YW50aWF0aW9uTW9kZShcIkxBWllcIiAvKiBMQVpZICovKVxyXG4gICAgICAgIC5zZXRNdWx0aXBsZUluc3RhbmNlcyhmYWxzZSkpO1xyXG4gICAgaW5zdGFuY2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24pO1xyXG59XHJcbnJlZ2lzdGVyQXV0aENvbXBhdChmaXJlYmFzZSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@firebase/auth-compat/dist/index.esm2017.js\n"));

/***/ }),

/***/ "./node_modules/@firebase/auth/dist/esm2017/internal.js":
/*!**************************************************************!*\
  !*** ./node_modules/@firebase/auth/dist/esm2017/internal.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ActionCodeOperation\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.A; },\n/* harmony export */   \"ActionCodeURL\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ad; },\n/* harmony export */   \"AuthCredential\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.H; },\n/* harmony export */   \"AuthErrorCodes\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.D; },\n/* harmony export */   \"AuthImpl\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aG; },\n/* harmony export */   \"AuthPopup\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aJ; },\n/* harmony export */   \"EmailAuthCredential\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.I; },\n/* harmony export */   \"EmailAuthProvider\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.M; },\n/* harmony export */   \"FacebookAuthProvider\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.N; },\n/* harmony export */   \"FactorId\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.F; },\n/* harmony export */   \"FetchProvider\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aK; },\n/* harmony export */   \"GithubAuthProvider\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.T; },\n/* harmony export */   \"GoogleAuthProvider\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.Q; },\n/* harmony export */   \"OAuthCredential\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.J; },\n/* harmony export */   \"OAuthProvider\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.U; },\n/* harmony export */   \"OperationType\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.O; },\n/* harmony export */   \"PhoneAuthCredential\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.K; },\n/* harmony export */   \"PhoneAuthProvider\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.P; },\n/* harmony export */   \"PhoneMultiFactorGenerator\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.m; },\n/* harmony export */   \"ProviderId\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.o; },\n/* harmony export */   \"RecaptchaVerifier\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.R; },\n/* harmony export */   \"SAMLAuthCredential\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aL; },\n/* harmony export */   \"SAMLAuthProvider\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.V; },\n/* harmony export */   \"SignInMethod\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.S; },\n/* harmony export */   \"TwitterAuthProvider\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.W; },\n/* harmony export */   \"UserImpl\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aF; },\n/* harmony export */   \"_assert\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ax; },\n/* harmony export */   \"_castAuth\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aE; },\n/* harmony export */   \"_fail\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.at; },\n/* harmony export */   \"_generateEventId\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aI; },\n/* harmony export */   \"_getClientVersion\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aH; },\n/* harmony export */   \"_getInstance\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ay; },\n/* harmony export */   \"_getRedirectResult\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aB; },\n/* harmony export */   \"_overrideRedirectResult\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aC; },\n/* harmony export */   \"_persistenceKeyName\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.az; },\n/* harmony export */   \"addFrameworkForLogging\": function() { return /* binding */ addFrameworkForLogging; },\n/* harmony export */   \"applyActionCode\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.a2; },\n/* harmony export */   \"beforeAuthStateChanged\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.t; },\n/* harmony export */   \"browserLocalPersistence\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.b; },\n/* harmony export */   \"browserPopupRedirectResolver\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.k; },\n/* harmony export */   \"browserSessionPersistence\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.a; },\n/* harmony export */   \"checkActionCode\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.a3; },\n/* harmony export */   \"confirmPasswordReset\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.a1; },\n/* harmony export */   \"connectAuthEmulator\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.G; },\n/* harmony export */   \"cordovaPopupRedirectResolver\": function() { return /* binding */ cordovaPopupRedirectResolver; },\n/* harmony export */   \"createUserWithEmailAndPassword\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.a5; },\n/* harmony export */   \"debugErrorMap\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.B; },\n/* harmony export */   \"deleteUser\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.z; },\n/* harmony export */   \"fetchSignInMethodsForEmail\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aa; },\n/* harmony export */   \"getAdditionalUserInfo\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.al; },\n/* harmony export */   \"getAuth\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.n; },\n/* harmony export */   \"getIdToken\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ai; },\n/* harmony export */   \"getIdTokenResult\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aj; },\n/* harmony export */   \"getMultiFactorResolver\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.an; },\n/* harmony export */   \"getRedirectResult\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.j; },\n/* harmony export */   \"inMemoryPersistence\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.L; },\n/* harmony export */   \"indexedDBLocalPersistence\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.i; },\n/* harmony export */   \"initializeAuth\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.E; },\n/* harmony export */   \"isSignInWithEmailLink\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.a8; },\n/* harmony export */   \"linkWithCredential\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.Z; },\n/* harmony export */   \"linkWithPhoneNumber\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.l; },\n/* harmony export */   \"linkWithPopup\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.d; },\n/* harmony export */   \"linkWithRedirect\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.g; },\n/* harmony export */   \"multiFactor\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ao; },\n/* harmony export */   \"onAuthStateChanged\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.v; },\n/* harmony export */   \"onIdTokenChanged\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.q; },\n/* harmony export */   \"parseActionCodeURL\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ae; },\n/* harmony export */   \"prodErrorMap\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.C; },\n/* harmony export */   \"reauthenticateWithCredential\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__._; },\n/* harmony export */   \"reauthenticateWithPhoneNumber\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.r; },\n/* harmony export */   \"reauthenticateWithPopup\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.e; },\n/* harmony export */   \"reauthenticateWithRedirect\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.h; },\n/* harmony export */   \"reload\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.am; },\n/* harmony export */   \"sendEmailVerification\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ab; },\n/* harmony export */   \"sendPasswordResetEmail\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.a0; },\n/* harmony export */   \"sendSignInLinkToEmail\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.a7; },\n/* harmony export */   \"setPersistence\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.p; },\n/* harmony export */   \"signInAnonymously\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.X; },\n/* harmony export */   \"signInWithCredential\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.Y; },\n/* harmony export */   \"signInWithCustomToken\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.$; },\n/* harmony export */   \"signInWithEmailAndPassword\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.a6; },\n/* harmony export */   \"signInWithEmailLink\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.a9; },\n/* harmony export */   \"signInWithPhoneNumber\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.s; },\n/* harmony export */   \"signInWithPopup\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.c; },\n/* harmony export */   \"signInWithRedirect\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.f; },\n/* harmony export */   \"signOut\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.y; },\n/* harmony export */   \"unlink\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ak; },\n/* harmony export */   \"updateCurrentUser\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.x; },\n/* harmony export */   \"updateEmail\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ag; },\n/* harmony export */   \"updatePassword\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ah; },\n/* harmony export */   \"updatePhoneNumber\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.u; },\n/* harmony export */   \"updateProfile\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.af; },\n/* harmony export */   \"useDeviceLanguage\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.w; },\n/* harmony export */   \"verifyBeforeUpdateEmail\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ac; },\n/* harmony export */   \"verifyPasswordResetCode\": function() { return /* reexport safe */ _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.a4; }\n/* harmony export */ });\n/* harmony import */ var _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-90ebcfae.js */ \"./node_modules/@firebase/auth/dist/esm2017/index-90ebcfae.js\");\n/* harmony import */ var _firebase_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @firebase/util */ \"./node_modules/@firebase/util/dist/index.esm2017.js\");\n/* harmony import */ var _firebase_app__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @firebase/app */ \"./node_modules/@firebase/app/dist/esm/index.esm2017.js\");\n/* harmony import */ var _firebase_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @firebase/logger */ \"./node_modules/@firebase/logger/dist/esm/index.esm2017.js\");\n/* harmony import */ var _firebase_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @firebase/component */ \"./node_modules/@firebase/component/dist/esm/index.esm2017.js\");\n\n\n\n\n\n\n\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction _cordovaWindow() {\r\n    return window;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * How long to wait after the app comes back into focus before concluding that\r\n * the user closed the sign in tab.\r\n */\r\nconst REDIRECT_TIMEOUT_MS = 2000;\r\n/**\r\n * Generates the URL for the OAuth handler.\r\n */\r\nasync function _generateHandlerUrl(auth, event, provider) {\r\n    var _a;\r\n    // Get the cordova plugins\r\n    const { BuildInfo } = _cordovaWindow();\r\n    (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aq)(event.sessionId, 'AuthEvent did not contain a session ID');\r\n    const sessionDigest = await computeSha256(event.sessionId);\r\n    const additionalParams = {};\r\n    if ((0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ar)()) {\r\n        // iOS app identifier\r\n        additionalParams['ibi'] = BuildInfo.packageName;\r\n    }\r\n    else if ((0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.as)()) {\r\n        // Android app identifier\r\n        additionalParams['apn'] = BuildInfo.packageName;\r\n    }\r\n    else {\r\n        (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.at)(auth, \"operation-not-supported-in-this-environment\" /* OPERATION_NOT_SUPPORTED */);\r\n    }\r\n    // Add the display name if available\r\n    if (BuildInfo.displayName) {\r\n        additionalParams['appDisplayName'] = BuildInfo.displayName;\r\n    }\r\n    // Attached the hashed session ID\r\n    additionalParams['sessionId'] = sessionDigest;\r\n    return (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.au)(auth, provider, event.type, undefined, (_a = event.eventId) !== null && _a !== void 0 ? _a : undefined, additionalParams);\r\n}\r\n/**\r\n * Validates that this app is valid for this project configuration\r\n */\r\nasync function _validateOrigin(auth) {\r\n    const { BuildInfo } = _cordovaWindow();\r\n    const request = {};\r\n    if ((0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ar)()) {\r\n        request.iosBundleId = BuildInfo.packageName;\r\n    }\r\n    else if ((0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.as)()) {\r\n        request.androidPackageName = BuildInfo.packageName;\r\n    }\r\n    else {\r\n        (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.at)(auth, \"operation-not-supported-in-this-environment\" /* OPERATION_NOT_SUPPORTED */);\r\n    }\r\n    // Will fail automatically if package name is not authorized\r\n    await (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.av)(auth, request);\r\n}\r\nfunction _performRedirect(handlerUrl) {\r\n    // Get the cordova plugins\r\n    const { cordova } = _cordovaWindow();\r\n    return new Promise(resolve => {\r\n        cordova.plugins.browsertab.isAvailable(browserTabIsAvailable => {\r\n            let iabRef = null;\r\n            if (browserTabIsAvailable) {\r\n                cordova.plugins.browsertab.openUrl(handlerUrl);\r\n            }\r\n            else {\r\n                // TODO: Return the inappbrowser ref that's returned from the open call\r\n                iabRef = cordova.InAppBrowser.open(handlerUrl, (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ap)() ? '_blank' : '_system', 'location=yes');\r\n            }\r\n            resolve(iabRef);\r\n        });\r\n    });\r\n}\r\n/**\r\n * This function waits for app activity to be seen before resolving. It does\r\n * this by attaching listeners to various dom events. Once the app is determined\r\n * to be visible, this promise resolves. AFTER that resolution, the listeners\r\n * are detached and any browser tabs left open will be closed.\r\n */\r\nasync function _waitForAppResume(auth, eventListener, iabRef) {\r\n    // Get the cordova plugins\r\n    const { cordova } = _cordovaWindow();\r\n    let cleanup = () => { };\r\n    try {\r\n        await new Promise((resolve, reject) => {\r\n            let onCloseTimer = null;\r\n            // DEFINE ALL THE CALLBACKS =====\r\n            function authEventSeen() {\r\n                var _a;\r\n                // Auth event was detected. Resolve this promise and close the extra\r\n                // window if it's still open.\r\n                resolve();\r\n                const closeBrowserTab = (_a = cordova.plugins.browsertab) === null || _a === void 0 ? void 0 : _a.close;\r\n                if (typeof closeBrowserTab === 'function') {\r\n                    closeBrowserTab();\r\n                }\r\n                // Close inappbrowser emebedded webview in iOS7 and 8 case if still\r\n                // open.\r\n                if (typeof (iabRef === null || iabRef === void 0 ? void 0 : iabRef.close) === 'function') {\r\n                    iabRef.close();\r\n                }\r\n            }\r\n            function resumed() {\r\n                if (onCloseTimer) {\r\n                    // This code already ran; do not rerun.\r\n                    return;\r\n                }\r\n                onCloseTimer = window.setTimeout(() => {\r\n                    // Wait two seeconds after resume then reject.\r\n                    reject((0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aw)(auth, \"redirect-cancelled-by-user\" /* REDIRECT_CANCELLED_BY_USER */));\r\n                }, REDIRECT_TIMEOUT_MS);\r\n            }\r\n            function visibilityChanged() {\r\n                if ((document === null || document === void 0 ? void 0 : document.visibilityState) === 'visible') {\r\n                    resumed();\r\n                }\r\n            }\r\n            // ATTACH ALL THE LISTENERS =====\r\n            // Listen for the auth event\r\n            eventListener.addPassiveListener(authEventSeen);\r\n            // Listen for resume and visibility events\r\n            document.addEventListener('resume', resumed, false);\r\n            if ((0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.as)()) {\r\n                document.addEventListener('visibilitychange', visibilityChanged, false);\r\n            }\r\n            // SETUP THE CLEANUP FUNCTION =====\r\n            cleanup = () => {\r\n                eventListener.removePassiveListener(authEventSeen);\r\n                document.removeEventListener('resume', resumed, false);\r\n                document.removeEventListener('visibilitychange', visibilityChanged, false);\r\n                if (onCloseTimer) {\r\n                    window.clearTimeout(onCloseTimer);\r\n                }\r\n            };\r\n        });\r\n    }\r\n    finally {\r\n        cleanup();\r\n    }\r\n}\r\n/**\r\n * Checks the configuration of the Cordova environment. This has no side effect\r\n * if the configuration is correct; otherwise it throws an error with the\r\n * missing plugin.\r\n */\r\nfunction _checkCordovaConfiguration(auth) {\r\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n    const win = _cordovaWindow();\r\n    // Check all dependencies installed.\r\n    // https://github.com/nordnet/cordova-universal-links-plugin\r\n    // Note that cordova-universal-links-plugin has been abandoned.\r\n    // A fork with latest fixes is available at:\r\n    // https://www.npmjs.com/package/cordova-universal-links-plugin-fix\r\n    (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ax)(typeof ((_a = win === null || win === void 0 ? void 0 : win.universalLinks) === null || _a === void 0 ? void 0 : _a.subscribe) === 'function', auth, \"invalid-cordova-configuration\" /* INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-universal-links-plugin-fix'\r\n    });\r\n    // https://www.npmjs.com/package/cordova-plugin-buildinfo\r\n    (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ax)(typeof ((_b = win === null || win === void 0 ? void 0 : win.BuildInfo) === null || _b === void 0 ? void 0 : _b.packageName) !== 'undefined', auth, \"invalid-cordova-configuration\" /* INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-plugin-buildInfo'\r\n    });\r\n    // https://github.com/google/cordova-plugin-browsertab\r\n    (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ax)(typeof ((_e = (_d = (_c = win === null || win === void 0 ? void 0 : win.cordova) === null || _c === void 0 ? void 0 : _c.plugins) === null || _d === void 0 ? void 0 : _d.browsertab) === null || _e === void 0 ? void 0 : _e.openUrl) === 'function', auth, \"invalid-cordova-configuration\" /* INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-plugin-browsertab'\r\n    });\r\n    (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ax)(typeof ((_h = (_g = (_f = win === null || win === void 0 ? void 0 : win.cordova) === null || _f === void 0 ? void 0 : _f.plugins) === null || _g === void 0 ? void 0 : _g.browsertab) === null || _h === void 0 ? void 0 : _h.isAvailable) === 'function', auth, \"invalid-cordova-configuration\" /* INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-plugin-browsertab'\r\n    });\r\n    // https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-inappbrowser/\r\n    (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ax)(typeof ((_k = (_j = win === null || win === void 0 ? void 0 : win.cordova) === null || _j === void 0 ? void 0 : _j.InAppBrowser) === null || _k === void 0 ? void 0 : _k.open) === 'function', auth, \"invalid-cordova-configuration\" /* INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-plugin-inappbrowser'\r\n    });\r\n}\r\n/**\r\n * Computes the SHA-256 of a session ID. The SubtleCrypto interface is only\r\n * available in \"secure\" contexts, which covers Cordova (which is served on a file\r\n * protocol).\r\n */\r\nasync function computeSha256(sessionId) {\r\n    const bytes = stringToArrayBuffer(sessionId);\r\n    // TODO: For IE11 crypto has a different name and this operation comes back\r\n    //       as an object, not a promise. This is the old proposed standard that\r\n    //       is used by IE11:\r\n    // https://www.w3.org/TR/2013/WD-WebCryptoAPI-20130108/#cryptooperation-interface\r\n    const buf = await crypto.subtle.digest('SHA-256', bytes);\r\n    const arr = Array.from(new Uint8Array(buf));\r\n    return arr.map(num => num.toString(16).padStart(2, '0')).join('');\r\n}\r\nfunction stringToArrayBuffer(str) {\r\n    // This function is only meant to deal with an ASCII charset and makes\r\n    // certain simplifying assumptions.\r\n    (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aq)(/[0-9a-zA-Z]+/.test(str), 'Can only convert alpha-numeric strings');\r\n    if (typeof TextEncoder !== 'undefined') {\r\n        return new TextEncoder().encode(str);\r\n    }\r\n    const buff = new ArrayBuffer(str.length);\r\n    const view = new Uint8Array(buff);\r\n    for (let i = 0; i < str.length; i++) {\r\n        view[i] = str.charCodeAt(i);\r\n    }\r\n    return view;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst SESSION_ID_LENGTH = 20;\r\n/** Custom AuthEventManager that adds passive listeners to events */\r\nclass CordovaAuthEventManager extends _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aA {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.passiveListeners = new Set();\r\n        this.initPromise = new Promise(resolve => {\r\n            this.resolveInialized = resolve;\r\n        });\r\n    }\r\n    addPassiveListener(cb) {\r\n        this.passiveListeners.add(cb);\r\n    }\r\n    removePassiveListener(cb) {\r\n        this.passiveListeners.delete(cb);\r\n    }\r\n    // In a Cordova environment, this manager can live through multiple redirect\r\n    // operations\r\n    resetRedirect() {\r\n        this.queuedRedirectEvent = null;\r\n        this.hasHandledPotentialRedirect = false;\r\n    }\r\n    /** Override the onEvent method */\r\n    onEvent(event) {\r\n        this.resolveInialized();\r\n        this.passiveListeners.forEach(cb => cb(event));\r\n        return super.onEvent(event);\r\n    }\r\n    async initialized() {\r\n        await this.initPromise;\r\n    }\r\n}\r\n/**\r\n * Generates a (partial) {@link AuthEvent}.\r\n */\r\nfunction _generateNewEvent(auth, type, eventId = null) {\r\n    return {\r\n        type,\r\n        eventId,\r\n        urlResponse: null,\r\n        sessionId: generateSessionId(),\r\n        postBody: null,\r\n        tenantId: auth.tenantId,\r\n        error: (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aw)(auth, \"no-auth-event\" /* NO_AUTH_EVENT */)\r\n    };\r\n}\r\nfunction _savePartialEvent(auth, event) {\r\n    return storage()._set(persistenceKey(auth), event);\r\n}\r\nasync function _getAndRemoveEvent(auth) {\r\n    const event = (await storage()._get(persistenceKey(auth)));\r\n    if (event) {\r\n        await storage()._remove(persistenceKey(auth));\r\n    }\r\n    return event;\r\n}\r\nfunction _eventFromPartialAndUrl(partialEvent, url) {\r\n    var _a, _b;\r\n    // Parse the deep link within the dynamic link URL.\r\n    const callbackUrl = _getDeepLinkFromCallback(url);\r\n    // Confirm it is actually a callback URL.\r\n    // Currently the universal link will be of this format:\r\n    // https://<AUTH_DOMAIN>/__/auth/callback<OAUTH_RESPONSE>\r\n    // This is a fake URL but is not intended to take the user anywhere\r\n    // and just redirect to the app.\r\n    if (callbackUrl.includes('/__/auth/callback')) {\r\n        // Check if there is an error in the URL.\r\n        // This mechanism is also used to pass errors back to the app:\r\n        // https://<AUTH_DOMAIN>/__/auth/callback?firebaseError=<STRINGIFIED_ERROR>\r\n        const params = searchParamsOrEmpty(callbackUrl);\r\n        // Get the error object corresponding to the stringified error if found.\r\n        const errorObject = params['firebaseError']\r\n            ? parseJsonOrNull(decodeURIComponent(params['firebaseError']))\r\n            : null;\r\n        const code = (_b = (_a = errorObject === null || errorObject === void 0 ? void 0 : errorObject['code']) === null || _a === void 0 ? void 0 : _a.split('auth/')) === null || _b === void 0 ? void 0 : _b[1];\r\n        const error = code ? (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aw)(code) : null;\r\n        if (error) {\r\n            return {\r\n                type: partialEvent.type,\r\n                eventId: partialEvent.eventId,\r\n                tenantId: partialEvent.tenantId,\r\n                error,\r\n                urlResponse: null,\r\n                sessionId: null,\r\n                postBody: null\r\n            };\r\n        }\r\n        else {\r\n            return {\r\n                type: partialEvent.type,\r\n                eventId: partialEvent.eventId,\r\n                tenantId: partialEvent.tenantId,\r\n                sessionId: partialEvent.sessionId,\r\n                urlResponse: callbackUrl,\r\n                postBody: null\r\n            };\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction generateSessionId() {\r\n    const chars = [];\r\n    const allowedChars = '1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n    for (let i = 0; i < SESSION_ID_LENGTH; i++) {\r\n        const idx = Math.floor(Math.random() * allowedChars.length);\r\n        chars.push(allowedChars.charAt(idx));\r\n    }\r\n    return chars.join('');\r\n}\r\nfunction storage() {\r\n    return (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.ay)(_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.b);\r\n}\r\nfunction persistenceKey(auth) {\r\n    return (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.az)(\"authEvent\" /* AUTH_EVENT */, auth.config.apiKey, auth.name);\r\n}\r\nfunction parseJsonOrNull(json) {\r\n    try {\r\n        return JSON.parse(json);\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n}\r\n// Exported for testing\r\nfunction _getDeepLinkFromCallback(url) {\r\n    const params = searchParamsOrEmpty(url);\r\n    const link = params['link'] ? decodeURIComponent(params['link']) : undefined;\r\n    // Double link case (automatic redirect)\r\n    const doubleDeepLink = searchParamsOrEmpty(link)['link'];\r\n    // iOS custom scheme links.\r\n    const iOSDeepLink = params['deep_link_id']\r\n        ? decodeURIComponent(params['deep_link_id'])\r\n        : undefined;\r\n    const iOSDoubleDeepLink = searchParamsOrEmpty(iOSDeepLink)['link'];\r\n    return iOSDoubleDeepLink || iOSDeepLink || doubleDeepLink || link || url;\r\n}\r\n/**\r\n * Optimistically tries to get search params from a string, or else returns an\r\n * empty search params object.\r\n */\r\nfunction searchParamsOrEmpty(url) {\r\n    if (!(url === null || url === void 0 ? void 0 : url.includes('?'))) {\r\n        return {};\r\n    }\r\n    const [_, ...rest] = url.split('?');\r\n    return (0,_firebase_util__WEBPACK_IMPORTED_MODULE_1__.querystringDecode)(rest.join('?'));\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * How long to wait for the initial auth event before concluding no\r\n * redirect pending\r\n */\r\nconst INITIAL_EVENT_TIMEOUT_MS = 500;\r\nclass CordovaPopupRedirectResolver {\r\n    constructor() {\r\n        this._redirectPersistence = _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.a;\r\n        this._shouldInitProactively = true; // This is lightweight for Cordova\r\n        this.eventManagers = new Map();\r\n        this.originValidationPromises = {};\r\n        this._completeRedirectFn = _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aB;\r\n        this._overrideRedirectResult = _index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aC;\r\n    }\r\n    async _initialize(auth) {\r\n        const key = auth._key();\r\n        let manager = this.eventManagers.get(key);\r\n        if (!manager) {\r\n            manager = new CordovaAuthEventManager(auth);\r\n            this.eventManagers.set(key, manager);\r\n            this.attachCallbackListeners(auth, manager);\r\n        }\r\n        return manager;\r\n    }\r\n    _openPopup(auth) {\r\n        (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.at)(auth, \"operation-not-supported-in-this-environment\" /* OPERATION_NOT_SUPPORTED */);\r\n    }\r\n    async _openRedirect(auth, provider, authType, eventId) {\r\n        _checkCordovaConfiguration(auth);\r\n        const manager = await this._initialize(auth);\r\n        await manager.initialized();\r\n        // Reset the persisted redirect states. This does not matter on Web where\r\n        // the redirect always blows away application state entirely. On Cordova,\r\n        // the app maintains control flow through the redirect.\r\n        manager.resetRedirect();\r\n        (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aD)();\r\n        await this._originValidation(auth);\r\n        const event = _generateNewEvent(auth, authType, eventId);\r\n        await _savePartialEvent(auth, event);\r\n        const url = await _generateHandlerUrl(auth, event, provider);\r\n        const iabRef = await _performRedirect(url);\r\n        return _waitForAppResume(auth, manager, iabRef);\r\n    }\r\n    _isIframeWebStorageSupported(_auth, _cb) {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    _originValidation(auth) {\r\n        const key = auth._key();\r\n        if (!this.originValidationPromises[key]) {\r\n            this.originValidationPromises[key] = _validateOrigin(auth);\r\n        }\r\n        return this.originValidationPromises[key];\r\n    }\r\n    attachCallbackListeners(auth, manager) {\r\n        // Get the global plugins\r\n        const { universalLinks, handleOpenURL, BuildInfo } = _cordovaWindow();\r\n        const noEventTimeout = setTimeout(async () => {\r\n            // We didn't see that initial event. Clear any pending object and\r\n            // dispatch no event\r\n            await _getAndRemoveEvent(auth);\r\n            manager.onEvent(generateNoEvent());\r\n        }, INITIAL_EVENT_TIMEOUT_MS);\r\n        const universalLinksCb = async (eventData) => {\r\n            // We have an event so we can clear the no event timeout\r\n            clearTimeout(noEventTimeout);\r\n            const partialEvent = await _getAndRemoveEvent(auth);\r\n            let finalEvent = null;\r\n            if (partialEvent && (eventData === null || eventData === void 0 ? void 0 : eventData['url'])) {\r\n                finalEvent = _eventFromPartialAndUrl(partialEvent, eventData['url']);\r\n            }\r\n            // If finalEvent is never filled, trigger with no event\r\n            manager.onEvent(finalEvent || generateNoEvent());\r\n        };\r\n        // Universal links subscriber doesn't exist for iOS, so we need to check\r\n        if (typeof universalLinks !== 'undefined' &&\r\n            typeof universalLinks.subscribe === 'function') {\r\n            universalLinks.subscribe(null, universalLinksCb);\r\n        }\r\n        // iOS 7 or 8 custom URL schemes.\r\n        // This is also the current default behavior for iOS 9+.\r\n        // For this to work, cordova-plugin-customurlscheme needs to be installed.\r\n        // https://github.com/EddyVerbruggen/Custom-URL-scheme\r\n        // Do not overwrite the existing developer's URL handler.\r\n        const existingHandleOpenURL = handleOpenURL;\r\n        const packagePrefix = `${BuildInfo.packageName.toLowerCase()}://`;\r\n        _cordovaWindow().handleOpenURL = async (url) => {\r\n            if (url.toLowerCase().startsWith(packagePrefix)) {\r\n                // We want this intentionally to float\r\n                // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n                universalLinksCb({ url });\r\n            }\r\n            // Call the developer's handler if it is present.\r\n            if (typeof existingHandleOpenURL === 'function') {\r\n                try {\r\n                    existingHandleOpenURL(url);\r\n                }\r\n                catch (e) {\r\n                    // This is a developer error. Don't stop the flow of the SDK.\r\n                    console.error(e);\r\n                }\r\n            }\r\n        };\r\n    }\r\n}\r\n/**\r\n * An implementation of {@link PopupRedirectResolver} suitable for Cordova\r\n * based applications.\r\n *\r\n * @public\r\n */\r\nconst cordovaPopupRedirectResolver = CordovaPopupRedirectResolver;\r\nfunction generateNoEvent() {\r\n    return {\r\n        type: \"unknown\" /* UNKNOWN */,\r\n        eventId: null,\r\n        sessionId: null,\r\n        urlResponse: null,\r\n        postBody: null,\r\n        tenantId: null,\r\n        error: (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aw)(\"no-auth-event\" /* NO_AUTH_EVENT */)\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// This function should only be called by frameworks (e.g. FirebaseUI-web) to log their usage.\r\n// It is not intended for direct use by developer apps. NO jsdoc here to intentionally leave it out\r\n// of autogenerated documentation pages to reduce accidental misuse.\r\nfunction addFrameworkForLogging(auth, framework) {\r\n    (0,_index_90ebcfae_js__WEBPACK_IMPORTED_MODULE_0__.aE)(auth)._logFramework(framework);\r\n}\n\n\n//# sourceMappingURL=internal.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2F1dGgvZGlzdC9lc20yMDE3L2ludGVybmFsLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdWI7QUFDbzBEO0FBQ3hzRTtBQUM1QjtBQUNSO0FBQ1c7QUFDRzs7QUFFN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxZQUFZO0FBQ3hCLElBQUksc0RBQVc7QUFDZjtBQUNBO0FBQ0EsUUFBUSxzREFBTTtBQUNkO0FBQ0E7QUFDQTtBQUNBLGFBQWEsc0RBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFLO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHNEQUFlO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFlBQVk7QUFDeEI7QUFDQSxRQUFRLHNEQUFNO0FBQ2Q7QUFDQTtBQUNBLGFBQWEsc0RBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBSztBQUNiO0FBQ0E7QUFDQSxVQUFVLHNEQUFpQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxZQUFZLFVBQVU7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxzREFBVTtBQUN6RTtBQUNBO0FBQ0Es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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksc0RBQVM7QUFDYjs7QUFFZ0U7QUFDaEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hdXRoL2Rpc3QvZXNtMjAxNy9pbnRlcm5hbC5qcz9hYTZhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFwIGFzIF9pc0lPUzdPcjgsIGFxIGFzIGRlYnVnQXNzZXJ0LCBhciBhcyBfaXNJT1MsIGFzIGFzIF9pc0FuZHJvaWQsIGF0IGFzIF9mYWlsLCBhdSBhcyBfZ2V0UmVkaXJlY3RVcmwsIGF2IGFzIF9nZXRQcm9qZWN0Q29uZmlnLCBhdyBhcyBfY3JlYXRlRXJyb3IsIGF4IGFzIF9hc3NlcnQsIGF5IGFzIF9nZXRJbnN0YW5jZSwgYiBhcyBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSwgYXogYXMgX3BlcnNpc3RlbmNlS2V5TmFtZSwgYUEgYXMgQXV0aEV2ZW50TWFuYWdlciwgYSBhcyBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlLCBhQiBhcyBfZ2V0UmVkaXJlY3RSZXN1bHQsIGFDIGFzIF9vdmVycmlkZVJlZGlyZWN0UmVzdWx0LCBhRCBhcyBfY2xlYXJSZWRpcmVjdE91dGNvbWVzLCBhRSBhcyBfY2FzdEF1dGggfSBmcm9tICcuL2luZGV4LTkwZWJjZmFlLmpzJztcbmV4cG9ydCB7IEEgYXMgQWN0aW9uQ29kZU9wZXJhdGlvbiwgYWQgYXMgQWN0aW9uQ29kZVVSTCwgSCBhcyBBdXRoQ3JlZGVudGlhbCwgRCBhcyBBdXRoRXJyb3JDb2RlcywgYUcgYXMgQXV0aEltcGwsIGFKIGFzIEF1dGhQb3B1cCwgSSBhcyBFbWFpbEF1dGhDcmVkZW50aWFsLCBNIGFzIEVtYWlsQXV0aFByb3ZpZGVyLCBOIGFzIEZhY2Vib29rQXV0aFByb3ZpZGVyLCBGIGFzIEZhY3RvcklkLCBhSyBhcyBGZXRjaFByb3ZpZGVyLCBUIGFzIEdpdGh1YkF1dGhQcm92aWRlciwgUSBhcyBHb29nbGVBdXRoUHJvdmlkZXIsIEogYXMgT0F1dGhDcmVkZW50aWFsLCBVIGFzIE9BdXRoUHJvdmlkZXIsIE8gYXMgT3BlcmF0aW9uVHlwZSwgSyBhcyBQaG9uZUF1dGhDcmVkZW50aWFsLCBQIGFzIFBob25lQXV0aFByb3ZpZGVyLCBtIGFzIFBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3IsIG8gYXMgUHJvdmlkZXJJZCwgUiBhcyBSZWNhcHRjaGFWZXJpZmllciwgYUwgYXMgU0FNTEF1dGhDcmVkZW50aWFsLCBWIGFzIFNBTUxBdXRoUHJvdmlkZXIsIFMgYXMgU2lnbkluTWV0aG9kLCBXIGFzIFR3aXR0ZXJBdXRoUHJvdmlkZXIsIGFGIGFzIFVzZXJJbXBsLCBheCBhcyBfYXNzZXJ0LCBhRSBhcyBfY2FzdEF1dGgsIGF0IGFzIF9mYWlsLCBhSSBhcyBfZ2VuZXJhdGVFdmVudElkLCBhSCBhcyBfZ2V0Q2xpZW50VmVyc2lvbiwgYXkgYXMgX2dldEluc3RhbmNlLCBhQiBhcyBfZ2V0UmVkaXJlY3RSZXN1bHQsIGFDIGFzIF9vdmVycmlkZVJlZGlyZWN0UmVzdWx0LCBheiBhcyBfcGVyc2lzdGVuY2VLZXlOYW1lLCBhMiBhcyBhcHBseUFjdGlvbkNvZGUsIHQgYXMgYmVmb3JlQXV0aFN0YXRlQ2hhbmdlZCwgYiBhcyBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSwgayBhcyBicm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyLCBhIGFzIGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UsIGEzIGFzIGNoZWNrQWN0aW9uQ29kZSwgYTEgYXMgY29uZmlybVBhc3N3b3JkUmVzZXQsIEcgYXMgY29ubmVjdEF1dGhFbXVsYXRvciwgYTUgYXMgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkLCBCIGFzIGRlYnVnRXJyb3JNYXAsIHogYXMgZGVsZXRlVXNlciwgYWEgYXMgZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwsIGFsIGFzIGdldEFkZGl0aW9uYWxVc2VySW5mbywgbiBhcyBnZXRBdXRoLCBhaSBhcyBnZXRJZFRva2VuLCBhaiBhcyBnZXRJZFRva2VuUmVzdWx0LCBhbiBhcyBnZXRNdWx0aUZhY3RvclJlc29sdmVyLCBqIGFzIGdldFJlZGlyZWN0UmVzdWx0LCBMIGFzIGluTWVtb3J5UGVyc2lzdGVuY2UsIGkgYXMgaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSwgRSBhcyBpbml0aWFsaXplQXV0aCwgYTggYXMgaXNTaWduSW5XaXRoRW1haWxMaW5rLCBaIGFzIGxpbmtXaXRoQ3JlZGVudGlhbCwgbCBhcyBsaW5rV2l0aFBob25lTnVtYmVyLCBkIGFzIGxpbmtXaXRoUG9wdXAsIGcgYXMgbGlua1dpdGhSZWRpcmVjdCwgYW8gYXMgbXVsdGlGYWN0b3IsIHYgYXMgb25BdXRoU3RhdGVDaGFuZ2VkLCBxIGFzIG9uSWRUb2tlbkNoYW5nZWQsIGFlIGFzIHBhcnNlQWN0aW9uQ29kZVVSTCwgQyBhcyBwcm9kRXJyb3JNYXAsIF8gYXMgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbCwgciBhcyByZWF1dGhlbnRpY2F0ZVdpdGhQaG9uZU51bWJlciwgZSBhcyByZWF1dGhlbnRpY2F0ZVdpdGhQb3B1cCwgaCBhcyByZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCwgYW0gYXMgcmVsb2FkLCBhYiBhcyBzZW5kRW1haWxWZXJpZmljYXRpb24sIGEwIGFzIHNlbmRQYXNzd29yZFJlc2V0RW1haWwsIGE3IGFzIHNlbmRTaWduSW5MaW5rVG9FbWFpbCwgcCBhcyBzZXRQZXJzaXN0ZW5jZSwgWCBhcyBzaWduSW5Bbm9ueW1vdXNseSwgWSBhcyBzaWduSW5XaXRoQ3JlZGVudGlhbCwgJCBhcyBzaWduSW5XaXRoQ3VzdG9tVG9rZW4sIGE2IGFzIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkLCBhOSBhcyBzaWduSW5XaXRoRW1haWxMaW5rLCBzIGFzIHNpZ25JbldpdGhQaG9uZU51bWJlciwgYyBhcyBzaWduSW5XaXRoUG9wdXAsIGYgYXMgc2lnbkluV2l0aFJlZGlyZWN0LCB5IGFzIHNpZ25PdXQsIGFrIGFzIHVubGluaywgeCBhcyB1cGRhdGVDdXJyZW50VXNlciwgYWcgYXMgdXBkYXRlRW1haWwsIGFoIGFzIHVwZGF0ZVBhc3N3b3JkLCB1IGFzIHVwZGF0ZVBob25lTnVtYmVyLCBhZiBhcyB1cGRhdGVQcm9maWxlLCB3IGFzIHVzZURldmljZUxhbmd1YWdlLCBhYyBhcyB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbCwgYTQgYXMgdmVyaWZ5UGFzc3dvcmRSZXNldENvZGUgfSBmcm9tICcuL2luZGV4LTkwZWJjZmFlLmpzJztcbmltcG9ydCB7IHF1ZXJ5c3RyaW5nRGVjb2RlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0ICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCAndHNsaWInO1xuaW1wb3J0ICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9jb3Jkb3ZhV2luZG93KCkge1xyXG4gICAgcmV0dXJuIHdpbmRvdztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSG93IGxvbmcgdG8gd2FpdCBhZnRlciB0aGUgYXBwIGNvbWVzIGJhY2sgaW50byBmb2N1cyBiZWZvcmUgY29uY2x1ZGluZyB0aGF0XHJcbiAqIHRoZSB1c2VyIGNsb3NlZCB0aGUgc2lnbiBpbiB0YWIuXHJcbiAqL1xyXG5jb25zdCBSRURJUkVDVF9USU1FT1VUX01TID0gMjAwMDtcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyB0aGUgVVJMIGZvciB0aGUgT0F1dGggaGFuZGxlci5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9nZW5lcmF0ZUhhbmRsZXJVcmwoYXV0aCwgZXZlbnQsIHByb3ZpZGVyKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICAvLyBHZXQgdGhlIGNvcmRvdmEgcGx1Z2luc1xyXG4gICAgY29uc3QgeyBCdWlsZEluZm8gfSA9IF9jb3Jkb3ZhV2luZG93KCk7XHJcbiAgICBkZWJ1Z0Fzc2VydChldmVudC5zZXNzaW9uSWQsICdBdXRoRXZlbnQgZGlkIG5vdCBjb250YWluIGEgc2Vzc2lvbiBJRCcpO1xyXG4gICAgY29uc3Qgc2Vzc2lvbkRpZ2VzdCA9IGF3YWl0IGNvbXB1dGVTaGEyNTYoZXZlbnQuc2Vzc2lvbklkKTtcclxuICAgIGNvbnN0IGFkZGl0aW9uYWxQYXJhbXMgPSB7fTtcclxuICAgIGlmIChfaXNJT1MoKSkge1xyXG4gICAgICAgIC8vIGlPUyBhcHAgaWRlbnRpZmllclxyXG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbXNbJ2liaSddID0gQnVpbGRJbmZvLnBhY2thZ2VOYW1lO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzQW5kcm9pZCgpKSB7XHJcbiAgICAgICAgLy8gQW5kcm9pZCBhcHAgaWRlbnRpZmllclxyXG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbXNbJ2FwbiddID0gQnVpbGRJbmZvLnBhY2thZ2VOYW1lO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgX2ZhaWwoYXV0aCwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgfVxyXG4gICAgLy8gQWRkIHRoZSBkaXNwbGF5IG5hbWUgaWYgYXZhaWxhYmxlXHJcbiAgICBpZiAoQnVpbGRJbmZvLmRpc3BsYXlOYW1lKSB7XHJcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtc1snYXBwRGlzcGxheU5hbWUnXSA9IEJ1aWxkSW5mby5kaXNwbGF5TmFtZTtcclxuICAgIH1cclxuICAgIC8vIEF0dGFjaGVkIHRoZSBoYXNoZWQgc2Vzc2lvbiBJRFxyXG4gICAgYWRkaXRpb25hbFBhcmFtc1snc2Vzc2lvbklkJ10gPSBzZXNzaW9uRGlnZXN0O1xyXG4gICAgcmV0dXJuIF9nZXRSZWRpcmVjdFVybChhdXRoLCBwcm92aWRlciwgZXZlbnQudHlwZSwgdW5kZWZpbmVkLCAoX2EgPSBldmVudC5ldmVudElkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQsIGFkZGl0aW9uYWxQYXJhbXMpO1xyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhhdCB0aGlzIGFwcCBpcyB2YWxpZCBmb3IgdGhpcyBwcm9qZWN0IGNvbmZpZ3VyYXRpb25cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF92YWxpZGF0ZU9yaWdpbihhdXRoKSB7XHJcbiAgICBjb25zdCB7IEJ1aWxkSW5mbyB9ID0gX2NvcmRvdmFXaW5kb3coKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7fTtcclxuICAgIGlmIChfaXNJT1MoKSkge1xyXG4gICAgICAgIHJlcXVlc3QuaW9zQnVuZGxlSWQgPSBCdWlsZEluZm8ucGFja2FnZU5hbWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNBbmRyb2lkKCkpIHtcclxuICAgICAgICByZXF1ZXN0LmFuZHJvaWRQYWNrYWdlTmFtZSA9IEJ1aWxkSW5mby5wYWNrYWdlTmFtZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIF9mYWlsKGF1dGgsIFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovKTtcclxuICAgIH1cclxuICAgIC8vIFdpbGwgZmFpbCBhdXRvbWF0aWNhbGx5IGlmIHBhY2thZ2UgbmFtZSBpcyBub3QgYXV0aG9yaXplZFxyXG4gICAgYXdhaXQgX2dldFByb2plY3RDb25maWcoYXV0aCwgcmVxdWVzdCk7XHJcbn1cclxuZnVuY3Rpb24gX3BlcmZvcm1SZWRpcmVjdChoYW5kbGVyVXJsKSB7XHJcbiAgICAvLyBHZXQgdGhlIGNvcmRvdmEgcGx1Z2luc1xyXG4gICAgY29uc3QgeyBjb3Jkb3ZhIH0gPSBfY29yZG92YVdpbmRvdygpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgIGNvcmRvdmEucGx1Z2lucy5icm93c2VydGFiLmlzQXZhaWxhYmxlKGJyb3dzZXJUYWJJc0F2YWlsYWJsZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBpYWJSZWYgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoYnJvd3NlclRhYklzQXZhaWxhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBjb3Jkb3ZhLnBsdWdpbnMuYnJvd3NlcnRhYi5vcGVuVXJsKGhhbmRsZXJVcmwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogUmV0dXJuIHRoZSBpbmFwcGJyb3dzZXIgcmVmIHRoYXQncyByZXR1cm5lZCBmcm9tIHRoZSBvcGVuIGNhbGxcclxuICAgICAgICAgICAgICAgIGlhYlJlZiA9IGNvcmRvdmEuSW5BcHBCcm93c2VyLm9wZW4oaGFuZGxlclVybCwgX2lzSU9TN09yOCgpID8gJ19ibGFuaycgOiAnX3N5c3RlbScsICdsb2NhdGlvbj15ZXMnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXNvbHZlKGlhYlJlZik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogVGhpcyBmdW5jdGlvbiB3YWl0cyBmb3IgYXBwIGFjdGl2aXR5IHRvIGJlIHNlZW4gYmVmb3JlIHJlc29sdmluZy4gSXQgZG9lc1xyXG4gKiB0aGlzIGJ5IGF0dGFjaGluZyBsaXN0ZW5lcnMgdG8gdmFyaW91cyBkb20gZXZlbnRzLiBPbmNlIHRoZSBhcHAgaXMgZGV0ZXJtaW5lZFxyXG4gKiB0byBiZSB2aXNpYmxlLCB0aGlzIHByb21pc2UgcmVzb2x2ZXMuIEFGVEVSIHRoYXQgcmVzb2x1dGlvbiwgdGhlIGxpc3RlbmVyc1xyXG4gKiBhcmUgZGV0YWNoZWQgYW5kIGFueSBicm93c2VyIHRhYnMgbGVmdCBvcGVuIHdpbGwgYmUgY2xvc2VkLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3dhaXRGb3JBcHBSZXN1bWUoYXV0aCwgZXZlbnRMaXN0ZW5lciwgaWFiUmVmKSB7XHJcbiAgICAvLyBHZXQgdGhlIGNvcmRvdmEgcGx1Z2luc1xyXG4gICAgY29uc3QgeyBjb3Jkb3ZhIH0gPSBfY29yZG92YVdpbmRvdygpO1xyXG4gICAgbGV0IGNsZWFudXAgPSAoKSA9PiB7IH07XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgbGV0IG9uQ2xvc2VUaW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgIC8vIERFRklORSBBTEwgVEhFIENBTExCQUNLUyA9PT09PVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBhdXRoRXZlbnRTZWVuKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgLy8gQXV0aCBldmVudCB3YXMgZGV0ZWN0ZWQuIFJlc29sdmUgdGhpcyBwcm9taXNlIGFuZCBjbG9zZSB0aGUgZXh0cmFcclxuICAgICAgICAgICAgICAgIC8vIHdpbmRvdyBpZiBpdCdzIHN0aWxsIG9wZW4uXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjbG9zZUJyb3dzZXJUYWIgPSAoX2EgPSBjb3Jkb3ZhLnBsdWdpbnMuYnJvd3NlcnRhYikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNsb3NlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjbG9zZUJyb3dzZXJUYWIgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZUJyb3dzZXJUYWIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIENsb3NlIGluYXBwYnJvd3NlciBlbWViZWRkZWQgd2VidmlldyBpbiBpT1M3IGFuZCA4IGNhc2UgaWYgc3RpbGxcclxuICAgICAgICAgICAgICAgIC8vIG9wZW4uXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChpYWJSZWYgPT09IG51bGwgfHwgaWFiUmVmID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpYWJSZWYuY2xvc2UpID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWFiUmVmLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzdW1lZCgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvbkNsb3NlVGltZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGNvZGUgYWxyZWFkeSByYW47IGRvIG5vdCByZXJ1bi5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvbkNsb3NlVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2FpdCB0d28gc2VlY29uZHMgYWZ0ZXIgcmVzdW1lIHRoZW4gcmVqZWN0LlxyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJyZWRpcmVjdC1jYW5jZWxsZWQtYnktdXNlclwiIC8qIFJFRElSRUNUX0NBTkNFTExFRF9CWV9VU0VSICovKSk7XHJcbiAgICAgICAgICAgICAgICB9LCBSRURJUkVDVF9USU1FT1VUX01TKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiB2aXNpYmlsaXR5Q2hhbmdlZCgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgoZG9jdW1lbnQgPT09IG51bGwgfHwgZG9jdW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSkgPT09ICd2aXNpYmxlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VtZWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBBVFRBQ0ggQUxMIFRIRSBMSVNURU5FUlMgPT09PT1cclxuICAgICAgICAgICAgLy8gTGlzdGVuIGZvciB0aGUgYXV0aCBldmVudFxyXG4gICAgICAgICAgICBldmVudExpc3RlbmVyLmFkZFBhc3NpdmVMaXN0ZW5lcihhdXRoRXZlbnRTZWVuKTtcclxuICAgICAgICAgICAgLy8gTGlzdGVuIGZvciByZXN1bWUgYW5kIHZpc2liaWxpdHkgZXZlbnRzXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc3VtZScsIHJlc3VtZWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgaWYgKF9pc0FuZHJvaWQoKSkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIHZpc2liaWxpdHlDaGFuZ2VkLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gU0VUVVAgVEhFIENMRUFOVVAgRlVOQ1RJT04gPT09PT1cclxuICAgICAgICAgICAgY2xlYW51cCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGV2ZW50TGlzdGVuZXIucmVtb3ZlUGFzc2l2ZUxpc3RlbmVyKGF1dGhFdmVudFNlZW4pO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzdW1lJywgcmVzdW1lZCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIHZpc2liaWxpdHlDaGFuZ2VkLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAob25DbG9zZVRpbWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChvbkNsb3NlVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgY2xlYW51cCgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgdGhlIGNvbmZpZ3VyYXRpb24gb2YgdGhlIENvcmRvdmEgZW52aXJvbm1lbnQuIFRoaXMgaGFzIG5vIHNpZGUgZWZmZWN0XHJcbiAqIGlmIHRoZSBjb25maWd1cmF0aW9uIGlzIGNvcnJlY3Q7IG90aGVyd2lzZSBpdCB0aHJvd3MgYW4gZXJyb3Igd2l0aCB0aGVcclxuICogbWlzc2luZyBwbHVnaW4uXHJcbiAqL1xyXG5mdW5jdGlvbiBfY2hlY2tDb3Jkb3ZhQ29uZmlndXJhdGlvbihhdXRoKSB7XHJcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaiwgX2s7XHJcbiAgICBjb25zdCB3aW4gPSBfY29yZG92YVdpbmRvdygpO1xyXG4gICAgLy8gQ2hlY2sgYWxsIGRlcGVuZGVuY2llcyBpbnN0YWxsZWQuXHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbm9yZG5ldC9jb3Jkb3ZhLXVuaXZlcnNhbC1saW5rcy1wbHVnaW5cclxuICAgIC8vIE5vdGUgdGhhdCBjb3Jkb3ZhLXVuaXZlcnNhbC1saW5rcy1wbHVnaW4gaGFzIGJlZW4gYWJhbmRvbmVkLlxyXG4gICAgLy8gQSBmb3JrIHdpdGggbGF0ZXN0IGZpeGVzIGlzIGF2YWlsYWJsZSBhdDpcclxuICAgIC8vIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2NvcmRvdmEtdW5pdmVyc2FsLWxpbmtzLXBsdWdpbi1maXhcclxuICAgIF9hc3NlcnQodHlwZW9mICgoX2EgPSB3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4udW5pdmVyc2FsTGlua3MpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdWJzY3JpYmUpID09PSAnZnVuY3Rpb24nLCBhdXRoLCBcImludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uXCIgLyogSU5WQUxJRF9DT1JET1ZBX0NPTkZJR1VSQVRJT04gKi8sIHtcclxuICAgICAgICBtaXNzaW5nUGx1Z2luOiAnY29yZG92YS11bml2ZXJzYWwtbGlua3MtcGx1Z2luLWZpeCdcclxuICAgIH0pO1xyXG4gICAgLy8gaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvY29yZG92YS1wbHVnaW4tYnVpbGRpbmZvXHJcbiAgICBfYXNzZXJ0KHR5cGVvZiAoKF9iID0gd2luID09PSBudWxsIHx8IHdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luLkJ1aWxkSW5mbykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnBhY2thZ2VOYW1lKSAhPT0gJ3VuZGVmaW5lZCcsIGF1dGgsIFwiaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb25cIiAvKiBJTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTiAqLywge1xyXG4gICAgICAgIG1pc3NpbmdQbHVnaW46ICdjb3Jkb3ZhLXBsdWdpbi1idWlsZEluZm8nXHJcbiAgICB9KTtcclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY29yZG92YS1wbHVnaW4tYnJvd3NlcnRhYlxyXG4gICAgX2Fzc2VydCh0eXBlb2YgKChfZSA9IChfZCA9IChfYyA9IHdpbiA9PT0gbnVsbCB8fCB3aW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdpbi5jb3Jkb3ZhKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MucGx1Z2lucykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLmJyb3dzZXJ0YWIpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5vcGVuVXJsKSA9PT0gJ2Z1bmN0aW9uJywgYXV0aCwgXCJpbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiIC8qIElOVkFMSURfQ09SRE9WQV9DT05GSUdVUkFUSU9OICovLCB7XHJcbiAgICAgICAgbWlzc2luZ1BsdWdpbjogJ2NvcmRvdmEtcGx1Z2luLWJyb3dzZXJ0YWInXHJcbiAgICB9KTtcclxuICAgIF9hc3NlcnQodHlwZW9mICgoX2ggPSAoX2cgPSAoX2YgPSB3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4uY29yZG92YSkgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLnBsdWdpbnMpID09PSBudWxsIHx8IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZy5icm93c2VydGFiKSA9PT0gbnVsbCB8fCBfaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2guaXNBdmFpbGFibGUpID09PSAnZnVuY3Rpb24nLCBhdXRoLCBcImludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uXCIgLyogSU5WQUxJRF9DT1JET1ZBX0NPTkZJR1VSQVRJT04gKi8sIHtcclxuICAgICAgICBtaXNzaW5nUGx1Z2luOiAnY29yZG92YS1wbHVnaW4tYnJvd3NlcnRhYidcclxuICAgIH0pO1xyXG4gICAgLy8gaHR0cHM6Ly9jb3Jkb3ZhLmFwYWNoZS5vcmcvZG9jcy9lbi9sYXRlc3QvcmVmZXJlbmNlL2NvcmRvdmEtcGx1Z2luLWluYXBwYnJvd3Nlci9cclxuICAgIF9hc3NlcnQodHlwZW9mICgoX2sgPSAoX2ogPSB3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4uY29yZG92YSkgPT09IG51bGwgfHwgX2ogPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9qLkluQXBwQnJvd3NlcikgPT09IG51bGwgfHwgX2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9rLm9wZW4pID09PSAnZnVuY3Rpb24nLCBhdXRoLCBcImludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uXCIgLyogSU5WQUxJRF9DT1JET1ZBX0NPTkZJR1VSQVRJT04gKi8sIHtcclxuICAgICAgICBtaXNzaW5nUGx1Z2luOiAnY29yZG92YS1wbHVnaW4taW5hcHBicm93c2VyJ1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIENvbXB1dGVzIHRoZSBTSEEtMjU2IG9mIGEgc2Vzc2lvbiBJRC4gVGhlIFN1YnRsZUNyeXB0byBpbnRlcmZhY2UgaXMgb25seVxyXG4gKiBhdmFpbGFibGUgaW4gXCJzZWN1cmVcIiBjb250ZXh0cywgd2hpY2ggY292ZXJzIENvcmRvdmEgKHdoaWNoIGlzIHNlcnZlZCBvbiBhIGZpbGVcclxuICogcHJvdG9jb2wpLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY29tcHV0ZVNoYTI1NihzZXNzaW9uSWQpIHtcclxuICAgIGNvbnN0IGJ5dGVzID0gc3RyaW5nVG9BcnJheUJ1ZmZlcihzZXNzaW9uSWQpO1xyXG4gICAgLy8gVE9ETzogRm9yIElFMTEgY3J5cHRvIGhhcyBhIGRpZmZlcmVudCBuYW1lIGFuZCB0aGlzIG9wZXJhdGlvbiBjb21lcyBiYWNrXHJcbiAgICAvLyAgICAgICBhcyBhbiBvYmplY3QsIG5vdCBhIHByb21pc2UuIFRoaXMgaXMgdGhlIG9sZCBwcm9wb3NlZCBzdGFuZGFyZCB0aGF0XHJcbiAgICAvLyAgICAgICBpcyB1c2VkIGJ5IElFMTE6XHJcbiAgICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvMjAxMy9XRC1XZWJDcnlwdG9BUEktMjAxMzAxMDgvI2NyeXB0b29wZXJhdGlvbi1pbnRlcmZhY2VcclxuICAgIGNvbnN0IGJ1ZiA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMjU2JywgYnl0ZXMpO1xyXG4gICAgY29uc3QgYXJyID0gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShidWYpKTtcclxuICAgIHJldHVybiBhcnIubWFwKG51bSA9PiBudW0udG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpO1xyXG59XHJcbmZ1bmN0aW9uIHN0cmluZ1RvQXJyYXlCdWZmZXIoc3RyKSB7XHJcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIG9ubHkgbWVhbnQgdG8gZGVhbCB3aXRoIGFuIEFTQ0lJIGNoYXJzZXQgYW5kIG1ha2VzXHJcbiAgICAvLyBjZXJ0YWluIHNpbXBsaWZ5aW5nIGFzc3VtcHRpb25zLlxyXG4gICAgZGVidWdBc3NlcnQoL1swLTlhLXpBLVpdKy8udGVzdChzdHIpLCAnQ2FuIG9ubHkgY29udmVydCBhbHBoYS1udW1lcmljIHN0cmluZ3MnKTtcclxuICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzdHIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYnVmZiA9IG5ldyBBcnJheUJ1ZmZlcihzdHIubGVuZ3RoKTtcclxuICAgIGNvbnN0IHZpZXcgPSBuZXcgVWludDhBcnJheShidWZmKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmlld1tpXSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZpZXc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgU0VTU0lPTl9JRF9MRU5HVEggPSAyMDtcclxuLyoqIEN1c3RvbSBBdXRoRXZlbnRNYW5hZ2VyIHRoYXQgYWRkcyBwYXNzaXZlIGxpc3RlbmVycyB0byBldmVudHMgKi9cclxuY2xhc3MgQ29yZG92YUF1dGhFdmVudE1hbmFnZXIgZXh0ZW5kcyBBdXRoRXZlbnRNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgdGhpcy5wYXNzaXZlTGlzdGVuZXJzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMuaW5pdFByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlSW5pYWxpemVkID0gcmVzb2x2ZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFkZFBhc3NpdmVMaXN0ZW5lcihjYikge1xyXG4gICAgICAgIHRoaXMucGFzc2l2ZUxpc3RlbmVycy5hZGQoY2IpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlUGFzc2l2ZUxpc3RlbmVyKGNiKSB7XHJcbiAgICAgICAgdGhpcy5wYXNzaXZlTGlzdGVuZXJzLmRlbGV0ZShjYik7XHJcbiAgICB9XHJcbiAgICAvLyBJbiBhIENvcmRvdmEgZW52aXJvbm1lbnQsIHRoaXMgbWFuYWdlciBjYW4gbGl2ZSB0aHJvdWdoIG11bHRpcGxlIHJlZGlyZWN0XHJcbiAgICAvLyBvcGVyYXRpb25zXHJcbiAgICByZXNldFJlZGlyZWN0KCkge1xyXG4gICAgICAgIHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5oYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIC8qKiBPdmVycmlkZSB0aGUgb25FdmVudCBtZXRob2QgKi9cclxuICAgIG9uRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnJlc29sdmVJbmlhbGl6ZWQoKTtcclxuICAgICAgICB0aGlzLnBhc3NpdmVMaXN0ZW5lcnMuZm9yRWFjaChjYiA9PiBjYihldmVudCkpO1xyXG4gICAgICAgIHJldHVybiBzdXBlci5vbkV2ZW50KGV2ZW50KTtcclxuICAgIH1cclxuICAgIGFzeW5jIGluaXRpYWxpemVkKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdFByb21pc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIChwYXJ0aWFsKSB7QGxpbmsgQXV0aEV2ZW50fS5cclxuICovXHJcbmZ1bmN0aW9uIF9nZW5lcmF0ZU5ld0V2ZW50KGF1dGgsIHR5cGUsIGV2ZW50SWQgPSBudWxsKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHR5cGUsXHJcbiAgICAgICAgZXZlbnRJZCxcclxuICAgICAgICB1cmxSZXNwb25zZTogbnVsbCxcclxuICAgICAgICBzZXNzaW9uSWQ6IGdlbmVyYXRlU2Vzc2lvbklkKCksXHJcbiAgICAgICAgcG9zdEJvZHk6IG51bGwsXHJcbiAgICAgICAgdGVuYW50SWQ6IGF1dGgudGVuYW50SWQsXHJcbiAgICAgICAgZXJyb3I6IF9jcmVhdGVFcnJvcihhdXRoLCBcIm5vLWF1dGgtZXZlbnRcIiAvKiBOT19BVVRIX0VWRU5UICovKVxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBfc2F2ZVBhcnRpYWxFdmVudChhdXRoLCBldmVudCkge1xyXG4gICAgcmV0dXJuIHN0b3JhZ2UoKS5fc2V0KHBlcnNpc3RlbmNlS2V5KGF1dGgpLCBldmVudCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2dldEFuZFJlbW92ZUV2ZW50KGF1dGgpIHtcclxuICAgIGNvbnN0IGV2ZW50ID0gKGF3YWl0IHN0b3JhZ2UoKS5fZ2V0KHBlcnNpc3RlbmNlS2V5KGF1dGgpKSk7XHJcbiAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICBhd2FpdCBzdG9yYWdlKCkuX3JlbW92ZShwZXJzaXN0ZW5jZUtleShhdXRoKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZXZlbnQ7XHJcbn1cclxuZnVuY3Rpb24gX2V2ZW50RnJvbVBhcnRpYWxBbmRVcmwocGFydGlhbEV2ZW50LCB1cmwpIHtcclxuICAgIHZhciBfYSwgX2I7XHJcbiAgICAvLyBQYXJzZSB0aGUgZGVlcCBsaW5rIHdpdGhpbiB0aGUgZHluYW1pYyBsaW5rIFVSTC5cclxuICAgIGNvbnN0IGNhbGxiYWNrVXJsID0gX2dldERlZXBMaW5rRnJvbUNhbGxiYWNrKHVybCk7XHJcbiAgICAvLyBDb25maXJtIGl0IGlzIGFjdHVhbGx5IGEgY2FsbGJhY2sgVVJMLlxyXG4gICAgLy8gQ3VycmVudGx5IHRoZSB1bml2ZXJzYWwgbGluayB3aWxsIGJlIG9mIHRoaXMgZm9ybWF0OlxyXG4gICAgLy8gaHR0cHM6Ly88QVVUSF9ET01BSU4+L19fL2F1dGgvY2FsbGJhY2s8T0FVVEhfUkVTUE9OU0U+XHJcbiAgICAvLyBUaGlzIGlzIGEgZmFrZSBVUkwgYnV0IGlzIG5vdCBpbnRlbmRlZCB0byB0YWtlIHRoZSB1c2VyIGFueXdoZXJlXHJcbiAgICAvLyBhbmQganVzdCByZWRpcmVjdCB0byB0aGUgYXBwLlxyXG4gICAgaWYgKGNhbGxiYWNrVXJsLmluY2x1ZGVzKCcvX18vYXV0aC9jYWxsYmFjaycpKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYW4gZXJyb3IgaW4gdGhlIFVSTC5cclxuICAgICAgICAvLyBUaGlzIG1lY2hhbmlzbSBpcyBhbHNvIHVzZWQgdG8gcGFzcyBlcnJvcnMgYmFjayB0byB0aGUgYXBwOlxyXG4gICAgICAgIC8vIGh0dHBzOi8vPEFVVEhfRE9NQUlOPi9fXy9hdXRoL2NhbGxiYWNrP2ZpcmViYXNlRXJyb3I9PFNUUklOR0lGSUVEX0VSUk9SPlxyXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHNlYXJjaFBhcmFtc09yRW1wdHkoY2FsbGJhY2tVcmwpO1xyXG4gICAgICAgIC8vIEdldCB0aGUgZXJyb3Igb2JqZWN0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIHN0cmluZ2lmaWVkIGVycm9yIGlmIGZvdW5kLlxyXG4gICAgICAgIGNvbnN0IGVycm9yT2JqZWN0ID0gcGFyYW1zWydmaXJlYmFzZUVycm9yJ11cclxuICAgICAgICAgICAgPyBwYXJzZUpzb25Pck51bGwoZGVjb2RlVVJJQ29tcG9uZW50KHBhcmFtc1snZmlyZWJhc2VFcnJvciddKSlcclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSAoX2IgPSAoX2EgPSBlcnJvck9iamVjdCA9PT0gbnVsbCB8fCBlcnJvck9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3JPYmplY3RbJ2NvZGUnXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNwbGl0KCdhdXRoLycpKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbMV07XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBjb2RlID8gX2NyZWF0ZUVycm9yKGNvZGUpIDogbnVsbDtcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IHBhcnRpYWxFdmVudC50eXBlLFxyXG4gICAgICAgICAgICAgICAgZXZlbnRJZDogcGFydGlhbEV2ZW50LmV2ZW50SWQsXHJcbiAgICAgICAgICAgICAgICB0ZW5hbnRJZDogcGFydGlhbEV2ZW50LnRlbmFudElkLFxyXG4gICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICB1cmxSZXNwb25zZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIHNlc3Npb25JZDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5OiBudWxsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogcGFydGlhbEV2ZW50LnR5cGUsXHJcbiAgICAgICAgICAgICAgICBldmVudElkOiBwYXJ0aWFsRXZlbnQuZXZlbnRJZCxcclxuICAgICAgICAgICAgICAgIHRlbmFudElkOiBwYXJ0aWFsRXZlbnQudGVuYW50SWQsXHJcbiAgICAgICAgICAgICAgICBzZXNzaW9uSWQ6IHBhcnRpYWxFdmVudC5zZXNzaW9uSWQsXHJcbiAgICAgICAgICAgICAgICB1cmxSZXNwb25zZTogY2FsbGJhY2tVcmwsXHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keTogbnVsbFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcbmZ1bmN0aW9uIGdlbmVyYXRlU2Vzc2lvbklkKCkge1xyXG4gICAgY29uc3QgY2hhcnMgPSBbXTtcclxuICAgIGNvbnN0IGFsbG93ZWRDaGFycyA9ICcxMjM0NTY3ODkwYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWic7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IFNFU1NJT05fSURfTEVOR1RIOyBpKyspIHtcclxuICAgICAgICBjb25zdCBpZHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhbGxvd2VkQ2hhcnMubGVuZ3RoKTtcclxuICAgICAgICBjaGFycy5wdXNoKGFsbG93ZWRDaGFycy5jaGFyQXQoaWR4KSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2hhcnMuam9pbignJyk7XHJcbn1cclxuZnVuY3Rpb24gc3RvcmFnZSgpIHtcclxuICAgIHJldHVybiBfZ2V0SW5zdGFuY2UoYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UpO1xyXG59XHJcbmZ1bmN0aW9uIHBlcnNpc3RlbmNlS2V5KGF1dGgpIHtcclxuICAgIHJldHVybiBfcGVyc2lzdGVuY2VLZXlOYW1lKFwiYXV0aEV2ZW50XCIgLyogQVVUSF9FVkVOVCAqLywgYXV0aC5jb25maWcuYXBpS2V5LCBhdXRoLm5hbWUpO1xyXG59XHJcbmZ1bmN0aW9uIHBhcnNlSnNvbk9yTnVsbChqc29uKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG4vLyBFeHBvcnRlZCBmb3IgdGVzdGluZ1xyXG5mdW5jdGlvbiBfZ2V0RGVlcExpbmtGcm9tQ2FsbGJhY2sodXJsKSB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBzZWFyY2hQYXJhbXNPckVtcHR5KHVybCk7XHJcbiAgICBjb25zdCBsaW5rID0gcGFyYW1zWydsaW5rJ10gPyBkZWNvZGVVUklDb21wb25lbnQocGFyYW1zWydsaW5rJ10pIDogdW5kZWZpbmVkO1xyXG4gICAgLy8gRG91YmxlIGxpbmsgY2FzZSAoYXV0b21hdGljIHJlZGlyZWN0KVxyXG4gICAgY29uc3QgZG91YmxlRGVlcExpbmsgPSBzZWFyY2hQYXJhbXNPckVtcHR5KGxpbmspWydsaW5rJ107XHJcbiAgICAvLyBpT1MgY3VzdG9tIHNjaGVtZSBsaW5rcy5cclxuICAgIGNvbnN0IGlPU0RlZXBMaW5rID0gcGFyYW1zWydkZWVwX2xpbmtfaWQnXVxyXG4gICAgICAgID8gZGVjb2RlVVJJQ29tcG9uZW50KHBhcmFtc1snZGVlcF9saW5rX2lkJ10pXHJcbiAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICBjb25zdCBpT1NEb3VibGVEZWVwTGluayA9IHNlYXJjaFBhcmFtc09yRW1wdHkoaU9TRGVlcExpbmspWydsaW5rJ107XHJcbiAgICByZXR1cm4gaU9TRG91YmxlRGVlcExpbmsgfHwgaU9TRGVlcExpbmsgfHwgZG91YmxlRGVlcExpbmsgfHwgbGluayB8fCB1cmw7XHJcbn1cclxuLyoqXHJcbiAqIE9wdGltaXN0aWNhbGx5IHRyaWVzIHRvIGdldCBzZWFyY2ggcGFyYW1zIGZyb20gYSBzdHJpbmcsIG9yIGVsc2UgcmV0dXJucyBhblxyXG4gKiBlbXB0eSBzZWFyY2ggcGFyYW1zIG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIHNlYXJjaFBhcmFtc09yRW1wdHkodXJsKSB7XHJcbiAgICBpZiAoISh1cmwgPT09IG51bGwgfHwgdXJsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1cmwuaW5jbHVkZXMoJz8nKSkpIHtcclxuICAgICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcbiAgICBjb25zdCBbXywgLi4ucmVzdF0gPSB1cmwuc3BsaXQoJz8nKTtcclxuICAgIHJldHVybiBxdWVyeXN0cmluZ0RlY29kZShyZXN0LmpvaW4oJz8nKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEhvdyBsb25nIHRvIHdhaXQgZm9yIHRoZSBpbml0aWFsIGF1dGggZXZlbnQgYmVmb3JlIGNvbmNsdWRpbmcgbm9cclxuICogcmVkaXJlY3QgcGVuZGluZ1xyXG4gKi9cclxuY29uc3QgSU5JVElBTF9FVkVOVF9USU1FT1VUX01TID0gNTAwO1xyXG5jbGFzcyBDb3Jkb3ZhUG9wdXBSZWRpcmVjdFJlc29sdmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuX3JlZGlyZWN0UGVyc2lzdGVuY2UgPSBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlO1xyXG4gICAgICAgIHRoaXMuX3Nob3VsZEluaXRQcm9hY3RpdmVseSA9IHRydWU7IC8vIFRoaXMgaXMgbGlnaHR3ZWlnaHQgZm9yIENvcmRvdmFcclxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlcnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXMgPSB7fTtcclxuICAgICAgICB0aGlzLl9jb21wbGV0ZVJlZGlyZWN0Rm4gPSBfZ2V0UmVkaXJlY3RSZXN1bHQ7XHJcbiAgICAgICAgdGhpcy5fb3ZlcnJpZGVSZWRpcmVjdFJlc3VsdCA9IF9vdmVycmlkZVJlZGlyZWN0UmVzdWx0O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2luaXRpYWxpemUoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGF1dGguX2tleSgpO1xyXG4gICAgICAgIGxldCBtYW5hZ2VyID0gdGhpcy5ldmVudE1hbmFnZXJzLmdldChrZXkpO1xyXG4gICAgICAgIGlmICghbWFuYWdlcikge1xyXG4gICAgICAgICAgICBtYW5hZ2VyID0gbmV3IENvcmRvdmFBdXRoRXZlbnRNYW5hZ2VyKGF1dGgpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50TWFuYWdlcnMuc2V0KGtleSwgbWFuYWdlcik7XHJcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoQ2FsbGJhY2tMaXN0ZW5lcnMoYXV0aCwgbWFuYWdlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgX29wZW5Qb3B1cChhdXRoKSB7XHJcbiAgICAgICAgX2ZhaWwoYXV0aCwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX29wZW5SZWRpcmVjdChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpIHtcclxuICAgICAgICBfY2hlY2tDb3Jkb3ZhQ29uZmlndXJhdGlvbihhdXRoKTtcclxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gYXdhaXQgdGhpcy5faW5pdGlhbGl6ZShhdXRoKTtcclxuICAgICAgICBhd2FpdCBtYW5hZ2VyLmluaXRpYWxpemVkKCk7XHJcbiAgICAgICAgLy8gUmVzZXQgdGhlIHBlcnNpc3RlZCByZWRpcmVjdCBzdGF0ZXMuIFRoaXMgZG9lcyBub3QgbWF0dGVyIG9uIFdlYiB3aGVyZVxyXG4gICAgICAgIC8vIHRoZSByZWRpcmVjdCBhbHdheXMgYmxvd3MgYXdheSBhcHBsaWNhdGlvbiBzdGF0ZSBlbnRpcmVseS4gT24gQ29yZG92YSxcclxuICAgICAgICAvLyB0aGUgYXBwIG1haW50YWlucyBjb250cm9sIGZsb3cgdGhyb3VnaCB0aGUgcmVkaXJlY3QuXHJcbiAgICAgICAgbWFuYWdlci5yZXNldFJlZGlyZWN0KCk7XHJcbiAgICAgICAgX2NsZWFyUmVkaXJlY3RPdXRjb21lcygpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuX29yaWdpblZhbGlkYXRpb24oYXV0aCk7XHJcbiAgICAgICAgY29uc3QgZXZlbnQgPSBfZ2VuZXJhdGVOZXdFdmVudChhdXRoLCBhdXRoVHlwZSwgZXZlbnRJZCk7XHJcbiAgICAgICAgYXdhaXQgX3NhdmVQYXJ0aWFsRXZlbnQoYXV0aCwgZXZlbnQpO1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGF3YWl0IF9nZW5lcmF0ZUhhbmRsZXJVcmwoYXV0aCwgZXZlbnQsIHByb3ZpZGVyKTtcclxuICAgICAgICBjb25zdCBpYWJSZWYgPSBhd2FpdCBfcGVyZm9ybVJlZGlyZWN0KHVybCk7XHJcbiAgICAgICAgcmV0dXJuIF93YWl0Rm9yQXBwUmVzdW1lKGF1dGgsIG1hbmFnZXIsIGlhYlJlZik7XHJcbiAgICB9XHJcbiAgICBfaXNJZnJhbWVXZWJTdG9yYWdlU3VwcG9ydGVkKF9hdXRoLCBfY2IpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XHJcbiAgICB9XHJcbiAgICBfb3JpZ2luVmFsaWRhdGlvbihhdXRoKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYXV0aC5fa2V5KCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzW2tleV0gPSBfdmFsaWRhdGVPcmlnaW4oYXV0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlc1trZXldO1xyXG4gICAgfVxyXG4gICAgYXR0YWNoQ2FsbGJhY2tMaXN0ZW5lcnMoYXV0aCwgbWFuYWdlcikge1xyXG4gICAgICAgIC8vIEdldCB0aGUgZ2xvYmFsIHBsdWdpbnNcclxuICAgICAgICBjb25zdCB7IHVuaXZlcnNhbExpbmtzLCBoYW5kbGVPcGVuVVJMLCBCdWlsZEluZm8gfSA9IF9jb3Jkb3ZhV2luZG93KCk7XHJcbiAgICAgICAgY29uc3Qgbm9FdmVudFRpbWVvdXQgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgLy8gV2UgZGlkbid0IHNlZSB0aGF0IGluaXRpYWwgZXZlbnQuIENsZWFyIGFueSBwZW5kaW5nIG9iamVjdCBhbmRcclxuICAgICAgICAgICAgLy8gZGlzcGF0Y2ggbm8gZXZlbnRcclxuICAgICAgICAgICAgYXdhaXQgX2dldEFuZFJlbW92ZUV2ZW50KGF1dGgpO1xyXG4gICAgICAgICAgICBtYW5hZ2VyLm9uRXZlbnQoZ2VuZXJhdGVOb0V2ZW50KCkpO1xyXG4gICAgICAgIH0sIElOSVRJQUxfRVZFTlRfVElNRU9VVF9NUyk7XHJcbiAgICAgICAgY29uc3QgdW5pdmVyc2FsTGlua3NDYiA9IGFzeW5jIChldmVudERhdGEpID0+IHtcclxuICAgICAgICAgICAgLy8gV2UgaGF2ZSBhbiBldmVudCBzbyB3ZSBjYW4gY2xlYXIgdGhlIG5vIGV2ZW50IHRpbWVvdXRcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG5vRXZlbnRUaW1lb3V0KTtcclxuICAgICAgICAgICAgY29uc3QgcGFydGlhbEV2ZW50ID0gYXdhaXQgX2dldEFuZFJlbW92ZUV2ZW50KGF1dGgpO1xyXG4gICAgICAgICAgICBsZXQgZmluYWxFdmVudCA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChwYXJ0aWFsRXZlbnQgJiYgKGV2ZW50RGF0YSA9PT0gbnVsbCB8fCBldmVudERhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGV2ZW50RGF0YVsndXJsJ10pKSB7XHJcbiAgICAgICAgICAgICAgICBmaW5hbEV2ZW50ID0gX2V2ZW50RnJvbVBhcnRpYWxBbmRVcmwocGFydGlhbEV2ZW50LCBldmVudERhdGFbJ3VybCddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJZiBmaW5hbEV2ZW50IGlzIG5ldmVyIGZpbGxlZCwgdHJpZ2dlciB3aXRoIG5vIGV2ZW50XHJcbiAgICAgICAgICAgIG1hbmFnZXIub25FdmVudChmaW5hbEV2ZW50IHx8IGdlbmVyYXRlTm9FdmVudCgpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIFVuaXZlcnNhbCBsaW5rcyBzdWJzY3JpYmVyIGRvZXNuJ3QgZXhpc3QgZm9yIGlPUywgc28gd2UgbmVlZCB0byBjaGVja1xyXG4gICAgICAgIGlmICh0eXBlb2YgdW5pdmVyc2FsTGlua3MgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgICAgIHR5cGVvZiB1bml2ZXJzYWxMaW5rcy5zdWJzY3JpYmUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdW5pdmVyc2FsTGlua3Muc3Vic2NyaWJlKG51bGwsIHVuaXZlcnNhbExpbmtzQ2IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpT1MgNyBvciA4IGN1c3RvbSBVUkwgc2NoZW1lcy5cclxuICAgICAgICAvLyBUaGlzIGlzIGFsc28gdGhlIGN1cnJlbnQgZGVmYXVsdCBiZWhhdmlvciBmb3IgaU9TIDkrLlxyXG4gICAgICAgIC8vIEZvciB0aGlzIHRvIHdvcmssIGNvcmRvdmEtcGx1Z2luLWN1c3RvbXVybHNjaGVtZSBuZWVkcyB0byBiZSBpbnN0YWxsZWQuXHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0VkZHlWZXJicnVnZ2VuL0N1c3RvbS1VUkwtc2NoZW1lXHJcbiAgICAgICAgLy8gRG8gbm90IG92ZXJ3cml0ZSB0aGUgZXhpc3RpbmcgZGV2ZWxvcGVyJ3MgVVJMIGhhbmRsZXIuXHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdIYW5kbGVPcGVuVVJMID0gaGFuZGxlT3BlblVSTDtcclxuICAgICAgICBjb25zdCBwYWNrYWdlUHJlZml4ID0gYCR7QnVpbGRJbmZvLnBhY2thZ2VOYW1lLnRvTG93ZXJDYXNlKCl9Oi8vYDtcclxuICAgICAgICBfY29yZG92YVdpbmRvdygpLmhhbmRsZU9wZW5VUkwgPSBhc3luYyAodXJsKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh1cmwudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKHBhY2thZ2VQcmVmaXgpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSB3YW50IHRoaXMgaW50ZW50aW9uYWxseSB0byBmbG9hdFxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgICAgICAgICAgdW5pdmVyc2FsTGlua3NDYih7IHVybCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDYWxsIHRoZSBkZXZlbG9wZXIncyBoYW5kbGVyIGlmIGl0IGlzIHByZXNlbnQuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmdIYW5kbGVPcGVuVVJMID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nSGFuZGxlT3BlblVSTCh1cmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgZGV2ZWxvcGVyIGVycm9yLiBEb24ndCBzdG9wIHRoZSBmbG93IG9mIHRoZSBTREsuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9IHN1aXRhYmxlIGZvciBDb3Jkb3ZhXHJcbiAqIGJhc2VkIGFwcGxpY2F0aW9ucy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgY29yZG92YVBvcHVwUmVkaXJlY3RSZXNvbHZlciA9IENvcmRvdmFQb3B1cFJlZGlyZWN0UmVzb2x2ZXI7XHJcbmZ1bmN0aW9uIGdlbmVyYXRlTm9FdmVudCgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdHlwZTogXCJ1bmtub3duXCIgLyogVU5LTk9XTiAqLyxcclxuICAgICAgICBldmVudElkOiBudWxsLFxyXG4gICAgICAgIHNlc3Npb25JZDogbnVsbCxcclxuICAgICAgICB1cmxSZXNwb25zZTogbnVsbCxcclxuICAgICAgICBwb3N0Qm9keTogbnVsbCxcclxuICAgICAgICB0ZW5hbnRJZDogbnVsbCxcclxuICAgICAgICBlcnJvcjogX2NyZWF0ZUVycm9yKFwibm8tYXV0aC1ldmVudFwiIC8qIE5PX0FVVEhfRVZFTlQgKi8pXHJcbiAgICB9O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFRoaXMgZnVuY3Rpb24gc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGJ5IGZyYW1ld29ya3MgKGUuZy4gRmlyZWJhc2VVSS13ZWIpIHRvIGxvZyB0aGVpciB1c2FnZS5cclxuLy8gSXQgaXMgbm90IGludGVuZGVkIGZvciBkaXJlY3QgdXNlIGJ5IGRldmVsb3BlciBhcHBzLiBOTyBqc2RvYyBoZXJlIHRvIGludGVudGlvbmFsbHkgbGVhdmUgaXQgb3V0XHJcbi8vIG9mIGF1dG9nZW5lcmF0ZWQgZG9jdW1lbnRhdGlvbiBwYWdlcyB0byByZWR1Y2UgYWNjaWRlbnRhbCBtaXN1c2UuXHJcbmZ1bmN0aW9uIGFkZEZyYW1ld29ya0ZvckxvZ2dpbmcoYXV0aCwgZnJhbWV3b3JrKSB7XHJcbiAgICBfY2FzdEF1dGgoYXV0aCkuX2xvZ0ZyYW1ld29yayhmcmFtZXdvcmspO1xyXG59XG5cbmV4cG9ydCB7IGFkZEZyYW1ld29ya0ZvckxvZ2dpbmcsIGNvcmRvdmFQb3B1cFJlZGlyZWN0UmVzb2x2ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVybmFsLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@firebase/auth/dist/esm2017/internal.js\n"));

/***/ }),

/***/ "./node_modules/firebase/compat/auth/dist/index.esm.js":
/*!*************************************************************!*\
  !*** ./node_modules/firebase/compat/auth/dist/index.esm.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _firebase_auth_compat__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @firebase/auth-compat */ \"./node_modules/@firebase/auth-compat/dist/index.esm2017.js\");\n\n//# sourceMappingURL=index.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvY29tcGF0L2F1dGgvZGlzdC9pbmRleC5lc20uanMuanMiLCJtYXBwaW5ncyI6Ijs7QUFBK0I7QUFDL0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2NvbXBhdC9hdXRoL2Rpc3QvaW5kZXguZXNtLmpzPzY4M2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICdAZmlyZWJhc2UvYXV0aC1jb21wYXQnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/firebase/compat/auth/dist/index.esm.js\n"));

/***/ }),

/***/ "./pages/login.tsx":
/*!*************************!*\
  !*** ./pages/login.tsx ***!
  \*************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @swc/helpers/src/_async_to_generator.mjs */ \"./node_modules/@swc/helpers/src/_async_to_generator.mjs\");\n/* harmony import */ var C_Users_tmizu_Desktop_info_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/next/dist/compiled/regenerator-runtime/runtime.js */ \"./node_modules/next/dist/compiled/regenerator-runtime/runtime.js\");\n/* harmony import */ var C_Users_tmizu_Desktop_info_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(C_Users_tmizu_Desktop_info_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/router */ \"./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/link */ \"./node_modules/next/link.js\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ \"./node_modules/@mui/material/index.js\");\n/* harmony import */ var firebase_compat_app__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! firebase/compat/app */ \"./node_modules/firebase/compat/app/dist/index.esm.js\");\n/* harmony import */ var firebase_compat_auth__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! firebase/compat/auth */ \"./node_modules/firebase/compat/auth/dist/index.esm.js\");\n/* harmony import */ var _context_AuthContext__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./context/AuthContext */ \"./pages/context/AuthContext.tsx\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./firebase */ \"./pages/firebase.ts\");\n\n\nvar _this = undefined;\n\nvar _s = $RefreshSig$();\n\n\n\n\n//import { css } from \"@emotion/react\"\n\n\n\n\nvar Login = function() {\n    _s();\n    var user = (0,_context_AuthContext__WEBPACK_IMPORTED_MODULE_7__.useAuthContext)().user;\n    var isLoggedIn = !!user;\n    var router = (0,next_router__WEBPACK_IMPORTED_MODULE_3__.useRouter)();\n    var auth = (0,firebase_compat_auth__WEBPACK_IMPORTED_MODULE_6__.getAuth)(_firebase__WEBPACK_IMPORTED_MODULE_8__.app);\n    var ref = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\"), email = ref[0], setEmail = ref[1];\n    var ref1 = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\"), password = ref1[0], setPassword = ref1[1];\n    var handleSubmit = function() {\n        var _ref = (0,_swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(C_Users_tmizu_Desktop_info_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee(e) {\n            return C_Users_tmizu_Desktop_info_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_ctx) {\n                while(1)switch(_ctx.prev = _ctx.next){\n                    case 0:\n                        e.preventDefault();\n                        _ctx.next = 3;\n                        return firebase_compat_app__WEBPACK_IMPORTED_MODULE_5__[\"default\"].auth().setPersistence(firebase_compat_app__WEBPACK_IMPORTED_MODULE_5__[\"default\"].auth.Auth.Persistence.SESSION);\n                    case 3:\n                        _ctx.next = 5;\n                        return (0,firebase_compat_auth__WEBPACK_IMPORTED_MODULE_6__.signInWithEmailAndPassword)(auth, email, password).then(function(user) {\n                            var currentUser = firebase_compat_app__WEBPACK_IMPORTED_MODULE_5__[\"default\"].auth().currentUser;\n                            if (currentUser && !currentUser.emailVerified) {\n                                firebase_compat_app__WEBPACK_IMPORTED_MODULE_5__[\"default\"].auth().signOut();\n                            }\n                        });\n                    case 5:\n                        router.push(\"/\");\n                    case 6:\n                    case \"end\":\n                        return _ctx.stop();\n                }\n            }, _callee);\n        }));\n        return function handleSubmit(e) {\n            return _ref.apply(this, arguments);\n        };\n    }();\n    var handleChangeEmail = function(e) {\n        setEmail(e.currentTarget.value);\n    };\n    var handleChangePassword = function(e) {\n        setPassword(e.currentTarget.value);\n    };\n    var handleClose = function() {\n        var _ref = (0,_swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(C_Users_tmizu_Desktop_info_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().mark(function _callee() {\n            return C_Users_tmizu_Desktop_info_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().wrap(function _callee$(_ctx) {\n                while(1)switch(_ctx.prev = _ctx.next){\n                    case 0:\n                        _ctx.next = 2;\n                        return router.push(\"/\");\n                    case 2:\n                    case \"end\":\n                        return _ctx.stop();\n                }\n            }, _callee);\n        }));\n        return function handleClose() {\n            return _ref.apply(this, arguments);\n        };\n    }();\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"div\", {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(_mui_material__WEBPACK_IMPORTED_MODULE_10__.Snackbar, {\n                open: isLoggedIn,\n                anchorOrigin: {\n                    vertical: \"top\",\n                    horizontal: \"center\"\n                },\n                autoHideDuration: 3000,\n                onClose: handleClose,\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(_mui_material__WEBPACK_IMPORTED_MODULE_10__.Alert, {\n                    onClose: handleClose,\n                    severity: \"warning\",\n                    children: \"すでにログインしています\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n                    lineNumber: 55,\n                    columnNumber: 9\n                }, _this)\n            }, \"top\" + \"center\", false, {\n                fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n                lineNumber: 48,\n                columnNumber: 7\n            }, _this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(_mui_material__WEBPACK_IMPORTED_MODULE_10__.Snackbar, {\n                open: !isLoggedIn,\n                anchorOrigin: {\n                    vertical: \"top\",\n                    horizontal: \"center\"\n                },\n                autoHideDuration: 3000,\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(_mui_material__WEBPACK_IMPORTED_MODULE_10__.Alert, {\n                    severity: \"warning\",\n                    children: \"ログインしてください\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n                    lineNumber: 65,\n                    columnNumber: 9\n                }, _this)\n            }, \"top\" + \"center\", false, {\n                fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n                lineNumber: 59,\n                columnNumber: 7\n            }, _this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"h2\", {\n                children: \"ログイン\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n                lineNumber: 67,\n                columnNumber: 7\n            }, _this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"form\", {\n                onSubmit: handleSubmit,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"div\", {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(_mui_material__WEBPACK_IMPORTED_MODULE_10__.InputLabel, {\n                                children: \"メールアドレス\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n                                lineNumber: 76,\n                                columnNumber: 11\n                            }, _this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(_mui_material__WEBPACK_IMPORTED_MODULE_10__.TextField, {\n                                name: \"email\",\n                                type: \"email\",\n                                size: \"small\",\n                                onChange: handleChangeEmail\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n                                lineNumber: 77,\n                                columnNumber: 11\n                            }, _this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n                        lineNumber: 69,\n                        columnNumber: 9\n                    }, _this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"div\", {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(_mui_material__WEBPACK_IMPORTED_MODULE_10__.InputLabel, {\n                                children: \"パスワード\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n                                lineNumber: 95,\n                                columnNumber: 11\n                            }, _this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(_mui_material__WEBPACK_IMPORTED_MODULE_10__.TextField, {\n                                name: \"password\",\n                                type: \"password\",\n                                size: \"small\",\n                                onChange: handleChangePassword\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n                                lineNumber: 96,\n                                columnNumber: 11\n                            }, _this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n                        lineNumber: 87,\n                        columnNumber: 9\n                    }, _this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"div\", {\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(_mui_material__WEBPACK_IMPORTED_MODULE_10__.Button, {\n                            type: \"submit\",\n                            variant: \"outlined\",\n                            children: \"ログイン\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n                            lineNumber: 113,\n                            columnNumber: 11\n                        }, _this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n                        lineNumber: 106,\n                        columnNumber: 9\n                    }, _this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"div\", {\n                        children: [\n                            \"ユーザ登録は\",\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)((next_link__WEBPACK_IMPORTED_MODULE_4___default()), {\n                                href: \"/signup\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxDEV)(\"a\", {\n                                    children: \"こちら\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n                                    lineNumber: 126,\n                                    columnNumber: 13\n                                }, _this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n                                lineNumber: 125,\n                                columnNumber: 11\n                            }, _this),\n                            \"から\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n                        lineNumber: 117,\n                        columnNumber: 9\n                    }, _this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n                lineNumber: 68,\n                columnNumber: 7\n            }, _this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\tmizu\\\\Desktop\\\\info\\\\pages\\\\login.tsx\",\n        lineNumber: 40,\n        columnNumber: 5\n    }, _this);\n};\n_s(Login, \"IMtcy0pIW0htvEGYl4ESc30ca3s=\", false, function() {\n    return [\n        _context_AuthContext__WEBPACK_IMPORTED_MODULE_7__.useAuthContext,\n        next_router__WEBPACK_IMPORTED_MODULE_3__.useRouter\n    ];\n});\n_c = Login;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Login);\nvar _c;\n$RefreshReg$(_c, \"Login\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y2s6Ly9fTl9FLy4vcGFnZXMvbG9naW4udHN4PzcyNDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCJcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiXG5pbXBvcnQgTGluayBmcm9tIFwibmV4dC9saW5rXCJcbmltcG9ydCB7IEFsZXJ0LCBCdXR0b24sIElucHV0TGFiZWwsIFNuYWNrYmFyLCBUZXh0RmllbGQgfSBmcm9tIFwiQG11aS9tYXRlcmlhbFwiXG4vL2ltcG9ydCB7IGNzcyB9IGZyb20gXCJAZW1vdGlvbi9yZWFjdFwiXG5pbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UvY29tcGF0L2FwcCc7XG5pbXBvcnQgeyBnZXRBdXRoLCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCwgZ2V0SWRUb2tlbiwgc2V0UGVyc2lzdGVuY2UgfSBmcm9tIFwiZmlyZWJhc2UvY29tcGF0L2F1dGhcIlxuaW1wb3J0IHsgdXNlQXV0aENvbnRleHQgfSBmcm9tIFwiLi9jb250ZXh0L0F1dGhDb250ZXh0XCJcbmltcG9ydCB7IGFwcCB9IGZyb20gXCIuL2ZpcmViYXNlXCJcblxuY29uc3QgTG9naW4gPSAoKSA9PiB7XG4gIGNvbnN0IHsgdXNlciB9ID0gdXNlQXV0aENvbnRleHQoKVxuICBjb25zdCBpc0xvZ2dlZEluID0gISF1c2VyXG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpXG4gIGNvbnN0IGF1dGggPSBnZXRBdXRoKGFwcClcbiAgY29uc3QgW2VtYWlsLCBzZXRFbWFpbF0gPSB1c2VTdGF0ZShcIlwiKVxuICBjb25zdCBbcGFzc3dvcmQsIHNldFBhc3N3b3JkXSA9IHVzZVN0YXRlKFwiXCIpXG4gIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jIChlOiBSZWFjdC5Gb3JtRXZlbnQ8SFRNTEZvcm1FbGVtZW50PikgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGF3YWl0IGZpcmViYXNlLmF1dGgoKS5zZXRQZXJzaXN0ZW5jZShmaXJlYmFzZS5hdXRoLkF1dGguUGVyc2lzdGVuY2UuU0VTU0lPTik7XG4gICAgYXdhaXQgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKS50aGVuKHVzZXIgPT4ge1xuICAgICAgY29uc3QgY3VycmVudFVzZXI6ZmlyZWJhc2UuVXNlcnxudWxsID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyO1xuICAgICAgICBpZiAoY3VycmVudFVzZXIgJiYgIWN1cnJlbnRVc2VyLmVtYWlsVmVyaWZpZWQpIHtcbiAgICAgICAgICAgIGZpcmViYXNlLmF1dGgoKS5zaWduT3V0KCk7XG4gICAgICB9XG4gICAgfSlcbiAgICByb3V0ZXIucHVzaChcIi9cIilcbiAgfVxuICBjb25zdCBoYW5kbGVDaGFuZ2VFbWFpbCA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIHNldEVtYWlsKGUuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgfVxuICBjb25zdCBoYW5kbGVDaGFuZ2VQYXNzd29yZCA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIHNldFBhc3N3b3JkKGUuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgfVxuICBjb25zdCBoYW5kbGVDbG9zZSA9IGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCByb3V0ZXIucHVzaChcIi9cIilcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgIC8vICAgY3NzPXtjc3NgXG4gICAgLy8gICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgLy8gICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAvLyAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAvLyAgICAgZmxleC1mbG93OiBjb2x1bW47XG4gICAgLy8gICBgfVxuICAgID5cbiAgICAgIDxTbmFja2JhclxuICAgICAgICBvcGVuPXtpc0xvZ2dlZElufVxuICAgICAgICBhbmNob3JPcmlnaW49e3sgdmVydGljYWw6IFwidG9wXCIsIGhvcml6b250YWw6IFwiY2VudGVyXCIgfX1cbiAgICAgICAgYXV0b0hpZGVEdXJhdGlvbj17MzAwMH1cbiAgICAgICAga2V5PXtcInRvcFwiICsgXCJjZW50ZXJcIn1cbiAgICAgICAgb25DbG9zZT17aGFuZGxlQ2xvc2V9XG4gICAgICA+XG4gICAgICAgIDxBbGVydCBvbkNsb3NlPXtoYW5kbGVDbG9zZX0gc2V2ZXJpdHk9XCJ3YXJuaW5nXCI+XG4gICAgICAgICAg44GZ44Gn44Gr44Ot44Kw44Kk44Oz44GX44Gm44GE44G+44GZXG4gICAgICAgIDwvQWxlcnQ+XG4gICAgICA8L1NuYWNrYmFyPlxuICAgICAgPFNuYWNrYmFyXG4gICAgICAgIG9wZW49eyFpc0xvZ2dlZElufVxuICAgICAgICBhbmNob3JPcmlnaW49e3sgdmVydGljYWw6IFwidG9wXCIsIGhvcml6b250YWw6IFwiY2VudGVyXCIgfX1cbiAgICAgICAgYXV0b0hpZGVEdXJhdGlvbj17MzAwMH1cbiAgICAgICAga2V5PXtcInRvcFwiICsgXCJjZW50ZXJcIn1cbiAgICAgID5cbiAgICAgICAgPEFsZXJ0IHNldmVyaXR5PVwid2FybmluZ1wiPuODreOCsOOCpOODs+OBl+OBpuOBj+OBoOOBleOBhDwvQWxlcnQ+XG4gICAgICA8L1NuYWNrYmFyPlxuICAgICAgPGgyPuODreOCsOOCpOODszwvaDI+XG4gICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fT5cbiAgICAgICAgPGRpdlxuICAgICAgICAvLyAgIGNzcz17Y3NzYFxuICAgICAgICAvLyAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgLy8gICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAvLyAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgLy8gICBgfVxuICAgICAgICA+XG4gICAgICAgICAgPElucHV0TGFiZWw+44Oh44O844Or44Ki44OJ44Os44K5PC9JbnB1dExhYmVsPlxuICAgICAgICAgIDxUZXh0RmllbGRcbiAgICAgICAgICAgIG5hbWU9XCJlbWFpbFwiXG4gICAgICAgICAgICB0eXBlPVwiZW1haWxcIlxuICAgICAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2VFbWFpbH1cbiAgICAgICAgICAgIC8vIGNzcz17Y3NzYFxuICAgICAgICAgICAgLy8gICBwYWRkaW5nLWxlZnQ6IDEycHg7XG4gICAgICAgICAgICAvLyBgfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2XG4gICAgICAgIC8vICAgY3NzPXtjc3NgXG4gICAgICAgIC8vICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAvLyAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICAgICAgLy8gICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIC8vICAgICBtYXJnaW4tdG9wOiAxNnB4O1xuICAgICAgICAvLyAgIGB9XG4gICAgICAgID5cbiAgICAgICAgICA8SW5wdXRMYWJlbD7jg5Hjgrnjg6/jg7zjg4k8L0lucHV0TGFiZWw+XG4gICAgICAgICAgPFRleHRGaWVsZFxuICAgICAgICAgICAgbmFtZT1cInBhc3N3b3JkXCJcbiAgICAgICAgICAgIHR5cGU9XCJwYXNzd29yZFwiXG4gICAgICAgICAgICBzaXplPVwic21hbGxcIlxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZVBhc3N3b3JkfVxuICAgICAgICAgICAgLy8gY3NzPXtjc3NgXG4gICAgICAgICAgICAvLyAgIHBhZGRpbmctbGVmdDogMTJweDtcbiAgICAgICAgICAgIC8vIGB9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXZcbiAgICAgICAgLy8gICBjc3M9e2Nzc2BcbiAgICAgICAgLy8gICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIC8vICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgICAgICAvLyAgICAgbWFyZ2luLXRvcDogMTZweDtcbiAgICAgICAgLy8gICBgfVxuICAgICAgICA+XG4gICAgICAgICAgPEJ1dHRvbiB0eXBlPVwic3VibWl0XCIgdmFyaWFudD1cIm91dGxpbmVkXCI+XG4gICAgICAgICAgICDjg63jgrDjgqTjg7NcbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXZcbiAgICAgICAgLy8gICBjc3M9e2Nzc2BcbiAgICAgICAgLy8gICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIC8vICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgICAgICAvLyAgICAgbWFyZ2luLXRvcDogMjRweDtcbiAgICAgICAgLy8gICBgfVxuICAgICAgICA+XG4gICAgICAgICAg44Om44O844K255m76Yyy44GvXG4gICAgICAgICAgPExpbmsgaHJlZj17XCIvc2lnbnVwXCJ9PlxuICAgICAgICAgICAgPGE+44GT44Gh44KJPC9hPlxuICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICDjgYvjgolcbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Zvcm0+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgTG9naW4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZVJvdXRlciIsIkxpbmsiLCJBbGVydCIsIkJ1dHRvbiIsIklucHV0TGFiZWwiLCJTbmFja2JhciIsIlRleHRGaWVsZCIsImZpcmViYXNlIiwiZ2V0QXV0aCIsInNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIiwidXNlQXV0aENvbnRleHQiLCJhcHAiLCJMb2dpbiIsInVzZXIiLCJpc0xvZ2dlZEluIiwicm91dGVyIiwiYXV0aCIsImVtYWlsIiwic2V0RW1haWwiLCJwYXNzd29yZCIsInNldFBhc3N3b3JkIiwiaGFuZGxlU3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0Iiwic2V0UGVyc2lzdGVuY2UiLCJBdXRoIiwiUGVyc2lzdGVuY2UiLCJTRVNTSU9OIiwidGhlbiIsImN1cnJlbnRVc2VyIiwiZW1haWxWZXJpZmllZCIsInNpZ25PdXQiLCJwdXNoIiwiaGFuZGxlQ2hhbmdlRW1haWwiLCJjdXJyZW50VGFyZ2V0IiwidmFsdWUiLCJoYW5kbGVDaGFuZ2VQYXNzd29yZCIsImhhbmRsZUNsb3NlIiwiZGl2Iiwib3BlbiIsImFuY2hvck9yaWdpbiIsInZlcnRpY2FsIiwiaG9yaXpvbnRhbCIsImF1dG9IaWRlRHVyYXRpb24iLCJvbkNsb3NlIiwic2V2ZXJpdHkiLCJoMiIsImZvcm0iLCJvblN1Ym1pdCIsIm5hbWUiLCJ0eXBlIiwic2l6ZSIsIm9uQ2hhbmdlIiwidmFyaWFudCIsImhyZWYiLCJhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./pages/login.tsx\n"));

/***/ })

});